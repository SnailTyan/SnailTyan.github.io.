<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Spring Boot," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="Spring Boot 2.0.0参考手册_中文版_Part III_19-22">
<meta property="og:type" content="article">
<meta property="og:title" content="Spring Boot 2.0.0参考手册_中文版_Part III_19-22">
<meta property="og:url" content="noahsnail.com/2016/11/09/2016-11-9-Spring Boot 2.0.0参考手册_中文版_Part III_19-22/index.html">
<meta property="og:site_name" content="SnailTyan">
<meta property="og:description" content="Spring Boot 2.0.0参考手册_中文版_Part III_19-22">
<meta property="og:updated_time" content="2016-11-09T14:32:32.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Spring Boot 2.0.0参考手册_中文版_Part III_19-22">
<meta name="twitter:description" content="Spring Boot 2.0.0参考手册_中文版_Part III_19-22">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 'undefined',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: "",
      labels: ""
    }
  };
</script>



  <link rel="canonical" href="noahsnail.com/2016/11/09/2016-11-9-Spring Boot 2.0.0参考手册_中文版_Part III_19-22/"/>





  <title>Spring Boot 2.0.0参考手册_中文版_Part III_19-22 | SnailTyan</title>
  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-83591315-1', 'auto');
  ga('send', 'pageview');
</script>











</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">SnailTyan</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="noahsnail.com/2016/11/09/2016-11-9-Spring Boot 2.0.0参考手册_中文版_Part III_19-22/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tyan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SnailTyan">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Spring Boot 2.0.0参考手册_中文版_Part III_19-22</h1>
        

        <div class="post-meta">
          <span class="post-time">
            

            

            
          </span>

          

          
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv"><i class="fa fa-file-o"></i>
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>
            </span>
          

          

          
              <div class="post-description">
                  Spring Boot 2.0.0参考手册_中文版_Part III_19-22
              </div>
          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>文章作者：Tyan<br>博客：<a href="http://noahsnail.com">noahsnail.com</a> &nbsp;|&nbsp; <a href="http://blog.csdn.net/quincuntial" target="_blank" rel="external">CSDN</a> &nbsp;|&nbsp; <a href="http://www.jianshu.com/users/7731e83f3a4e/latest_articles" target="_blank" rel="external">简书</a></p>
<h2 id="19-运行你自己的应用"><a href="#19-运行你自己的应用" class="headerlink" title="19. 运行你自己的应用"></a>19. 运行你自己的应用</h2><p>将应用打包成jar并使用内嵌HTTP服务器的一个最大优势是你可以在任何地方运行你的程序。调试Spring Boot应用也很容易；你不必指定任何特定的IDE插件或扩展。</p>
<blockquote>
<p>这一节只包含基于jar的打包，如果你想选择将你的应用打包成war文件，你应该参考你的服务器和IDE文档。</p>
</blockquote>
<h3 id="19-1-从IDE运行"><a href="#19-1-从IDE运行" class="headerlink" title="19.1 从IDE运行"></a>19.1 从IDE运行</h3><p>你可以在你的IDE中运行一个Spring Boot应用将像运行一个简单的Java应用一样，然而，首先你需要导入你的工程。导入步骤根据你的IDE和构建系统会有所变化。大多数IDE可以直接导入Maven工程，例如Eclipse用户可以选择从<code>File</code>菜单选择<code>Import…​</code> → <code>Existing Maven Projects</code>。</p>
<p>如果你不能直接将工程导入你的IDE中，你可以使用构建插件生成一个IDE元数据。Maven中包含Eclipse和IDEA的插件；Gradle有各种IDEs的插件。</p>
<blockquote>
<p>如果你偶然的运行一个web应用两次，你会看到一个<code>Port already in use</code>错误。为了确保任何现有的实例被关闭，STS用户可以使用<code>Relaunch</code>按钮而不是<code>Run</code>按钮。</p>
</blockquote>
<h3 id="19-2-运行一个打包的应用"><a href="#19-2-运行一个打包的应用" class="headerlink" title="19.2 运行一个打包的应用"></a>19.2 运行一个打包的应用</h3><p>如果你使用Spring Boot的Maven或Gradle插件来创建一个可执行的jar包，你可以通过使用<code>java -jar</code>来运行你的应用。例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ java -jar target/myproject-0.0.1-SNAPSHOT.jar</div></pre></td></tr></table></figure>
<p>它也支持以远程调试模式运行一个打包的应用。这允许你在打包的应用中添加一个调试器：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ java -Xdebug -Xrunjdwp:server=y,transport=dt_socket,address=8000,suspend=n -jar target/myproject-0.0.1-SNAPSHOT.jar</div></pre></td></tr></table></figure>
<h3 id="19-3-使用Maven插件"><a href="#19-3-使用Maven插件" class="headerlink" title="19.3 使用Maven插件"></a>19.3 使用Maven插件</h3><p>Spring Boot Maven插件包含一个<code>run</code>目标，可以用来快速编译并运行你的应用。应用以exploded形式运行，就像在IDE中运行一样。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ mvn spring-boot:run</div></pre></td></tr></table></figure>
<p>你也可以使用有用的操作系统环境变量：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ export MAVEN_OPTS=-Xmx1024m -XX:MaxPermSize=128M</div></pre></td></tr></table></figure>
<h3 id="19-4-使用Gradle插件"><a href="#19-4-使用Gradle插件" class="headerlink" title="19.4 使用Gradle插件"></a>19.4 使用Gradle插件</h3><p>Spring Boot Gradle插件也包含一个<code>bootRun</code>任务，它可以以exploded方式运行你的应用。当你导入<code>spring-boot-gradle-plugin</code>时，可以添加<code>bootRun</code>任务：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ gradle bootRun</div></pre></td></tr></table></figure>
<p>你也可以使用有用的操作系统环境变量：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ export JAVA_OPTS=-Xmx1024m -XX:MaxPermSize=128M</div></pre></td></tr></table></figure>
<h3 id="19-5-热交换"><a href="#19-5-热交换" class="headerlink" title="19.5 热交换"></a>19.5 热交换</h3><p>由于Spring Boot应用只是普通的Java应用，JVM热交换应该是开箱即用的。JVM热交换可以替换的字节码有限制，一个更全面的解决方案是JRebel或Spring Loaded工程。<code>spring-boot-devtools</code>模块也支持快速的应用重启。</p>
<p>更多细节请看20章，下面的开发者工具部分和怎样热交换部分。</p>
<h2 id="20-开发者工具"><a href="#20-开发者工具" class="headerlink" title="20. 开发者工具"></a>20. 开发者工具</h2><p>Spring Boot包含额外的工具集合，可以使应用开发的过程更方便一点。<code>spring-boot-devtools</code>模块可以包含进任何工程，用来提供额外的程序调试特性。为了添加工具支持，简单的添加模块依赖到你的构建系统中：</p>
<p><strong>Maven.</strong> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;dependencies&gt;</div><div class="line">    &lt;dependency&gt;</div><div class="line">        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</div><div class="line">        &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;</div><div class="line">        &lt;optional&gt;true&lt;/optional&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line">&lt;/dependencies&gt;</div></pre></td></tr></table></figure>
<p><strong>Gradle.</strong> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">dependencies &#123;</div><div class="line">    compile(&quot;org.springframework.boot:spring-boot-devtools&quot;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>当运行一个完整的打包应用时，开发者工具会自动失效。如果你的应用是通过<code>java -jar</code>启动的，或者是通过一个特定的类加载器启动的，那它会被当做一个『产品级应用』。将依赖标记为<code>optional</code>是阻止开发工具间接应用到使用你应用的其它模块的最佳实践。Gradle不支持<code>optional</code>依赖开箱即用，同时你可能想看看<a href="https://github.com/spring-projects/gradle-plugins/tree/master/propdeps-plugin" target="_blank" rel="external">propdeps-plugin</a>。</p>
<p>再打包文件默认不包含开发者工具。如果你想使用某些远程开发者工具特性，你需要让<code>excludeDevtools</code>构建属性包含它。Maven和Gradle插件都支持这个属性。</p>
</blockquote>
<h3 id="20-2-自动重启"><a href="#20-2-自动重启" class="headerlink" title="20.2 自动重启"></a>20.2 自动重启</h3><p>当<code>classpath</code>中的文件修改时，使用<code>spring-boot-devtools</code>的应用会自动重启。当使用IDE开发时，这是一个很有用的功能，因为代码改变时它能快速的进行反馈。默认情况下，会监控<code>classpath</code>指向的文件夹中任何条目的变化。注意某些资源例如静态资源和视图模板不需要重启应用。</p>
<blockquote>
<p><strong>触发重启</strong></p>
<p>作为<code>DevTools</code>监视器<code>classpath</code>中的资源，触发重启的唯一方式是更新<code>classpath</code>。引起<code>classpath</code>更新的方式取决于你使用的IDE。在Eclipse中，保存一个修改的文件将引起<code>classpath</code>更新并触发重启事件。在IntelliJ IDEA中，构建工程(<code>Build → Make Project</code>)将会有同样的效果。</p>
</blockquote>
<p>&nbsp;</p>
<blockquote>
<p>只要启用了分支，你也可以通过支持的构建系统启动你的应用（例如，Maven和Gradle），因为<code>DevTools</code>需要一个独立的应用类加载器来进行正确操作。当Gradle和Maven在<code>classpath</code>中检测到<code>DevTools</code>时，它们默认的进行了那个工作。</p>
</blockquote>
<p>&nbsp;</p>
<blockquote>
<p>当使用<code>LiveReload</code>，自动重启能很好的工作。更多细节请看下面。如果你使用<code>JRebel</code>进行自动重启，将不支持动态的类重加载。其它的开发者工具功能（例如<code>LiveReload</code>和属性覆写）仍能继续使用。</p>
</blockquote>
<p>&nbsp;</p>
<blockquote>
<p><code>DevTools</code>依赖应用上下文关闭钩子来进行重启期间的关闭。如果你禁用了关闭钩子它将不能正确工作（<code>SpringApplication.setRegisterShutdownHook(false)</code>）。</p>
</blockquote>
<p>&nbsp;</p>
<blockquote>
<p>当决定<code>classpath</code>中输入引起的改变是否应该触发重启时，<code>DevTools</code>会自动忽略命名为<code>spring-boot</code>，<code>spring-boot-devtools</code>，<code>spring-boot-autoconfigure</code>，<code>spring-boot-actuator</code>和<code>spring-boot-starter</code>的工程。</p>
</blockquote>
<p>&nbsp;</p>
<blockquote>
<p><strong>重启与重载（重新加载）</strong></p>
<p>Spring Boot提供的重启技术是通过两个类加载器进行工作的。加载进基类加载器的类不能改变（例如，那些第三方jar包）。那些你正在开发的类加载进重启类加载器中。当应用重启时，丢弃旧的重启类加载器并创建一个新的。这种方法意味着应用重启时比『冷启动』更快，因为基类加载器已经存在并可用。</p>
<p>如果你发现你的应用重启不够快，或者你碰到了类加载问题，你可以考虑重载技术例如ZeroTurnaround的JRebel。这些工作通过加载时类的重写使它们更适合重载。Spring加载提供了另一种选择，但许多框架都不支持，也不支持商业化。</p>
</blockquote>
<h4 id="20-2-1-例外资源"><a href="#20-2-1-例外资源" class="headerlink" title="20.2.1 例外资源"></a>20.2.1 例外资源</h4><p>某些资源当它们改变时不一定需要触发重启。例如，Thymeleaf模板可以就地编辑。默认情况下，<code>/META-INF/maven</code>，<code>/META-INF/resources</code>，<code>/resources</code>，<code>/static</code>，<code>/public</code>或<code>/templates</code>中资源的改变不会触发重启，但会触发实时重载。如果你想定制这些例外项，你可以使用<code>spring.devtools.restart.exclude</code>属性。例如，仅排除<code>/static</code>和<code>/public</code>，设置如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">spring.devtools.restart.exclude=static/**,public/**</div></pre></td></tr></table></figure>
<blockquote>
<p>如果你想保持这些默认，添加额外的例外项，可以使用<code>spring.devtools.restart.additional-exclude</code>属性。</p>
</blockquote>
<h4 id="20-2-2-监控其它路径"><a href="#20-2-2-监控其它路径" class="headerlink" title="20.2.2 监控其它路径"></a>20.2.2 监控其它路径</h4><p>当你修改不在<code>classpath</code>中的文件时，你可能也想重启或重载你的应用。为了这样做，可以使用<code>spring.devtools.restart.additional-paths</code>属性来监控其它路径上的变化。你可以使用前面描述的<code>spring.devtools.restart.exclude</code>属性来控制其它路径上的变化是否会触发重启或仅触发实时重载。</p>
<h4 id="20-2-3-禁用重启"><a href="#20-2-3-禁用重启" class="headerlink" title="20.2.3 禁用重启"></a>20.2.3 禁用重启</h4><p>如果你想使用重启功能你可以通过<code>spring.devtools.restart.enabled</code>属性禁用它。大多数情况下你可以在你的<code>application.properties</code>中设置它（这仍会初始化重启类加载器但它不会监控文件的变化）。</p>
<p>如果你需要完整的禁用重启支持，例如，因为它不能与一个特定的库一起工作，你需要在调用<code>SpringApplication.run(…​)</code>之前设置一个<code>System</code>属性。例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">    System.setProperty(<span class="string">"spring.devtools.restart.enabled"</span>, <span class="string">"false"</span>);</div><div class="line">    SpringApplication.run(MyApp.class, args);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="20-2-4-使用触发器文件"><a href="#20-2-4-使用触发器文件" class="headerlink" title="20.2.4 使用触发器文件"></a>20.2.4 使用触发器文件</h4><p>如果你的IDE可以持续编译变化的文件，你可以只在特定的时间触发重启。为了实现这个功能你可以使用『触发器文件』，当你需要真正触发重启检查时，它是一个你必须要修改文件。修改这个文件只触发重启检查，只有<code>Devtools</code>检测到它必须要做些事情时，重启才会发生。触发器文件应该进行手动更新，或通过IDE插件更新。</p>
<p>为了使用触发器文件需要使用<code>spring.devtools.restart.trigger-file</code>属性。</p>
<blockquote>
<p>为了使你所有的工程都表现一样，你需要将<code>spring.devtools.restart.trigger-file</code>设置为全局设置。</p>
</blockquote>
<h4 id="20-2-5-定制重启类加载器"><a href="#20-2-5-定制重启类加载器" class="headerlink" title="20.2.5 定制重启类加载器"></a>20.2.5 定制重启类加载器</h4><p>像前面的的<code>Restart vs Reload</code>部分所讲的那样，重启功能是通过两个类加载器实现的。对于大多数应用来说这个方法能很好的工作，但是有时候它也会引起一些类加载问题。</p>
<p>默认情况下，IDE中的任何开放的工程都会使用“restart”类加载器进行加载，任何规范的<code>.jar</code>文件都会使用“base”类加载器进行加载。如果你在一个多模块工程中工作，不是每一个模块都导入到你的IDE中，你可能需要定制一些东西。为了实现这个功能你可以创建一个<code>META-INF/spring-devtools.properties</code>文件。</p>
<p><code>spring-devtools.properties</code>可以包含<code>restart.exclude.</code>和<code>restart.include.</code>前缀属性。<code>include</code>元素应该拉进“restart”类加载器中，<code>exclude</code>元素应该推入到“base”类加载器中。属性值是应用到<code>classpath</code>中的一个正则表达式。</p>
<p>例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">restart.exclude.companycommonlibs=/mycorp-common-[\\w-]+\.jar</div><div class="line">restart.include.projectcommon=/mycorp-myproj-[\\w-]+\.jar</div></pre></td></tr></table></figure>
<blockquote>
<p>所有属性的键必须是唯一的。只要<code>restart.include.</code>或<code>restart.exclude</code>作为一个属性启动，它就被应用。</p>
</blockquote>
<p>&nbsp;</p>
<blockquote>
<p><code>classpath</code>中的所有<code>META-INF/spring-devtools.properties</code>都会被加载。你可以将文件打包进你的工程中，或这个工程使用的库中。</p>
</blockquote>
<h4 id="20-2-6-已知的限制"><a href="#20-2-6-已知的限制" class="headerlink" title="20.2.6 已知的限制"></a>20.2.6 已知的限制</h4><p>当存在使用标准<code>ObjectInputStream</code>进行反序列化的对象时，重启功能不能很好的工作。如果你需要反序列化数据，你可能需要使用Spring的<code>ConfigurableObjectInputStream</code>和<code>Thread.currentThread().getContextClassLoader()</code>。</p>
<p>遗憾的是，一些第三方库反序列化时没有考虑上下文类加载器。如果你发现了这样的问题，你需要请求原作者进行修正。</p>
<h3 id="20-3-实时重载"><a href="#20-3-实时重载" class="headerlink" title="20.3 实时重载"></a>20.3 实时重载</h3><p><code>spring-boot-devtools</code>模块包含一个内嵌的实时重载服务器，当资源改变时可以用来触发浏览器重新刷新。实时重载浏览器扩展对于<a href="http://livereload.com/extensions/" target="_blank" rel="external">livereload.com</a>中的Chrome，Firefox和Safari而言是可用的。</p>
<p>当你的应用运行时，如果你不想启动实时重载服务器，你可以将<code>spring.devtools.livereload.enabled</code>属性设为<code>false</code>。</p>
<blockquote>
<p>一次你只可以运行一个实时重载服务器。在启动你的应用之前，确保没有其它的实时重载服务器在运行。如果你从你的IDE中启动多个应用，只有第一个应用有实时重载服务器支持。</p>
</blockquote>
<h3 id="20-4-全局设置"><a href="#20-4-全局设置" class="headerlink" title="20.4 全局设置"></a>20.4 全局设置</h3><p>通过添加一个名为<code>.spring-boot-devtools.properties</code>的文件到你的<code>$HOME</code>文件夹中（注意文件名以<code>.</code>开头），你可以配置全局开发者工具设置。任何添加到这个文件的属性都将应用到你机器上所有使用开发者工具的Spring Boot应用中。例如，为了配置重启时总是使用一个触发器文件，你需要添加如下内容：</p>
<p><strong>~/.spring-boot-devtools.properties.</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">spring.devtools.reload.trigger-file=.reloadtrigger</div></pre></td></tr></table></figure>
<h3 id="20-5-远程应用"><a href="#20-5-远程应用" class="headerlink" title="20.5 远程应用"></a>20.5 远程应用</h3><p>Spring Boot开发者工具是不受本地环境限制的，在运行远程应用时你也可以使用一些功能。远程支持是选择性加入的，为了使它起作用你需要确保<code>devtools</code>包含在再打包的文件中：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">excludeDevtools</span>&gt;</span>false<span class="tag">&lt;/<span class="name">excludeDevtools</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></div></pre></td></tr></table></figure>
<p>然后你需要设置<code>spring.devtools.remote.secret</code>属性，例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">spring.devtools.remote.secret=mysecret</div></pre></td></tr></table></figure>
<blockquote>
<p>使<code>spring-boot-devtools</code>在远程应用上起作用是有安全风险的。在产品部署时，你不应该让它支持<code>spring-boot-devtools</code>。</p>
</blockquote>
<p>远程<code>devtools</code>需要两部分提供支持：一个接收连接的服务器端，一个运行在IDE中的客户端应用。当设置<code>spring.devtools.remote.secret</code>属性时，服务器组件会自动起作用。客户端组件必须手动启动。</p>
<h4 id="20-5-1-运行远程客户端应用"><a href="#20-5-1-运行远程客户端应用" class="headerlink" title="20.5.1 运行远程客户端应用"></a>20.5.1 运行远程客户端应用</h4><p>远程客户端应用设计要在你的IDE中运行。你需要运行<code>org.springframework.boot.devtools.RemoteSpringApplication</code>，与要连接的远程工程要使用同样的classpath。传给应用的非可选参数应该是你要连接的远程URL。</p>
<p>例如，如果你在使用Eclipse或STS，你有一个名为<code>my-app</code>的工程，它已经部署到了云计算中，你需要按照下面的步骤去做：</p>
<ul>
<li><p>从<code>Run</code>菜单中选择<code>Run Configurations…​</code>。</p>
</li>
<li><p>创建一个新的<code>Java Application</code> “launch configuration”。</p>
</li>
<li><p>浏览<code>my-app</code>工程。</p>
</li>
<li><p>使用<code>org.springframework.boot.devtools.RemoteSpringApplication</code>作为主类。</p>
</li>
<li><p>添加<code>https://myapp.cfapps.io</code>到<code>Program arguments</code>(或无论你的远程URL是什么)。</p>
</li>
</ul>
<blockquote>
<p>因为远程客户端与真实的应用使用的<code>classpath</code>相同，因此它可以直接读取应用属性。这就是<code>spring.devtools.remote.secret</code>属性是怎样读取并传递给服务器进行授权的。</p>
</blockquote>
<p>&nbsp;</p>
<blockquote>
<p>为了传输可以加密，密码不能被解析，建议总是使用<code>https://</code>作为连接协议。</p>
</blockquote>
<p>&nbsp;</p>
<blockquote>
<p>如果你需要使用代理访问远程应用，配置<code>spring.devtools.remote.proxy.host</code>和<code>spring.devtools.remote.proxy.port</code>属性。</p>
</blockquote>
<h4 id="20-5-2-远程更新"><a href="#20-5-2-远程更新" class="headerlink" title="20.5.2 远程更新"></a>20.5.2 远程更新</h4><p>远程客户端会像本地重启那样监控你应用的<code>classpath</code>的变化。任何资源的更新都会推送到远程应用并（如果需要的话）触发重启。如果你在迭代一个本地没有的使用云服务的功能，它是非常有帮助的。通常更新和重启比整个重新构建部署更快。</p>
<blockquote>
<p>当远程客户端运行时只监控文件。如果在启动远程客户端之前你修改了文件，它将不会推送到远程服务器。</p>
</blockquote>
<h4 id="20-5-3-远程调试通道"><a href="#20-5-3-远程调试通道" class="headerlink" title="20.5.3 远程调试通道"></a>20.5.3 远程调试通道</h4><p>当在远程应用上分析问题时，Java远程调试是非常有用的。遗憾的是，当你的应用部署离开你的数据中心时，远程调试并不总是能用的。如果你正在使用一个基于容器的技术例如Docker，要设置远程调试也是非常棘手的。</p>
<p>为了帮助解决这些限制，<code>devtools</code>支持在HTTP协议上的远程调试通道。远程客户端提供一个端口为<code>8000</code>的本地服务器，你可以在这上面添加一个远程调试器。一旦建立了连接，调试通道将会在HTTP上发送到远程应用上。如果你想使用一个不同的端口，你可以使用<code>spring.devtools.remote.debug.local-port</code>属性。</p>
<p>你需要确保你的远程应用启动了并且远程调试可用。这经常可以通过配置<code>JAVA_OPTS</code>来完成。例如，在云计算平台你可以添加下面的内容到你的<code>manifest.yml</code>中：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">---</div><div class="line">  env:</div><div class="line">    JAVA_OPTS: &quot;-Xdebug -Xrunjdwp:server=y,transport=dt_socket,suspend=n&quot;</div></pre></td></tr></table></figure>
<blockquote>
<p>注意你不必向<code>-Xrunjdwp</code>传递<code>address=NNNN</code>选择。如果被忽略Java将会简单的选择一个随机自由的端口。</p>
</blockquote>
<p>&nbsp;</p>
<blockquote>
<p>在网上调试一个远程服务可能是非常慢的，你可能需要在你的IDE中添加<code>timeouts</code>。例如，在Eclipse中你可以从<code>Preferences…​</code>选择<code>Java → Debug</code>，并将<code>Debugger timeout (ms)</code>改成更合适的值（<code>60000</code>在大多数情况下都能很好工作）。</p>
</blockquote>
<h2 id="21-将你的应用打包成产品"><a href="#21-将你的应用打包成产品" class="headerlink" title="21. 将你的应用打包成产品"></a>21. 将你的应用打包成产品</h2><p>可执行<code>jars</code>可以用来进行产品部署。当它们是自包含时，理想情况下它们也是适合云部署的。</p>
<p>对于其它的“production ready”功能，例如健康，审计和度量REST或JMX端点；考虑添加<code>spring-boot-actuator</code>。更多细节请看第五部分，“Spring Boot Actuator: Production-ready features”。</p>
<h2 id="22-接下来读什么"><a href="#22-接下来读什么" class="headerlink" title="22. 接下来读什么"></a>22. 接下来读什么</h2><p>现在你应该对怎么使用Spring Boot以及应该循序的一些最佳实践有了很好的理解。你可以继续学习关于Spring Boot的一些深度功能，或者你可以跳过前面，直接阅读Spring Boot “production ready”方面的内容。</p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        
  <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
    <div>坚持技术分享，如果觉得有收获就打赏吧！</div>
    <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
      <span>赏</span>
    </button>
    <div id="QR" style="display: none;">
      
        <div id="wechat" style="display: inline-block">
          <img id="wechat_qr" src="http://ocs628urt.bkt.clouddn.com/weixin_pay_meitu_2.jpg" alt="Tyan WeChat Pay"/>
          <p>微信打赏</p>
        </div>
      
      
        <div id="alipay" style="display: inline-block">
          <img id="alipay_qr" src="http://ocs628urt.bkt.clouddn.com/ali_pay_meitu_1.jpg" alt="Tyan Alipay"/>
          <p>支付宝打赏</p>
        </div>
      
    </div>
  </div>


      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Spring-Boot/" rel="tag"># Spring Boot</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/11/07/2016-11-7-exploded war VS war二者的区别/" rel="next" title="exploded war VS war二者的区别">
                <i class="fa fa-chevron-left"></i> exploded war VS war二者的区别
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/11/09/2016-11-9-Spring Boot 2.0.0参考手册_中英文对照_Part III_19-22/" rel="prev" title="Spring Boot 2.0.0参考手册_中英文对照_Part III_19-22">
                Spring Boot 2.0.0参考手册_中英文对照_Part III_19-22 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="Tyan" />
          <p class="site-author-name" itemprop="name">Tyan</p>
           
              <p class="site-description motion-element" itemprop="description">工作中的技术总结</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">266</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">21</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">33</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#19-运行你自己的应用"><span class="nav-number">1.</span> <span class="nav-text">19. 运行你自己的应用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#19-1-从IDE运行"><span class="nav-number">1.1.</span> <span class="nav-text">19.1 从IDE运行</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#19-2-运行一个打包的应用"><span class="nav-number">1.2.</span> <span class="nav-text">19.2 运行一个打包的应用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#19-3-使用Maven插件"><span class="nav-number">1.3.</span> <span class="nav-text">19.3 使用Maven插件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#19-4-使用Gradle插件"><span class="nav-number">1.4.</span> <span class="nav-text">19.4 使用Gradle插件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#19-5-热交换"><span class="nav-number">1.5.</span> <span class="nav-text">19.5 热交换</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#20-开发者工具"><span class="nav-number">2.</span> <span class="nav-text">20. 开发者工具</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#20-2-自动重启"><span class="nav-number">2.1.</span> <span class="nav-text">20.2 自动重启</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#20-2-1-例外资源"><span class="nav-number">2.1.1.</span> <span class="nav-text">20.2.1 例外资源</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#20-2-2-监控其它路径"><span class="nav-number">2.1.2.</span> <span class="nav-text">20.2.2 监控其它路径</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#20-2-3-禁用重启"><span class="nav-number">2.1.3.</span> <span class="nav-text">20.2.3 禁用重启</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#20-2-4-使用触发器文件"><span class="nav-number">2.1.4.</span> <span class="nav-text">20.2.4 使用触发器文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#20-2-5-定制重启类加载器"><span class="nav-number">2.1.5.</span> <span class="nav-text">20.2.5 定制重启类加载器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#20-2-6-已知的限制"><span class="nav-number">2.1.6.</span> <span class="nav-text">20.2.6 已知的限制</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#20-3-实时重载"><span class="nav-number">2.2.</span> <span class="nav-text">20.3 实时重载</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#20-4-全局设置"><span class="nav-number">2.3.</span> <span class="nav-text">20.4 全局设置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#20-5-远程应用"><span class="nav-number">2.4.</span> <span class="nav-text">20.5 远程应用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#20-5-1-运行远程客户端应用"><span class="nav-number">2.4.1.</span> <span class="nav-text">20.5.1 运行远程客户端应用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#20-5-2-远程更新"><span class="nav-number">2.4.2.</span> <span class="nav-text">20.5.2 远程更新</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#20-5-3-远程调试通道"><span class="nav-number">2.4.3.</span> <span class="nav-text">20.5.3 远程调试通道</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#21-将你的应用打包成产品"><span class="nav-number">3.</span> <span class="nav-text">21. 将你的应用打包成产品</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#22-接下来读什么"><span class="nav-number">4.</span> <span class="nav-text">22. 接下来读什么</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2016 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Tyan</span>
</div>



        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>


        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  


  




	





  





  






  





  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>
