<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Spring Boot," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="Spring Boot参考文档">
<meta property="og:type" content="article">
<meta property="og:title" content="Spring Boot 2.0.0参考手册_中文版_持续更新">
<meta property="og:url" content="noahsnail.com/2016/10/08/2016-10-8-Spring Boot 2.0.0参考手册_中文版/index.html">
<meta property="og:site_name" content="SnailTyan">
<meta property="og:description" content="Spring Boot参考文档">
<meta property="og:updated_time" content="2017-01-09T12:59:29.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Spring Boot 2.0.0参考手册_中文版_持续更新">
<meta name="twitter:description" content="Spring Boot参考文档">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: "",
      labels: ""
    }
  };
</script>



  <link rel="canonical" href="noahsnail.com/2016/10/08/2016-10-8-Spring Boot 2.0.0参考手册_中文版/"/>





  <title> Spring Boot 2.0.0参考手册_中文版_持续更新 | SnailTyan </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-83591315-1', 'auto');
  ga('send', 'pageview');
</script>









  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">SnailTyan</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="noahsnail.com/2016/10/08/2016-10-8-Spring Boot 2.0.0参考手册_中文版/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Tyan">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="SnailTyan">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="SnailTyan" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Spring Boot 2.0.0参考手册_中文版_持续更新
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-10-08T20:57:49+08:00">
              2016-10-08
            </time>

            &nbsp;|&nbsp;

            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-check-o"></i>
            </span>
            <time title="Post modified" itemprop="dateModified" datetime="2017-01-09T20:59:29+08:00">
              2017-01-09
            </time>
            
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Spring-Boot-2-0-0/" itemprop="url" rel="index">
                    <span itemprop="name">Spring Boot 2.0.0</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/10/08/2016-10-8-Spring Boot 2.0.0参考手册_中文版/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/10/08/2016-10-8-Spring Boot 2.0.0参考手册_中文版/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          
              &nbsp; | &nbsp;
              <span class="page-pv"><i class="fa fa-file-o"></i>
              <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>
              </span>
          
          
          
              <div class="post-description">
                  Spring Boot参考文档
              </div>
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>文章作者：Tyan<br>博客：<a href="http://noahsnail.com">noahsnail.com</a> &nbsp;|&nbsp; <a href="http://blog.csdn.net/quincuntial" target="_blank" rel="external">CSDN</a> &nbsp;|&nbsp; <a href="http://www.jianshu.com/users/7731e83f3a4e/latest_articles" target="_blank" rel="external">简书</a></p>
<h1 id="第一部分：Spring-Boot文档"><a href="#第一部分：Spring-Boot文档" class="headerlink" title="第一部分：Spring Boot文档"></a>第一部分：Spring Boot文档</h1><h2 id="1-关于文档"><a href="#1-关于文档" class="headerlink" title="1. 关于文档"></a>1. 关于文档</h2><p>Sring参考文档可以通过<a href="http://docs.spring.io/spring-boot/docs/2.0.0.BUILD-SNAPSHOT/reference/html" target="_blank" rel="external">html</a>，<a href="http://docs.spring.io/spring-boot/docs/2.0.0.BUILD-SNAPSHOT/reference/pdf/spring-boot-reference.pdf" target="_blank" rel="external">pdf</a>和<a href="http://docs.spring.io/spring-boot/docs/2.0.0.BUILD-SNAPSHOT/reference/epub/spring-boot-reference.epub" target="_blank" rel="external">epub</a> 三种形式得到。最新的文档可以从<a href="http://docs.spring.io/spring-boot/docs/current/reference" target="_blank" rel="external">docs.spring.io/spring-boot/docs/current/reference</a>上得到。</p>
<p>本文档无论是电子版还是打印版，只要你不收取任何费用且在每个副本中包含了版权声明，你就可以自由使用本文档的副本或分发给其它人。</p>
<h2 id="2-获得帮助"><a href="#2-获得帮助" class="headerlink" title="2. 获得帮助"></a>2. 获得帮助</h2><p>如果在使用Spring Boot中有不会的地方，我们很乐意帮忙！</p>
<ul>
<li><p>尝试How-to’s（文档第九部分），里面有最常见问题的解决方案。</p>
</li>
<li><p>学习Spring基础知识——Spring Boot建立在许多其它的Spring工程之上，查看<a href="spring.io">spring.io</a>网站，上面有大量的参考文档。如果你刚开始使用Spring，尝试看这些指南中的一个。</p>
</li>
<li><p>问问题——我们监控着<a href="stackoverflow.com">stackoverflow.com</a>中标签为<code>spring-boot</code>的问题。</p>
</li>
<li><p>报告Spring Boot中的bugs请到<a href="github.com/spring-projects/spring-boot/issues">github.com/spring-projects/spring-boot/issues</a>。</p>
</li>
</ul>
<blockquote>
<p>Spring Boot是开源的，包括文档！如果你在文档中发现了问题；或你想改进它们，请参与进去。</p>
</blockquote>
<h2 id="3-第一步"><a href="#3-第一步" class="headerlink" title="3. 第一步"></a>3. 第一步</h2><p>如果你准备开始学习Spring Boot或通常来说的Spring，从这里开始！</p>
<ul>
<li><p>从零开始： 概述 | 要求 | 安装</p>
</li>
<li><p>学习指南： 第一部分 | 第二部分</p>
</li>
<li><p>运行例子： 第一部分 | 第二部分</p>
</li>
</ul>
<h2 id="4-使用Spring-Boot"><a href="#4-使用Spring-Boot" class="headerlink" title="4. 使用Spring Boot"></a>4. 使用Spring Boot</h2><p>准备好开始使用Spring Boot了？不用担心。</p>
<ul>
<li><p>构建系统：Maven | Gradle | Ant | Starters</p>
</li>
<li><p>最佳实践：Code Structure | @Configuration | @EnableAutoConfiguration | Beans and Dependency Injection</p>
</li>
<li><p>运行代码：IDE | Packaged | Maven | Gradle</p>
</li>
<li><p>打包应用：Production jars</p>
</li>
<li><p>Spring Boot命令行：Using the CLI</p>
</li>
</ul>
<h2 id="5-了解Spring-Boot特性"><a href="#5-了解Spring-Boot特性" class="headerlink" title="5. 了解Spring Boot特性"></a>5. 了解Spring Boot特性</h2><p>需要更多关于Spring Boot核心特性的细节？看下面。</p>
<ul>
<li><p>核心特性：SpringApplication | External Configuration | Profiles | Logging</p>
</li>
<li><p>Web应用：MVC | Embedded Containers</p>
</li>
<li><p>消息：Overview | JMS</p>
</li>
<li><p>测试：Overview | Boot Applications | Utils</p>
</li>
<li><p>扩展：Auto-configuration | @Conditions</p>
</li>
</ul>
<h2 id="6-变为产品"><a href="#6-变为产品" class="headerlink" title="6. 变为产品"></a>6. 变为产品</h2><p>当你准备将你的Spring Boot应用变成产品时，给你推荐一些你可能喜欢的小技巧。</p>
<ul>
<li><p>管理端点：Overview | Customization</p>
</li>
<li><p>链接选择：HTTP | JMX | SSH</p>
</li>
<li><p>监控：Metrics | Auditing | Tracing | Process</p>
</li>
</ul>
<h2 id="7-高级课题"><a href="#7-高级课题" class="headerlink" title="7. 高级课题"></a>7. 高级课题</h2><p>最后，我们有一些课题给高级用户。</p>
<ul>
<li><p>部署Spring Boot应用：Cloud Deployment | OS Service</p>
</li>
<li><p>构建工具插件：Maven | Gradle</p>
</li>
<li><p>附录：Application Properties | Auto-configuration classes | Executable Jars</p>
</li>
</ul>
<h1 id="Part-II-开始"><a href="#Part-II-开始" class="headerlink" title="Part II 开始"></a>Part II 开始</h1><p>如果你刚开始学习Spring Boot或通常所说的Spring，这部分就是为你准备的！这部分中我们回答了基本的”what？”，”how”，”why?”问题，并在安装说明中介绍Spring Boot。我们将构建第一个Spring Boot应用，讨论一些我们遵循的核心原则。</p>
<h2 id="8-Spring-Boot介绍"><a href="#8-Spring-Boot介绍" class="headerlink" title="8. Spring Boot介绍"></a>8. Spring Boot介绍</h2><p>Spring Boot 使创建独立的、产品级的、基于Spring的应用变得更容易，你只需要运行<code>run</code>即可。我们采用不变的Spring平台和第三方库，因此你可以几乎无差别的使用Spring Boot。大多数Spring Boot应用只需要很少的Spring配置。</p>
<p>你可以使用Spring Boot创建Java应用，用<code>java-jar</code>或更传统的war包来部署应用。我们也提供了运行”Spring脚本”的命令行工具。</p>
<p>我们的主要目标是：</p>
<ul>
<li><p>为所有Spring开发者提供一个从根本上更迅速可用的入门经验。</p>
</li>
<li><p>坚持开箱即用，当默认设置不满足需求时可以快速避免默认设置。</p>
</li>
<li><p>为具有许多类的工程提供一系列常用的非功能特性（例如嵌入式服务器、安全、度量、健康检查、外部配置）。</p>
</li>
<li><p>绝对没有XML配置代码产生和XML配置需求。</p>
</li>
</ul>
<h2 id="9-系统需求"><a href="#9-系统需求" class="headerlink" title="9. 系统需求"></a>9. 系统需求</h2><p>By default, Spring Boot 2.0.0.BUILD-SNAPSHOT requires Java 7 and Spring Framework 5.0.0.BUILD-SNAPSHOT or above. You can use Spring Boot with Java 6 with some additional configuration. See Section 80.11, “How to use Java 6” for more details. Explicit build support is provided for Maven (3.2+) and Gradle (1.12 or 2.x). Gradle 3 is not supported.</p>
<p>默认情况下，Spring Boot 2.0.0.BUILD-SNAPSHOT需要Java 7和Spring Framework 5.0.0.BUILD-SNAPSHOT及以上。你可以通过一些额外配置在Java 6下使用Spring Boot。更多细节请看80.11小节，”怎样使用Java 6”。明确的构建支持有Maven (3.2+)和Gradle (1.12 or 2.x)，不支持Gradle 3。</p>
<blockquote>
<p>Although you can use Spring Boot with Java 6 or 7, we generally recommend Java 8 if at all possible.</p>
</blockquote>
<p>&nbsp;</p>
<blockquote>
<p>虽然你可以在Java 6或Java 7下使用Spring Boot，但我们建议尽可能的使用Java 8。</p>
</blockquote>
<h3 id="9-1-Servlet容器"><a href="#9-1-Servlet容器" class="headerlink" title="9.1 Servlet容器"></a>9.1 Servlet容器</h3><p>下面的嵌入式<code>servlet</code>容器支持开箱即用：</p>
<table>
<thead>
<tr>
<th style="text-align:left">Name</th>
<th style="text-align:left">Servlet Version</th>
<th style="text-align:left">Java Version</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Tomcat 8</td>
<td style="text-align:left">3.1</td>
<td style="text-align:left">Java 7+</td>
</tr>
<tr>
<td style="text-align:left">Tomcat 7</td>
<td style="text-align:left">3.0</td>
<td style="text-align:left">Java 6+</td>
</tr>
<tr>
<td style="text-align:left">Jetty 9.3</td>
<td style="text-align:left">3.1</td>
<td style="text-align:left">Java 8+</td>
</tr>
<tr>
<td style="text-align:left">Jetty 9.2</td>
<td style="text-align:left">3.1</td>
<td style="text-align:left">Java 7+</td>
</tr>
<tr>
<td style="text-align:left">Jetty 8</td>
<td style="text-align:left">3.0</td>
<td style="text-align:left">Java 6+</td>
</tr>
<tr>
<td style="text-align:left">Undertow 1.3</td>
<td style="text-align:left">3.1</td>
<td style="text-align:left">Java 7+</td>
</tr>
</tbody>
</table>
<p>你也可以部署Spring Boot应用到任何兼容Servlet 3.0+的容器。</p>
<h2 id="10-安装Spring-Boot"><a href="#10-安装Spring-Boot" class="headerlink" title="10. 安装Spring Boot"></a>10. 安装Spring Boot</h2><p>Spring Boot可以和”经典”的Java开发工具一起使用，也可作为一个命令行工具来进行安装。不管你是需要Java SDK v.16还是更高版本，在开始之前你应该检查你当前安装的Java版本。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ java -version</div></pre></td></tr></table></figure>
<p>如果你是Java开发的新手，或你只想尝试Spring Boot，你可能首先想试一下Spring Boot CLI，否则，请读”经典”的安装说明。</p>
<blockquote>
<p>虽然Spring Boot兼容Java 1.6，但可能的话，你应该考虑使用Java的最新版本。</p>
</blockquote>
<h3 id="10-1-Java开发者的安装说明"><a href="#10-1-Java开发者的安装说明" class="headerlink" title="10.1 Java开发者的安装说明"></a>10.1 Java开发者的安装说明</h3><p>你可以使用Spring Boot像使用任何标准Java库一样。简单的在你的<code>classpath</code>中包含恰当<code>spring-boot-*.jar</code>即可。Spring Boot不需要任何特定的工具集成，因此你可以使用任何IDE或文本编辑器；Spring Boot应用没有什么特别的，你可以像其它的Java程序一样来运行和调试。</p>
<p>尽管你可以只拷贝Spring Boot的jars，但通常我们建议你使用一个支持依赖管理的构建工具（例如Maven或Gradle）。</p>
<h4 id="10-1-1-Maven安装"><a href="#10-1-1-Maven安装" class="headerlink" title="10.1.1 Maven安装"></a>10.1.1 Maven安装</h4><p>Spring Boot兼容Apache Maven 3.2或以上。如果你没有安装Maven，你可以根据<a href="maven.apache.org">maven.apache.org</a>的说明来安装。</p>
<blockquote>
<p>在许多操作系统上Maven都能通过包管理器来安装。如果你是一个OSX Homebrew用户可以通过<code>brew install maven</code>安装。Ubuntu用户可以通过<code>sudo apt-get install maven</code>安装。</p>
</blockquote>
<p>Spring Boot依赖使用<code>org.springframework.boot</code> <code>groupId</code>。通常你的Maven POM文件将继承<code>spring-boot-starter-parent</code>工程并声明一个或多个“Starters”依赖。Spring Boot也提供一个可选的Maven插件来创建可执行的jar包。</p>
<p>下面是一个典型的<code>pom.xml</code>文件：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></div><div class="line">    <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>myproject<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="comment">&lt;!-- Inherit defaults from Spring Boot --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.0.BUILD-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="comment">&lt;!-- Add typical dependencies for a web application --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="comment">&lt;!-- Package as an executable jar --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="comment">&lt;!-- Add Spring repositories --&gt;</span></div><div class="line">    <span class="comment">&lt;!-- (you don't need this if you are using a .RELEASE version) --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">repositories</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">repository</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>spring-snapshots<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://repo.spring.io/snapshot<span class="tag">&lt;/<span class="name">url</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span><span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span><span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">repository</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>spring-milestones<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://repo.spring.io/milestone<span class="tag">&lt;/<span class="name">url</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">pluginRepositories</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">pluginRepository</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>spring-snapshots<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://repo.spring.io/snapshot<span class="tag">&lt;/<span class="name">url</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">pluginRepository</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">pluginRepository</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>spring-milestones<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://repo.spring.io/milestone<span class="tag">&lt;/<span class="name">url</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">pluginRepository</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">pluginRepositories</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p><code>spring-boot-starter-parent</code>是使用Spring Boot的一种极好的方式，但它可能不是一直都合适的。有时你可能需要继承一个不同的父POM，或者你可能不喜欢我们的默认设置。请看13.2.2小节，『没有父POM的情况下使用Spring Boot』是一种可替代的解决方案，它使用了<code>import</code>作用域。</p>
</blockquote>
<h4 id="10-1-2-Gradle安装"><a href="#10-1-2-Gradle安装" class="headerlink" title="10.1.2 Gradle安装"></a>10.1.2 Gradle安装</h4><p>Spring Boot兼容Gradle 1.12或2.x。推荐使用2.14.1。不支持Gradle 3。如果你没有安装Gradle，你可以根据<a href="www.gradle.org/">www.gradle.org/</a>的介绍来安装。</p>
<p>Spring Boot依赖使用<code>org.springframework.boot</code> <code>groupId</code>。通常你的工程会声明一个或多个“Starters”依赖。Spring Boot提供了一个有用的Gradle插件用来简化依赖声明并创建可执行的jar包。</p>
<p><strong>Gradle Wrapper</strong></p>
<p>当你需要构建一个工程时，Gradle Wrapper提供了一种很好的方式来『获得』Gradle。它是一小段脚本和库，并随着你的代码一起提交来引导构建过程。更多细节请看<a href="https://docs.gradle.org/2.14.1/userguide/gradle_wrapper.html" target="_blank" rel="external">https://docs.gradle.org/2.14.1/userguide/gradle_wrapper.html</a>。</p>
<h3 id="10-2-安装Spring-Boot-CLI"><a href="#10-2-安装Spring-Boot-CLI" class="headerlink" title="10.2 安装Spring Boot CLI"></a>10.2 安装Spring Boot CLI</h3><p>Spring Boot CLI是一个命令行工具，可以用来快速搭建基于Spring的原型。它允许你运行<a href="http://www.groovy-lang.org/" target="_blank" rel="external">Groovy</a>脚本，这意味着你有一个熟悉的类Java语法，没有很多的样本代码。</p>
<p>你不需要使用CLI来使用Spring Boot但它是开始得到一个基于Spring应用的最快方式。</p>
<h4 id="10-2-1-手动安装"><a href="#10-2-1-手动安装" class="headerlink" title="10.2.1 手动安装"></a>10.2.1 手动安装</h4><p>你可以从Spring软件仓库下载Spring CLI发行版：</p>
<ul>
<li><a href="http://repo.spring.io/snapshot/org/springframework/boot/spring-boot-cli/2.0.0.BUILD-SNAPSHOT/spring-boot-cli-2.0.0.BUILD-SNAPSHOT-bin.zip" target="_blank" rel="external">spring-boot-cli-2.0.0.BUILD-SNAPSHOT-bin.zip</a></li>
<li><a href="http://repo.spring.io/snapshot/org/springframework/boot/spring-boot-cli/2.0.0.BUILD-SNAPSHOT/spring-boot-cli-2.0.0.BUILD-SNAPSHOT-bin.tar.gz" target="_blank" rel="external">spring-boot-cli-2.0.0.BUILD-SNAPSHOT-bin.tar.gz</a></li>
</ul>
<p>最新的<a href="http://repo.spring.io/snapshot/org/springframework/boot/spring-boot-cli/" target="_blank" rel="external">snapshot distributions</a>也是可获得的。</p>
<p>一旦下载完成，按照存档<a href="https://raw.githubusercontent.com/spring-projects/spring-boot/master/spring-boot-cli/src/main/content/INSTALL.txt" target="_blank" rel="external">INSTALL.txt</a>中的 介绍来安装。总结：<code>bin/</code>目录的<code>.zip</code>文件中有一个<code>spring</code>脚本（Windows中是<code>spring.bat</code>），或者你可以使用<code>java -jar</code>运行<code>.jar</code>文件（这个脚本帮你确保正确设置classpath）。</p>
<h4 id="10-2-2-使用SDKMAN-安装"><a href="#10-2-2-使用SDKMAN-安装" class="headerlink" title="10.2.2 使用SDKMAN!安装"></a>10.2.2 使用SDKMAN!安装</h4><p>SDKMAN! (The Software Development Kit Manager)能用来管理各种二进制SDKs的多个版本，包括Groovy和Spring Boot CLI。从<a href="sdkman.io">sdkman.io</a>中得到SDKMAN!并安装Spring Boot：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ sdk install springboot</div><div class="line">$ spring --version</div><div class="line">Spring Boot v2.0.0.BUILD-SNAPSHOT</div></pre></td></tr></table></figure>
<p>如果你在为CLI开发功能并向很容易的访问你够简单版本，按照这些额外的介绍去做。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ sdk install springboot dev /path/to/spring-boot/spring-boot-cli/target/spring-boot-cli-2.0.0.BUILD-SNAPSHOT-bin/spring-2.0.0.BUILD-SNAPSHOT/</div><div class="line">$ sdk default springboot dev</div><div class="line">$ spring --version</div><div class="line">Spring CLI v2.0.0.BUILD-SNAPSHOT</div></pre></td></tr></table></figure>
<p>这将会安装一个名为<code>dev</code>的本地<code>spring</code>实例。它指向你的目标构建位置，因此你每次重新构建Spring Boot，<code>spring</code>将是最新的。</p>
<p>按下面去做你会看到：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">$ sdk ls springboot</div><div class="line"></div><div class="line">================================================================================</div><div class="line">Available Springboot Versions</div><div class="line">================================================================================</div><div class="line">&gt; + dev</div><div class="line">* 2.0.0.BUILD-SNAPSHOT</div><div class="line"></div><div class="line">================================================================================</div><div class="line">+ - <span class="built_in">local</span> version</div><div class="line">* - installed</div><div class="line">&gt; - currently <span class="keyword">in</span> use</div><div class="line">================================================================================</div></pre></td></tr></table></figure>
<h4 id="10-2-3-OSX-Homebrew安装"><a href="#10-2-3-OSX-Homebrew安装" class="headerlink" title="10.2.3 OSX Homebrew安装"></a>10.2.3 OSX Homebrew安装</h4><p>如果你在Mac上使用<a href="http://brew.sh/" target="_blank" rel="external">Homebrew</a>，安装Spring Boot CLI所有你需要做的是：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ brew tap pivotal/tap</div><div class="line">$ brew install springboot</div></pre></td></tr></table></figure>
<p>Homebrew会在<code>/usr/local/bin</code>目录安装<code>spring</code>。</p>
<blockquote>
<p>如果你没有看到公式，你安装的brew可能过时了。执行<code>brew update</code>并重新再试一次。</p>
</blockquote>
<h4 id="10-2-4-MacPorts安装"><a href="#10-2-4-MacPorts安装" class="headerlink" title="10.2.4 MacPorts安装"></a>10.2.4 MacPorts安装</h4><p>如果你在Mac上使用<a href="http://www.macports.org/" target="_blank" rel="external">MacPorts</a>，安装Spring Boot CLI所有你需要做的是：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo port install spring-boot-cli</div></pre></td></tr></table></figure>
<h4 id="10-2-5-命令行实现"><a href="#10-2-5-命令行实现" class="headerlink" title="10.2.5 命令行实现"></a>10.2.5 命令行实现</h4><p>Spring Boot CLI附带的脚本为<a href="https://en.wikipedia.org/wiki/Bash_%28Unix_shell%29" target="_blank" rel="external">BASH</a>和<a href="https://en.wikipedia.org/wiki/Zsh" target="_blank" rel="external">zsh</a> shells提供了命令行实现。你可以在任何shell中<code>source</code>脚本（也称为<code>spring</code>），或将它放在用户或系统范围内的bash完成初始化。在Debian系统中系统范围内的脚本是在<code>/shell-completion/bash</code>目录中，当新shell启动时，目录下的所有脚本都被执行。如果你装了SDKMAN!，为了手动运行脚本，执行下面的命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ . ~/.sdkman/candidates/springboot/current/shell-completion/bash/spring</div><div class="line">$ spring &lt;HIT TAB HERE&gt;</div><div class="line">  grab  <span class="built_in">help</span>  jar  run  <span class="built_in">test</span>  version</div></pre></td></tr></table></figure>
<blockquote>
<p>如果你想使用Homebrew或MacPorts安装Spring Boot CLI，命令行完成脚本会自动在shell中注册。</p>
</blockquote>
<h4 id="10-2-6-快速Spring-CLI例子"><a href="#10-2-6-快速Spring-CLI例子" class="headerlink" title="10.2.6 快速Spring CLI例子"></a>10.2.6 快速Spring CLI例子</h4><p>这儿有一个真实的简单的web应用，你可以用来测试你的安装。创建一个文件叫<code>app.groovy</code>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">@RestController</div><div class="line">class ThisWillActuallyRun &#123;</div><div class="line"></div><div class="line">    @RequestMapping(&quot;/&quot;)</div><div class="line">    String home() &#123;</div><div class="line">        &quot;Hello World!&quot;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这儿有一个真实的简单的web应用，你可以用来测试你的安装。创建一个文件叫<code>app.groovy</code>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">@RestController</div><div class="line">class ThisWillActuallyRun &#123;</div><div class="line"></div><div class="line">    @RequestMapping(&quot;/&quot;)</div><div class="line">    String home() &#123;</div><div class="line">        &quot;Hello World!&quot;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>当你第一次运行应用时它需要一段时间，因为要下载依赖。接下来运行会更快。</p>
</blockquote>
<p>在你最喜欢的浏览器中输入localhost:8080，你应该会看到下面的结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Hello World!</div></pre></td></tr></table></figure>
<h3 id="10-3-从早期的Spring-Boot升级"><a href="#10-3-从早期的Spring-Boot升级" class="headerlink" title="10.3 从早期的Spring Boot升级"></a>10.3 从早期的Spring Boot升级</h3><p>如果正在升级你的Spring Boot，检查<a href="https://github.com/spring-projects/spring-boot/wiki" target="_blank" rel="external">project wiki</a>中的『发布说明』。你将找到升级说明，说明中有每一次发布的特性列表。</p>
<p>为了升级现有的CLI，要使用合适的包管理命令（例如<code>brew upgrade</code>），如果你手动安装的CLI，要按照标准的说明去做，为了移除旧的引用要记住更新你的PATH环境变量。</p>
<h2 id="11-开发你的第一个Spring-Boot应用"><a href="#11-开发你的第一个Spring-Boot应用" class="headerlink" title="11. 开发你的第一个Spring Boot应用"></a>11. 开发你的第一个Spring Boot应用</h2><p>我们用Java开发一个简单的Web应用“Hello World!”，通过应用来强调Spring Boot的一些关键特性。由于大多数IDE都支持Maven，因此我们用Maven来构建这个项目。</p>
<blockquote>
<p><a href="spring.io">spring.io</a>网站上有许多使用Spring Boot的“Getting Started”指南。如果你要解决一个特定的问题；先去网站上看一下。</p>
<p>你可以通过到<a href="start.spring.io">start.spring.io</a>上并从依赖搜索器中选择<code>web</code>启动器来简化下面的步骤。这会自动的产生一个新的工程结构所以你能以正确的方式开始编码。更多细节请看文档。</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ java -version</div><div class="line">java version <span class="string">"1.7.0_51"</span></div><div class="line">Java(TM) SE Runtime Environment (build 1.7.0_51-b13)</div><div class="line">Java HotSpot(TM) 64-Bit Server VM (build 24.51-b03, mixed mode)</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ mvn -v</div><div class="line">Apache Maven 3.2.3 (33f8c3e1027c3ddde99d3cdebad2656a31e8fdf4; 2014-08-11T13:58:10-07:00)</div><div class="line">Maven home: /Users/user/tools/apache-maven-3.1.1</div><div class="line">Java version: 1.7.0_51, vendor: Oracle Corporation</div></pre></td></tr></table></figure>
<blockquote>
<p>这个例子需要创建它自己的文件夹。接下来的介绍假设你已经创建了合适的文件夹并且文件夹是你的当前目录。</p>
</blockquote>
<h3 id="11-1-创建POM文件"><a href="#11-1-创建POM文件" class="headerlink" title="11.1 创建POM文件"></a>11.1 创建POM文件</h3><p>我们首先需要创建一个Maven的<code>pom.xml</code>文件。<code>pom.xml</code>是用来构建项目的处方。打开你最喜欢的文本编辑器并添加以下内容：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></div><div class="line">    <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>myproject<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.0.BUILD-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="comment">&lt;!-- Additional lines to be added here... --&gt;</span></div><div class="line"></div><div class="line">    <span class="comment">&lt;!-- (you don't need this if you are using a .RELEASE version) --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">repositories</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">repository</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>spring-snapshots<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://repo.spring.io/snapshot<span class="tag">&lt;/<span class="name">url</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span><span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span><span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">repository</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>spring-milestones<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://repo.spring.io/milestone<span class="tag">&lt;/<span class="name">url</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">pluginRepositories</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">pluginRepository</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>spring-snapshots<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://repo.spring.io/snapshot<span class="tag">&lt;/<span class="name">url</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">pluginRepository</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">pluginRepository</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>spring-milestones<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://repo.spring.io/milestone<span class="tag">&lt;/<span class="name">url</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">pluginRepository</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">pluginRepositories</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="11-2-添加classpath依赖"><a href="#11-2-添加classpath依赖" class="headerlink" title="11.2 添加classpath依赖"></a>11.2 添加classpath依赖</h3><p>Spring Boot提供了许多“Starters”，这样可以很容器的在classpath中添加jar包。我们的例子程序已经在POM的<code>parent</code>部分使用了<code>spring-boot-starter-parent</code>。<code>spring-boot-starter-parent</code>是一个特别的启动器，它能提供有用的Maven默认设置。它也提供了依赖管理部分，因此你可以对“blessed”依赖忽略其版本标签。</p>
<p>当开发一个特定的应用时，其它的“Starters”简单的提供了你可能需要的依赖。由于我们正在开发一个web应用，我们将添加<code>spring-boot-starter-web</code>依赖——但在那之前，让我们先看一下目前有什么。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ mvn dependency:tree</div><div class="line"></div><div class="line">[INFO] com.example:myproject:jar:0.0.1-SNAPSHOT</div></pre></td></tr></table></figure>
<h3 id="11-3-写代码"><a href="#11-3-写代码" class="headerlink" title="11.3 写代码"></a>11.3 写代码</h3><p>为了完成我们的应用，我们需要创建一个简单的Java文件。Maven默认的将从<code>src/main/java</code>编译源码，因此你需要创建文件结构，然后添加名为<code>src/main/java/Example.java</code>的文件：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> org.springframework.boot.*;</div><div class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.*;</div><div class="line"><span class="keyword">import</span> org.springframework.stereotype.*;</div><div class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</div><div class="line"></div><div class="line"><span class="meta">@RestController</span></div><div class="line"><span class="meta">@EnableAutoConfiguration</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Example</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/"</span>)</div><div class="line">    <span class="function">String <span class="title">home</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"Hello World!"</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        SpringApplication.run(Example.class, args);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>尽管这儿没有太多代码，许多正在进行中。让我们一步步浏览这些重要的部分。</p>
<h4 id="11-3-1-RestController和-RequestMapping注解"><a href="#11-3-1-RestController和-RequestMapping注解" class="headerlink" title="11.3.1 @RestController和@RequestMapping注解"></a>11.3.1 @RestController和@RequestMapping注解</h4><p><code>Example</code>类中的第一个注解是<code>@RestController</code>。这是一个<em>模式化</em>的注解。它为阅读代码的人提供了暗示，对于Spring而言，这个类有一个特定的任务。在这个例子中，我们的类是一个web <code>@Controller</code>，当web请求到来时，Spring会考虑用它来处理。</p>
<p><code>@RequestMapping</code>注解提供了『路由』信息。它告诉Spring任何带有路径”/“的HTTP请求应该映射到<code>home</code>方法上。<code>@RestController</code>注解告诉Spring将结果渲染成字符串形式并直接返回给调用者。</p>
<p><code>@RestController</code>和<code>@RequestMapping</code>是Spring MVC注解（它们不是Spring Boot特有的）。更多细节请看Spring参考文档中MVC部分。</p>
<h4 id="11-3-2-EnableAutoConfiguration注解"><a href="#11-3-2-EnableAutoConfiguration注解" class="headerlink" title="11.3.2 @EnableAutoConfiguration注解"></a>11.3.2 @EnableAutoConfiguration注解</h4><p>第二个类级别的注解是<code>@EnableAutoConfiguration</code>。这个注解告诉Spring Boot基于你添加的jar依赖去”猜”你想怎样配置Spring。由于<code>spring-boot-starter-web</code>添加了Tomcat和Spring MVC，自动配置会假设你正在开发一个web应用并相应的设置Spring。</p>
<p><strong>启动器和自动化配置</strong></p>
<p>自动配置被设计成跟『启动器』能一起工作的很好，但这两个概念没有直接联系。你可以自由的挑选启动器之外的jar依赖，Spring Boot仍会最大程度地自动配置你的应用。</p>
<h4 id="11-3-3-The-“main”-method"><a href="#11-3-3-The-“main”-method" class="headerlink" title="11.3.3 The “main” method"></a>11.3.3 The “main” method</h4><p>程序的最后部分是<code>main</code>方法。这是一个符合Java应用程序入口规范的标准方法。<code>main</code>方法中委托Spring Boot的<code>SpringApplication</code>类调用<code>run</code>方法。<code>SpringApplication</code>将引导我们的应用启动Spring，Spring将启动自动配置的Tomcat web服务器。我们需要将<code>Example.class</code>作为参数传给<code>run</code>方法，告诉<code>SpringApplication</code>它是主要的Spring组件。<code>args</code>数组会将所有命令行参数传给<code>run</code>方法。</p>
<h4 id="11-4-运行这个例子"><a href="#11-4-运行这个例子" class="headerlink" title="11.4 运行这个例子"></a>11.4 运行这个例子</h4><p>此时我们的应用应该工作了。既然我们已经使用了<code>spring-boot-starter-parent</code> POM，那我们有一个有用的<code>run</code>目标，我们使用它来启动应用。在工程的根目录中输入<code>mvn spring-boot:run</code>来启动应用。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">$ mvn spring-boot:run</div><div class="line"></div><div class="line">  .   ____          _            __ _ _</div><div class="line"> /\\ / ___<span class="string">'_ __ _ _(_)_ __  __ _ \ \ \ \</span></div><div class="line">( ( )\___ | '_ | <span class="string">'_| | '</span>_ \/ _` | \ \ \ \</div><div class="line"> \\/  ___)| |_)| | | | | || (_| |  ) ) ) )</div><div class="line">  <span class="string">'  |____| .__|_| |_|_| |_\__, | / / / /</span></div><div class="line"> =========|_|==============|___/=/_/_/_/</div><div class="line"> :: Spring Boot ::  (v2.0.0.BUILD-SNAPSHOT)</div><div class="line">....... . . .</div><div class="line">....... . . . (log output here)</div><div class="line">....... . . .</div><div class="line">........ Started Example in 2.222 seconds (JVM running for 6.514)</div></pre></td></tr></table></figure>
<p>如果你打开一个web浏览器，输入<code>localhost:8080</code>，你应该会看到下面的输出。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Hello World!</div></pre></td></tr></table></figure>
<p>可以点击<code>ctrl-c</code>退出应用。</p>
<h3 id="11-5-创建一个可执行的jar"><a href="#11-5-创建一个可执行的jar" class="headerlink" title="11.5 创建一个可执行的jar"></a>11.5 创建一个可执行的jar</h3><p>通过创建一个在产品中能运行的完整的自包含可执行jar文件来结束我们的例子。可执行jars（有时称为“fat jars”）是包含编译的类和代码运行需要的所有jar依赖的存档文件。</p>
<p><strong>可执行jars和Java</strong></p>
<p>Java没有提供任何标准方法来加载嵌套的jar文件（例如，jar文件本身包含在一个一个jar中）。如果你想分发一个自包含的应用，这可能是个问题。</p>
<p>为了解决这个问题，许多开发者使用“uber” jars。uber jar简单的将所有jars的所有类打包到一个单独的存档文件中。这个方法的问题是很难看到你的应用正在使用的是哪个库。如果多个jars使用了相同的文件名（不同的内容）也是个问题。</p>
<p>Spring Boot采用了一种不同的方法来处理这个问题，允许你真正的直接内嵌jars。</p>
<p>为了创建可执行jar，我们需要添加<code>spring-boot-maven-plugin</code>到<code>pom.xml</code>中。在<code>dependencies</code>部分下面插入以下内容：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p><code>spring-boot-starter-parent</code> POM包含绑定<code>repackage</code>目标的<code>&lt;executions&gt;</code>配置。如果你没有使用父POM，那你需要自己声明这个配置。更多细节请看插件文档。</p>
</blockquote>
<p>保存你的<code>pom.xml</code>并从命令行中运行<code>mvn package</code>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">$ mvn package</div><div class="line"></div><div class="line">[INFO] Scanning <span class="keyword">for</span> projects...</div><div class="line">[INFO]</div><div class="line">[INFO] ------------------------------------------------------------------------</div><div class="line">[INFO] Building myproject 0.0.1-SNAPSHOT</div><div class="line">[INFO] ------------------------------------------------------------------------</div><div class="line">[INFO] .... ..</div><div class="line">[INFO] --- maven-jar-plugin:2.4:jar (default-jar) @ myproject ---</div><div class="line">[INFO] Building jar: /Users/developer/example/spring-boot-example/target/myproject-0.0.1-SNAPSHOT.jar</div><div class="line">[INFO]</div><div class="line">[INFO] --- spring-boot-maven-plugin:2.0.0.BUILD-SNAPSHOT:repackage (default) @ myproject ---</div><div class="line">[INFO] ------------------------------------------------------------------------</div><div class="line">[INFO] BUILD SUCCESS</div><div class="line">[INFO] ------------------------------------------------------------------------</div></pre></td></tr></table></figure>
<p>如果你看一下目录<code>target</code>你应该看到<code>myproject-0.0.1-SNAPSHOT.jar</code>。这个文件大小应该在10 Mb左右。如果你想看里面的内容，你可以使用：<code>jar tvf</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ jar tvf target/myproject-0.0.1-SNAPSHOT.jar</div></pre></td></tr></table></figure>
<p>你在<code>target</code>目录中应该也能看到一个更小的名为<code>myproject-0.0.1-SNAPSHOT.jar.original</code>的文件。这是Spring Boot repackage之前Maven创建的最初的jar文件。</p>
<p>为了运行这个应用，要使用<code>java -jar</code>命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">$ java -jar target/myproject-0.0.1-SNAPSHOT.jar</div><div class="line"></div><div class="line">  .   ____          _            __ _ _</div><div class="line"> /\\ / ___<span class="string">'_ __ _ _(_)_ __  __ _ \ \ \ \</span></div><div class="line">( ( )\___ | '_ | <span class="string">'_| | '</span>_ \/ _` | \ \ \ \</div><div class="line"> \\/  ___)| |_)| | | | | || (_| |  ) ) ) )</div><div class="line">  <span class="string">'  |____| .__|_| |_|_| |_\__, | / / / /</span></div><div class="line"> =========|_|==============|___/=/_/_/_/</div><div class="line"> :: Spring Boot ::  (v2.0.0.BUILD-SNAPSHOT)</div><div class="line">....... . . .</div><div class="line">....... . . . (log output here)</div><div class="line">....... . . .</div><div class="line">........ Started Example in 2.536 seconds (JVM running for 2.864)</div></pre></td></tr></table></figure>
<p>像前面一样，通过点击<code>ctrl-c</code>来退出应用。</p>
<h2 id="12-接下来读什么"><a href="#12-接下来读什么" class="headerlink" title="12. 接下来读什么"></a>12. 接下来读什么</h2><p>希望这部分内容给你提供了一些Spring Boot的基本知识，让你写了你自己的应用。如果你是一个面向任务的开发人员，你可能想跳到<a href="spring.io">spring.io</a>，找出一些<a href="http://spring.io/guides/" target="_blank" rel="external">getting started</a>指南来解决特定的『用Spring怎样做』的问题；我们也提供了Spring Boot的<a href="">How-to</a>参考文档。</p>
<p><a href="https://github.com/spring-projects/spring-boot" target="_blank" rel="external">Spring Boot repository</a>也有一些你可以运行的<a href="https://github.com/spring-projects/spring-boot/tree/master/spring-boot-samples" target="_blank" rel="external">例子</a>。例子是独立于其它代码的（运行或使用例子时你不需要构建其它的内容）。</p>
<p>此外，按逻辑接下来是读第三部分，『使用Spring Boot』。如果你真的不耐烦，你也跳过这部分，直接阅读Spring Boot的特性。</p>
<h1 id="Part-III-使用Spring-Boot"><a href="#Part-III-使用Spring-Boot" class="headerlink" title="Part III. 使用Spring Boot"></a>Part III. 使用Spring Boot</h1><p>这一节将会讲述关于应该如何使用Spring Boot的更多细节。它包括许多主题例如构建系统，自动配置和怎么运行自己的应用。我们也讲述一些Spring Boot的最佳实践。虽然没有关于Spring Boot非常特别的东西（它只是另一个你可以使用的库），但接下来的一些建议可以让你的开发过程更容易一点。</p>
<p>如果你刚开始学习Spring Boot，在学习这节之前你可能应该先阅读一下『Getting Started』部分。</p>
<h2 id="13-构建系统"><a href="#13-构建系统" class="headerlink" title="13. 构建系统"></a>13. 构建系统</h2><p>强烈建议你选择一个支持依赖管理的构建系统，构建系统可以使用发布在『Maven Central』仓库中的工件。我们建议你选择Maven或Gradle。Spring Boot可能也可以与其它的构建系统进行协作（例如Ant），但不能特别好的支持其它的构建系统。</p>
<h3 id="13-1-依赖管理"><a href="#13-1-依赖管理" class="headerlink" title="13.1 依赖管理"></a>13.1 依赖管理</h3><p>Spring Boot的每一次发布都会提供它支持的依赖列表。实际应用时，在你的构建配置中不需要提供这些依赖的版本，因为Spring Boot会帮你进行管理。当你升级Spring Boot时，这些依赖也会随之进行升级。</p>
<blockquote>
<p>如果有必要的话，你仍可以指定版本并覆盖Spring Boot的推荐。</p>
</blockquote>
<p>这个列表包含了所有你在Spring Boot中可以使用的Spring模块，也包含了第三方库的精制列表。这个列表可以当做一个标准可用的<a href="">Bills of Materials (spring-boot-dependencies)</a>，也额外的专门支持Maven和Gradle可用。</p>
<blockquote>
<p>Spring Boot的每一次发布都是与Spring框架的基本版本相关的，因此我们强烈建议你在自己使用时不要指定它的版本。</p>
</blockquote>
<h3 id="13-2-Maven"><a href="#13-2-Maven" class="headerlink" title="13.2 Maven"></a>13.2 Maven</h3><p>Maven用户可以继承<code>spring-boot-starter-parent</code>工程来获得合理的默认配置。父工程提供了下面的特性：</p>
<ul>
<li><p>Java 1.6作为默认的编译级别。</p>
</li>
<li><p>UTF-8源码编码。</p>
</li>
<li><p>依赖管理部分，对于常用的依赖允许你忽略<code>&lt;version&gt;</code>标签，从<code>spring-boot-dependencies</code>继承POM。</p>
</li>
<li><p>合理的资源过滤。</p>
</li>
<li><p>合理的插件配置（exec plugin, surefire, Git commit ID, shade）。</p>
</li>
<li><p>对包括特定配置文件的<code>application.properties</code>和<code>application.yml</code>的合理资源过滤（例如，<code>application-foo.properties</code>和<code>application-foo.yml</code>）。</p>
</li>
</ul>
<p>最后一点：由于默认配置文件采用Spring风格的占位符(<code>${…​}</code>)，Maven过滤改成了使用<code>@..@</code>占位符（你可以使用Maven属性<code>resource.delimiter</code>来覆盖）。</p>
<h4 id="13-2-1-继承starter-parent"><a href="#13-2-1-继承starter-parent" class="headerlink" title="13.2.1 继承starter parent"></a>13.2.1 继承starter parent</h4><p>为了配置你的工程继承<code>spring-boot-starter-parent</code>，简单的设置<code>parent</code>：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- Inherit defaults from Spring Boot --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.0.BUILD-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p>你应该只需要在这个依赖中指定Spring Boot的版本号。如果你导入额外的starters，你可以安全的忽略这个版本号。</p>
</blockquote>
<p>有了这个设置，你也可以通过在你的工程中重写一个属性来覆盖单独的依赖。例如，为了升级另一个Spring Data的发布版本，你将需要在你的<code>pom.xml</code>中添加以下内容：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">spring-data-releasetrain.version</span>&gt;</span>Fowler-SR2<span class="tag">&lt;/<span class="name">spring-data-releasetrain.version</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p>检查<code>spring-boot-dependencies</code> pom支持的属性清单。</p>
</blockquote>
<h4 id="13-2-2-没有父POM的情况下使用Spring-Boot"><a href="#13-2-2-没有父POM的情况下使用Spring-Boot" class="headerlink" title="13.2.2 没有父POM的情况下使用Spring Boot"></a>13.2.2 没有父POM的情况下使用Spring Boot</h4><p>不是每个人都喜欢继承<code>spring-boot-starter-parent</code> POM的。你也可以有需要使用的公司的标准父POM，或者你可能更喜欢显式的声明你所有的Maven配置。</p>
<p>如果你不想使用<code>spring-boot-starter-parent</code>，但你仍要保留依赖管理的好处（不是插件管理），你可以使用<code>scope=import</code>依赖：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="comment">&lt;!-- Import dependency management from Spring Boot --&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.0.BUILD-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></div></pre></td></tr></table></figure>
<p>这个设置不允许你使用上面阐述的属性来重写单独的依赖。为了取得同样的效果，你需要在<code>spring-boot-dependencies</code>入口之前在工程的<code>dependencyManagement</code>中的添加一个入口。为了升级另一个Spring Data的发布版本，你将需要在你的<code>pom.xml</code>中添加以下内容：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></div><div class="line">        <span class="comment">&lt;!-- Override Spring Data release train provided by Spring Boot --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.data<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-data-releasetrain<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>Fowler-SR2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.0.BUILD-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p>在上面的例子中，我们指定了一个POM但任何依赖类型都可以被重写。</p>
</blockquote>
<h4 id="13-2-3-更改Java版本"><a href="#13-2-3-更改Java版本" class="headerlink" title="13.2.3 更改Java版本"></a>13.2.3 更改Java版本</h4><p><code>spring-boot-starter-parent</code>选择了相当保守的Java兼容性。如果你想听从我们的建议，使用更新的Java版本，你可以添加<code>java.version</code>属性。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></div></pre></td></tr></table></figure>
<h4 id="13-2-4-使用Spring-Boot-Maven插件"><a href="#13-2-4-使用Spring-Boot-Maven插件" class="headerlink" title="13.2.4 使用Spring Boot Maven插件"></a>13.2.4 使用Spring Boot Maven插件</h4><p>Spring Boot包含了一个Maven插件，这个插件可以将工程打包为一个可执行的jar包。如果你向使用它的话，将它添加到你的<code>&lt;plugins&gt;</code>部分：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p>如果你想使用Spring Boot的starter parent pom，你只需要添加这个插件，不需要配置它，除非你想更改父POM中的定义的设置。</p>
</blockquote>
<h3 id="13-3-Gradle"><a href="#13-3-Gradle" class="headerlink" title="13.3 Gradle"></a>13.3 Gradle</h3><p>Gradle用户可以直接在它们的<code>dependencies</code>部分导入<code>starters</code>。不像Maven，这儿不能导入“super parent”来共享一些配置。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">apply plugin: &apos;java&apos;</div><div class="line"></div><div class="line">repositories &#123;</div><div class="line">    maven &#123; url &quot;http://repo.spring.io/snapshot&quot; &#125;</div><div class="line">    maven &#123; url &quot;http://repo.spring.io/milestone&quot; &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">dependencies &#123;</div><div class="line">    compile(&quot;org.springframework.boot:spring-boot-starter-web:2.0.0.BUILD-SNAPSHOT&quot;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>spring-boot-gradle-plugin</code>也可用，并提供了从源码创建可执行jars和运行项目的功能。它也提供了依赖管理，在其它的兼容性之间，允许你忽略任何Spring Boot管理的依赖的版本号：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">buildscript &#123;</div><div class="line">    repositories &#123;</div><div class="line">        maven &#123; url &quot;http://repo.spring.io/snapshot&quot; &#125;</div><div class="line">        maven &#123; url &quot;http://repo.spring.io/milestone&quot; &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    dependencies &#123;</div><div class="line">        classpath(&quot;org.springframework.boot:spring-boot-gradle-plugin:2.0.0.BUILD-SNAPSHOT&quot;)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">apply plugin: &apos;java&apos;</div><div class="line">apply plugin: &apos;org.springframework.boot&apos;</div><div class="line"></div><div class="line">repositories &#123;</div><div class="line">    maven &#123; url &quot;http://repo.spring.io/snapshot&quot; &#125;</div><div class="line">    maven &#123; url &quot;http://repo.spring.io/milestone&quot; &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">dependencies &#123;</div><div class="line">    compile(&quot;org.springframework.boot:spring-boot-starter-web&quot;)</div><div class="line">    testCompile(&quot;org.springframework.boot:spring-boot-starter-test&quot;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="13-4-Ant"><a href="#13-4-Ant" class="headerlink" title="13.4 Ant"></a>13.4 Ant</h3><p>使用Apache Ant+Ivy来创建一个Spring Boot项目是可能的。<code>spring-boot-antlib</code> “AntLib”模块也可以用来帮助Ant创建可执行jars。</p>
<p>为了声明依赖，一个典型的<code>ivy.xml</code>文件如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&lt;ivy-module version=&quot;2.0&quot;&gt;</div><div class="line">    &lt;info organisation=&quot;org.springframework.boot&quot; module=&quot;spring-boot-sample-ant&quot; /&gt;</div><div class="line">    &lt;configurations&gt;</div><div class="line">        &lt;conf name=&quot;compile&quot; description=&quot;everything needed to compile this module&quot; /&gt;</div><div class="line">        &lt;conf name=&quot;runtime&quot; extends=&quot;compile&quot; description=&quot;everything needed to run this module&quot; /&gt;</div><div class="line">    &lt;/configurations&gt;</div><div class="line">    &lt;dependencies&gt;</div><div class="line">        &lt;dependency org=&quot;org.springframework.boot&quot; name=&quot;spring-boot-starter&quot;</div><div class="line">            rev=&quot;$&#123;spring-boot.version&#125;&quot; conf=&quot;compile&quot; /&gt;</div><div class="line">    &lt;/dependencies&gt;</div><div class="line">&lt;/ivy-module&gt;</div></pre></td></tr></table></figure>
<p>一个典型<code>build.xml</code>如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">&lt;project</div><div class="line">    xmlns:ivy=&quot;antlib:org.apache.ivy.ant&quot;</div><div class="line">    xmlns:spring-boot=&quot;antlib:org.springframework.boot.ant&quot;</div><div class="line">    name=&quot;myapp&quot; default=&quot;build&quot;&gt;</div><div class="line"></div><div class="line">    &lt;property name=&quot;spring-boot.version&quot; value=&quot;1.3.0.BUILD-SNAPSHOT&quot; /&gt;</div><div class="line"></div><div class="line">    &lt;target name=&quot;resolve&quot; description=&quot;--&gt; retrieve dependencies with ivy&quot;&gt;</div><div class="line">        &lt;ivy:retrieve pattern=&quot;lib/[conf]/[artifact]-[type]-[revision].[ext]&quot; /&gt;</div><div class="line">    &lt;/target&gt;</div><div class="line"></div><div class="line">    &lt;target name=&quot;classpaths&quot; depends=&quot;resolve&quot;&gt;</div><div class="line">        &lt;path id=&quot;compile.classpath&quot;&gt;</div><div class="line">            &lt;fileset dir=&quot;lib/compile&quot; includes=&quot;*.jar&quot; /&gt;</div><div class="line">        &lt;/path&gt;</div><div class="line">    &lt;/target&gt;</div><div class="line"></div><div class="line">    &lt;target name=&quot;init&quot; depends=&quot;classpaths&quot;&gt;</div><div class="line">        &lt;mkdir dir=&quot;build/classes&quot; /&gt;</div><div class="line">    &lt;/target&gt;</div><div class="line"></div><div class="line">    &lt;target name=&quot;compile&quot; depends=&quot;init&quot; description=&quot;compile&quot;&gt;</div><div class="line">        &lt;javac srcdir=&quot;src/main/java&quot; destdir=&quot;build/classes&quot; classpathref=&quot;compile.classpath&quot; /&gt;</div><div class="line">    &lt;/target&gt;</div><div class="line"></div><div class="line">    &lt;target name=&quot;build&quot; depends=&quot;compile&quot;&gt;</div><div class="line">        &lt;spring-boot:exejar destfile=&quot;build/myapp.jar&quot; classes=&quot;build/classes&quot;&gt;</div><div class="line">            &lt;spring-boot:lib&gt;</div><div class="line">                &lt;fileset dir=&quot;lib/runtime&quot; /&gt;</div><div class="line">            &lt;/spring-boot:lib&gt;</div><div class="line">        &lt;/spring-boot:exejar&gt;</div><div class="line">    &lt;/target&gt;</div><div class="line">&lt;/project&gt;</div></pre></td></tr></table></figure>
<blockquote>
<p>如果你不想使用<code>spring-boot-antlib</code>模块，请看79.10小节，“Build an executable archive from Ant without using spring-boot-antlib” “How-to”。</p>
</blockquote>
<h3 id="13-5-Starters"><a href="#13-5-Starters" class="headerlink" title="13.5 Starters"></a>13.5 Starters</h3><p>启动器是一系列你可以包含进自己应用中的实用依赖描述符。你可以得到所有Spring和你需要的相关技术的一站式服务，不需要有搜索样例代码和拷贝粘贴依赖描述符的负担。例如，如果你想开始使用Spring和JPA来进行数据库链接，只需要在你的工程中包含<code>spring-boot-starter-data-jpa</code>依赖，你便可以很好的前行了。</p>
<p>启动器包含许多你需要启动并快速运行一个工程的依赖，并持续支持一系列传递管理的依赖。</p>
<p><strong>What’s in a name</strong></p>
<p>所有的官方启动器都有一个类似的命名模式：<code>spring-boot-starter-*</code>，<code>*</code>是应用的特性类型。这个命名结构用来在你需要时帮助你发现一个启动器。Maven在许多IDEs中进行了集成，允许你通过名字来搜索依赖。例如，安装了合适的Eclipse或STS插件，你可以简单的在POM编辑器中点击<code>ctrl-space</code>并输入“spring-boot-starter”来查找一个完整的列表。</p>
<p>正如在创建你自己的启动器部分讲述的那样，第三方启动器不应该与<code>spring-boot</code>一起启动，因为它是预留给官方Spring Boot构建的。<code>acme</code>的第三方启动器通过命名为<code>acme-spring-boot-starter</code>。</p>
<p>下面的应用启动器由Spring Boot提供，在<code>org.springframework.boot</code>组下：</p>
<p>表13.1. Spring Boot应用启动器</p>
<table>
<thead>
<tr>
<th style="text-align:left">Name</th>
<th style="text-align:left">Description</th>
<th style="text-align:left">POM</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">spring-boot-starter-thymeleaf</td>
<td style="text-align:left">Starter for building MVC web applications using Thymeleaf views</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-thymeleaf/pom.xml" target="_blank" rel="external">POM</a></td>
</tr>
<tr>
<td style="text-align:left">spring-boot-starter-data-couchbase</td>
<td style="text-align:left">Starter for using Couchbase document-oriented database and Spring Data Couchbase</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-data-couchbase/pom.xml" target="_blank" rel="external">POM</a></td>
</tr>
<tr>
<td style="text-align:left">spring-boot-starter-artemis</td>
<td style="text-align:left">Starter for JMS messaging using Apache Artemis</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-artemis/pom.xml" target="_blank" rel="external">POM</a></td>
</tr>
<tr>
<td style="text-align:left">spring-boot-starter-web-services</td>
<td style="text-align:left">Starter for using Spring Web Services</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-web-services/pom.xml" target="_blank" rel="external">POM</a></td>
</tr>
<tr>
<td style="text-align:left">spring-boot-starter-mail</td>
<td style="text-align:left">Starter for using Java Mail and Spring Framework’s email sending support</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-mail/pom.xml" target="_blank" rel="external">POM</a></td>
</tr>
<tr>
<td style="text-align:left">spring-boot-starter-data-redis</td>
<td style="text-align:left">Starter for using Redis key-value data store with Spring Data Redis and the Jedis client</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-data-redis/pom.xml" target="_blank" rel="external">POM</a></td>
</tr>
<tr>
<td style="text-align:left">spring-boot-starter-web</td>
<td style="text-align:left">Starter for building web, including RESTful, applications using Spring MVC. Uses Tomcat as the default embedded container</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-web/pom.xml" target="_blank" rel="external">POM</a></td>
</tr>
<tr>
<td style="text-align:left">spring-boot-starter-data-gemfire</td>
<td style="text-align:left">Starter for using GemFire distributed data store and Spring Data GemFire</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-data-gemfire/pom.xml" target="_blank" rel="external">POM</a></td>
</tr>
<tr>
<td style="text-align:left">spring-boot-starter-activemq</td>
<td style="text-align:left">Starter for JMS messaging using Apache ActiveMQ</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-activemq/pom.xml" target="_blank" rel="external">POM</a></td>
</tr>
<tr>
<td style="text-align:left">spring-boot-starter-data-elasticsearch</td>
<td style="text-align:left">Starter for using Elasticsearch search and analytics engine and Spring Data Elasticsearch</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-data-elasticsearch/pom.xml" target="_blank" rel="external">POM</a></td>
</tr>
<tr>
<td style="text-align:left">spring-boot-starter-integration</td>
<td style="text-align:left">Starter for using Spring Integration</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-integration/pom.xml" target="_blank" rel="external">POM</a></td>
</tr>
<tr>
<td style="text-align:left">spring-boot-starter-test</td>
<td style="text-align:left">Starter for testing Spring Boot applications with libraries including JUnit, Hamcrest and Mockito</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-test/pom.xml" target="_blank" rel="external">POM</a></td>
</tr>
<tr>
<td style="text-align:left">spring-boot-starter-jdbc</td>
<td style="text-align:left">Starter for using JDBC with the Tomcat JDBC connection pool</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-jdbc/pom.xml" target="_blank" rel="external">POM</a></td>
</tr>
<tr>
<td style="text-align:left">spring-boot-starter-mobile</td>
<td style="text-align:left">Starter for building web applications using Spring Mobile</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-mobile/pom.xml" target="_blank" rel="external">POM</a></td>
</tr>
<tr>
<td style="text-align:left">spring-boot-starter-validation</td>
<td style="text-align:left">Starter for using Java Bean Validation with Hibernate Validator</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-validation/pom.xml" target="_blank" rel="external">POM</a></td>
</tr>
<tr>
<td style="text-align:left">spring-boot-starter-hateoas</td>
<td style="text-align:left">Starter for building hypermedia-based RESTful web application with Spring MVC and Spring HATEOAS</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-hateoas/pom.xml" target="_blank" rel="external">POM</a></td>
</tr>
<tr>
<td style="text-align:left">spring-boot-starter-jersey</td>
<td style="text-align:left">Starter for building RESTful web applications using JAX-RS and Jersey. An alternative to spring-boot-starter-web</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-jersey/pom.xml" target="_blank" rel="external">POM</a></td>
</tr>
<tr>
<td style="text-align:left">spring-boot-starter-data-neo4j</td>
<td style="text-align:left">Starter for using Neo4j graph database and Spring Data Neo4j</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-data-neo4j/pom.xml" target="_blank" rel="external">POM</a></td>
</tr>
<tr>
<td style="text-align:left">spring-boot-starter-websocket</td>
<td style="text-align:left">Starter for building WebSocket applications using Spring Framework’s WebSocket support</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-websocket/pom.xml" target="_blank" rel="external">POM</a></td>
</tr>
<tr>
<td style="text-align:left">spring-boot-starter-aop</td>
<td style="text-align:left">Starter for aspect-oriented programming with Spring AOP and AspectJ</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-aop/pom.xml" target="_blank" rel="external">POM</a></td>
</tr>
<tr>
<td style="text-align:left">spring-boot-starter-amqp</td>
<td style="text-align:left">Starter for using Spring AMQP and Rabbit MQ</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-amqp/pom.xml" target="_blank" rel="external">POM</a></td>
</tr>
<tr>
<td style="text-align:left">spring-boot-starter-data-cassandra</td>
<td style="text-align:left">Starter for using Cassandra distributed database and Spring Data Cassandra</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-data-cassandra/pom.xml" target="_blank" rel="external">POM</a></td>
</tr>
<tr>
<td style="text-align:left">spring-boot-starter-social-facebook</td>
<td style="text-align:left">Starter for using Spring Social Facebook</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-social-facebook/pom.xml" target="_blank" rel="external">POM</a></td>
</tr>
<tr>
<td style="text-align:left">spring-boot-starter-jta-atomikos</td>
<td style="text-align:left">Starter for JTA transactions using Atomikos</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-jta-atomikos/pom.xml" target="_blank" rel="external">POM</a></td>
</tr>
<tr>
<td style="text-align:left">spring-boot-starter-security</td>
<td style="text-align:left">Starter for using Spring Security</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-security/pom.xml" target="_blank" rel="external">POM</a></td>
</tr>
<tr>
<td style="text-align:left">spring-boot-starter-mustache</td>
<td style="text-align:left">Starter for building MVC web applications using Mustache views</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-mustache/pom.xml" target="_blank" rel="external">POM</a></td>
</tr>
<tr>
<td style="text-align:left">spring-boot-starter-data-jpa</td>
<td style="text-align:left">Starter for using Spring Data JPA with Hibernate</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-data-jpa/pom.xml" target="_blank" rel="external">POM</a></td>
</tr>
<tr>
<td style="text-align:left">spring-boot-starter</td>
<td style="text-align:left">Core starter, including auto-configuration support, logging and YAML</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter/pom.xml" target="_blank" rel="external">POM</a></td>
</tr>
<tr>
<td style="text-align:left">spring-boot-starter-groovy-templates</td>
<td style="text-align:left">Starter for building MVC web applications using Groovy Templates views</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-groovy-templates/pom.xml" target="_blank" rel="external">POM</a></td>
</tr>
<tr>
<td style="text-align:left">spring-boot-starter-freemarker</td>
<td style="text-align:left">Starter for building MVC web applications using FreeMarker views</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-freemarker/pom.xml" target="_blank" rel="external">POM</a></td>
</tr>
<tr>
<td style="text-align:left">spring-boot-starter-batch</td>
<td style="text-align:left">Starter for using Spring Batch</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-batch/pom.xml" target="_blank" rel="external">POM</a></td>
</tr>
<tr>
<td style="text-align:left">spring-boot-starter-social-linkedin</td>
<td style="text-align:left">Stater for using Spring Social LinkedIn</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-social-linkedin/pom.xml" target="_blank" rel="external">POM</a></td>
</tr>
<tr>
<td style="text-align:left">spring-boot-starter-cache</td>
<td style="text-align:left">Starter for using Spring Framework’s caching support</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-cache/pom.xml" target="_blank" rel="external">POM</a></td>
</tr>
<tr>
<td style="text-align:left">spring-boot-starter-data-solr</td>
<td style="text-align:left">Starter for using the Apache Solr search platform with Spring Data Solr</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-data-solr/pom.xml" target="_blank" rel="external">POM</a></td>
</tr>
<tr>
<td style="text-align:left">spring-boot-starter-data-mongodb</td>
<td style="text-align:left">Starter for using MongoDB document-oriented database and Spring Data MongoDB</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-data-mongodb/pom.xml" target="_blank" rel="external">POM</a></td>
</tr>
<tr>
<td style="text-align:left">spring-boot-starter-jooq</td>
<td style="text-align:left">Starter for using jOOQ to access SQL databases. An alternative to spring-boot-starter-data-jpa or spring-boot-starter-jdbc</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-jooq/pom.xml" target="_blank" rel="external">POM</a></td>
</tr>
<tr>
<td style="text-align:left">spring-boot-starter-jta-narayana</td>
<td style="text-align:left">Spring Boot Narayana JTA Starter</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-jta-narayana/pom.xml" target="_blank" rel="external">POM</a></td>
</tr>
<tr>
<td style="text-align:left">spring-boot-starter-cloud-connectors</td>
<td style="text-align:left">Starter for using Spring Cloud Connectors which simplifies connecting to services in cloud platforms like Cloud Foundry and Heroku</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-cloud-connectors/pom.xml" target="_blank" rel="external">POM</a></td>
</tr>
<tr>
<td style="text-align:left">spring-boot-starter-jta-bitronix</td>
<td style="text-align:left">Starter for JTA transactions using Bitronix</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-jta-bitronix/pom.xml" target="_blank" rel="external">POM</a></td>
</tr>
<tr>
<td style="text-align:left">spring-boot-starter-social-twitter</td>
<td style="text-align:left">Starter for using Spring Social Twitter</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-social-twitter/pom.xml" target="_blank" rel="external">POM</a></td>
</tr>
<tr>
<td style="text-align:left">spring-boot-starter-data-rest</td>
<td style="text-align:left">Starter for exposing Spring Data repositories over REST using Spring Data REST</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-data-rest/pom.xml" target="_blank" rel="external">POM</a></td>
</tr>
</tbody>
</table>
<p>除了应用启动器之外，下面的启动器可以用来添加产品准备功能：</p>
<p><strong>Table 13.2. Spring Boot 产品启动器</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">Name</th>
<th style="text-align:left">Description</th>
<th style="text-align:left">Pom</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">spring-boot-starter-actuator</td>
<td style="text-align:left">Starter for using Spring Boot’s Actuator which provides production ready features to help you monitor and manage your application</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-actuator/pom.xml" target="_blank" rel="external">Pom</a></td>
</tr>
</tbody>
</table>
<p>最后，如果你想排除或交换特定的技术方面，Spring Boot也包括一些可以使用的启动器：</p>
<p><strong>Table 13.3. Spring Boot 技术启动器</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">Name</th>
<th style="text-align:left">Description</th>
<th style="text-align:left">Pom</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">spring-boot-starter-undertow</td>
<td style="text-align:left">Starter for using Undertow as the embedded servlet container. An alternative to spring-boot-starter-tomcat</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-undertow/pom.xml" target="_blank" rel="external">Pom</a></td>
</tr>
<tr>
<td style="text-align:left">spring-boot-starter-jetty</td>
<td style="text-align:left">Starter for using Jetty as the embedded servlet container. An alternative to spring-boot-starter-tomcat</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-jetty/pom.xml" target="_blank" rel="external">Pom</a></td>
</tr>
<tr>
<td style="text-align:left">spring-boot-starter-logging</td>
<td style="text-align:left">Starter for logging using Logback. Default logging starter</td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-logging/pom.xml" target="_blank" rel="external">Pom</a></td>
</tr>
<tr>
<td style="text-align:left">spring-boot-starter-tomcat</td>
<td style="text-align:left">Starter for using Tomcat as the embedded servlet container. Default servlet container starter used by <code>spring-boot-starter-web</code></td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-tomcat/pom.xml" target="_blank" rel="external">Pom</a></td>
</tr>
<tr>
<td style="text-align:left">spring-boot-starter-log4j2</td>
<td style="text-align:left">Starter for using Log4j2 for logging. An alternative to <code>spring-boot-starter-logging</code></td>
<td style="text-align:left"><a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/spring-boot-starter-log4j2/pom.xml" target="_blank" rel="external">Pom</a></td>
</tr>
</tbody>
</table>
<blockquote>
<p>对于额外的社区共享的启动器，请看GitHub上<code>the spring-boot-starters</code>模块的<a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/README.adoc" target="_blank" rel="external">README file</a>。</p>
</blockquote>
<h2 id="14-组织你的代码"><a href="#14-组织你的代码" class="headerlink" title="14. 组织你的代码"></a>14. 组织你的代码</h2><p>Spring Boot工作时不要求任何特定的代码布局，但是有一些最佳实践还是很有帮助的。</p>
<h3 id="14-1-使用“default”包"><a href="#14-1-使用“default”包" class="headerlink" title="14.1 使用“default”包"></a>14.1 使用“default”包</h3><p>当一个类没有包含一个<code>package</code>声明时，它当做是在<code>default package</code>中。通常情况下不建议使用<code>default package</code>，应该避免使用它。当Spring Boot应用使用<code>@ComponentScan</code>，<code>@EntityScan</code>或<code>@SpringBootApplication</code>它会引起一些特别的问题，因为Spring Boot会读取每个jar中的每个类。</p>
<blockquote>
<p>我们建议你遵循Java推荐的包命名规范，使用一个反转的域名（例如，<code>com.example.project</code>）。</p>
</blockquote>
<h3 id="14-2-定义主应用类"><a href="#14-2-定义主应用类" class="headerlink" title="14.2 定义主应用类"></a>14.2 定义主应用类</h3><p>通常我们建议你将你的主应用类放在其它类之上的根包中。<code>@EnableAutoConfiguration</code>注解经常放在你的主类（main class）中，对于某些像它隐式的定义了一个基<code>search package</code>，例如，如果你正在写一个JPA应用，<code>@EnableAutoConfiguration</code>注解的类所在的包将被用来搜索<code>@Entity</code>项。</p>
<p>根包的应用也允许使用<code>@ComponentScan</code>注解而不需要指定<code>basePackage</code>特性。如果你的主类是在根包中，你也可以使用<code>@SpringBootApplication</code>注解。</p>
<p>下面是一个典型的布局：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">com</div><div class="line"> +- example</div><div class="line">     +- myproject</div><div class="line">         +- Application.java</div><div class="line">         |</div><div class="line">         +- domain</div><div class="line">         |   +- Customer.java</div><div class="line">         |   +- CustomerRepository.java</div><div class="line">         |</div><div class="line">         +- service</div><div class="line">         |   +- CustomerService.java</div><div class="line">         |</div><div class="line">         +- web</div><div class="line">             +- CustomerController.java</div></pre></td></tr></table></figure>
<p><code>Application.java</code>文件会声明<code>main</code>方法和基本的<code>@Configuration</code>。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.example.myproject;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</div><div class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.EnableAutoConfiguration;</div><div class="line"><span class="keyword">import</span> org.springframework.context.annotation.ComponentScan;</div><div class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</div><div class="line"></div><div class="line"><span class="meta">@Configuration</span></div><div class="line"><span class="meta">@EnableAutoConfiguration</span></div><div class="line"><span class="meta">@ComponentScan</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Application</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        SpringApplication.run(Application.class, args);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="15-配置类"><a href="#15-配置类" class="headerlink" title="15. 配置类"></a>15. 配置类</h2><p>Spring Boot支持基于Java的注解。尽管可以通过XML源调用<code>SpringApplication.run()</code>方法，但我们通常建议你主要的源是一个<code>@Configuration</code>类。</p>
<blockquote>
<p>网上已经发布了许多使用XML配置来进行Spring配置的例子。但要尽可能的尝试使用等价的Java注解。搜索<code>enable*</code>注解是一个好的开端。</p>
</blockquote>
<h3 id="15-1-导入额外的配置类"><a href="#15-1-导入额外的配置类" class="headerlink" title="15.1 导入额外的配置类"></a>15.1 导入额外的配置类</h3><p>你不必将所有的<code>@Configuration</code>放到一个单独的类中。可以使用<code>@Import</code>注解来导入额外的配置类。或者，你可以使用<code>@ComponentScan</code>来自动获得所有的Spring组件，包括<code>@Configuration</code>类。</p>
<h3 id="15-2-导入XML配置"><a href="#15-2-导入XML配置" class="headerlink" title="15.2 导入XML配置"></a>15.2 导入XML配置</h3><p>如果你绝对的必须使用基于XML的配置，我们推荐你仍然从<code>@Configuration</code>类开始。你可以使用额外的<code>@ImportResource</code>注解来加载XML配置文件。</p>
<h2 id="16-自动配置"><a href="#16-自动配置" class="headerlink" title="16. 自动配置"></a>16. 自动配置</h2><p>Spring Boot自动配置会基于你添加的jar依赖试图自动配置你的Spring应用。例如，如果<code>HSQLDB</code>在你的classpath中，并且你没有手动的配置任何数据库连接beans，我们将会在自动配置一个内存中的数据库。</p>
<p>你需要通过添加<code>@EnableAutoConfiguration</code>或<code>@SpringBootApplication</code>注解到你的<code>@Configuration</code>类中的一个来选择性的加入自动配置。</p>
<blockquote>
<p>你应该仅添加一个<code>@EnableAutoConfiguration</code>注解。我们通常建议你将它添加到你主要的<code>@Configuration</code>类中。</p>
</blockquote>
<h3 id="16-1-逐渐替换自动配置"><a href="#16-1-逐渐替换自动配置" class="headerlink" title="16.1 逐渐替换自动配置"></a>16.1 逐渐替换自动配置</h3><p>自动配置是非入侵性的，在任何时候你都可以开始定义你自己的配置来替换自动配置的指定部分。例如，如果你要添加你自己的<code>DataSource</code> bean，默认嵌入的数据库支持将会退出。</p>
<p>如果你需要找出当前正在应用的自动配置和为什么，你可以用<code>--debug</code>开关来启动你的应用。这将会使核心日志的输出级别变为debug级别并输出一个自动配置报告到控制台。</p>
<h3 id="16-2-禁用特定的自动配置"><a href="#16-2-禁用特定的自动配置" class="headerlink" title="16.2 禁用特定的自动配置"></a>16.2 禁用特定的自动配置</h3><p>如果你发现正在应用特定的你不想使用的自动配置类，你可以使用<code>@EnableAutoConfiguration</code>注解的<code>exclude</code>特性来禁用它们。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.*;</div><div class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.jdbc.*;</div><div class="line"><span class="keyword">import</span> org.springframework.context.annotation.*;</div><div class="line"></div><div class="line"><span class="meta">@Configuration</span></div><div class="line"><span class="meta">@EnableAutoConfiguration</span>(exclude=&#123;DataSourceAutoConfiguration.class&#125;)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConfiguration</span> </span>&#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>如果这个类不在classpath中，你可以使用这个注解的<code>excludeName</code>特性并指定全限定名来代替。最后，你也可以通过<code>spring.autoconfigure.exclude</code>属性来排除，从而控制自动配置类的列表。</p>
<blockquote>
<p>你也可以在注解级别或使用属性来定义排除项。</p>
</blockquote>
<h2 id="17-Spring-Beans和依赖注入"><a href="#17-Spring-Beans和依赖注入" class="headerlink" title="17. Spring Beans和依赖注入"></a>17. Spring Beans和依赖注入</h2><p>你可以自由的使用任何标准的Spring框架技术来定义你的beans和它们注入的依赖。为了简便，我们经常使用<code>@ComponentScan</code>来发现你的beans，结合<code>@Autowired</code>构造函数注入也工作的很好。</p>
<p>如果你根据上面的建议组织你代码（将你的应用类放在根包中），你可以添加<code>@ComponentScan</code>注解而不需要任何参数。你所有的应用组件（<code>@Component</code>，<code>@Service</code>，<code>@Repository</code>，<code>@Controller</code>等等）将会作为Spring bean进行自动注册。</p>
<p>下面是一个<code>@Service</code> Bean的例子，通过使用构造函数注入来获得<code>RiskAssessor</code> bean。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.example.service;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</div><div class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</div><div class="line"></div><div class="line"><span class="meta">@Service</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DatabaseAccountService</span> <span class="keyword">implements</span> <span class="title">AccountService</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> RiskAssessor riskAssessor;</div><div class="line"></div><div class="line">    <span class="meta">@Autowired</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DatabaseAccountService</span><span class="params">(RiskAssessor riskAssessor)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.riskAssessor = riskAssessor;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// ...</span></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>注意使用构造函数注入允许<code>riskAssessor</code>字段标记为<code>final</code>，意味着它接下来不能被修改。</p>
</blockquote>
<h2 id="18-使用-SpringBootApplication注解"><a href="#18-使用-SpringBootApplication注解" class="headerlink" title="18. 使用@SpringBootApplication注解"></a>18. 使用@SpringBootApplication注解</h2><p>许多Spring Boot的开发者总是在它们的主类上加上<code>@Configuration</code>，<code>@EnableAutoConfiguration</code>和<code>@ComponentScan</code>注解。由于这些注解频繁的在一起使用（尤其是你遵循上面的最佳实践时），Spring Boot提供了一个方便的<code>@SpringBootApplication</code>注解来代替它们。</p>
<p><code>@SpringBootApplication</code>注解等价于使用<code>@Configuration</code>，<code>@EnableAutoConfiguration</code>和<code>@ComponentScan</code>以及它们的默认特性：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.example.myproject;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</div><div class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</div><div class="line"></div><div class="line"><span class="meta">@SpringBootApplication</span> <span class="comment">// same as @Configuration @EnableAutoConfiguration @ComponentScan</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Application</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        SpringApplication.run(Application.class, args);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p><code>@SpringBootApplication</code>也提供了别名来定制<code>@EnableAutoConfiguration</code>和<code>@ComponentScan</code>的特性。</p>
</blockquote>
<h2 id="19-运行你自己的应用"><a href="#19-运行你自己的应用" class="headerlink" title="19. 运行你自己的应用"></a>19. 运行你自己的应用</h2><p>将应用打包成jar并使用内嵌HTTP服务器的一个最大优势是你可以在任何地方运行你的程序。调试Spring Boot应用也很容易；你不必指定任何特定的IDE插件或扩展。</p>
<blockquote>
<p>这一节只包含基于jar的打包，如果你想选择将你的应用打包成war文件，你应该参考你的服务器和IDE文档。</p>
</blockquote>
<h3 id="19-1-从IDE运行"><a href="#19-1-从IDE运行" class="headerlink" title="19.1 从IDE运行"></a>19.1 从IDE运行</h3><p>你可以在你的IDE中运行一个Spring Boot应用将像运行一个简单的Java应用一样，然而，首先你需要导入你的工程。导入步骤根据你的IDE和构建系统会有所变化。大多数IDE可以直接导入Maven工程，例如Eclipse用户可以选择从<code>File</code>菜单选择<code>Import…​</code> → <code>Existing Maven Projects</code>。</p>
<p>如果你不能直接将工程导入你的IDE中，你可以使用构建插件生成一个IDE元数据。Maven中包含Eclipse和IDEA的插件；Gradle有各种IDEs的插件。</p>
<blockquote>
<p>如果你偶然的运行一个web应用两次，你会看到一个<code>Port already in use</code>错误。为了确保任何现有的实例被关闭，STS用户可以使用<code>Relaunch</code>按钮而不是<code>Run</code>按钮。</p>
</blockquote>
<h3 id="19-2-运行一个打包的应用"><a href="#19-2-运行一个打包的应用" class="headerlink" title="19.2 运行一个打包的应用"></a>19.2 运行一个打包的应用</h3><p>如果你使用Spring Boot的Maven或Gradle插件来创建一个可执行的jar包，你可以通过使用<code>java -jar</code>来运行你的应用。例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ java -jar target/myproject-0.0.1-SNAPSHOT.jar</div></pre></td></tr></table></figure>
<p>它也支持以远程调试模式运行一个打包的应用。这允许你在打包的应用中添加一个调试器：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ java -Xdebug -Xrunjdwp:server=y,transport=dt_socket,address=8000,suspend=n -jar target/myproject-0.0.1-SNAPSHOT.jar</div></pre></td></tr></table></figure>
<h3 id="19-3-使用Maven插件"><a href="#19-3-使用Maven插件" class="headerlink" title="19.3 使用Maven插件"></a>19.3 使用Maven插件</h3><p>Spring Boot Maven插件包含一个<code>run</code>目标，可以用来快速编译并运行你的应用。应用以exploded形式运行，就像在IDE中运行一样。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ mvn spring-boot:run</div></pre></td></tr></table></figure>
<p>你也可以使用有用的操作系统环境变量：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ export MAVEN_OPTS=-Xmx1024m -XX:MaxPermSize=128M</div></pre></td></tr></table></figure>
<h3 id="19-4-使用Gradle插件"><a href="#19-4-使用Gradle插件" class="headerlink" title="19.4 使用Gradle插件"></a>19.4 使用Gradle插件</h3><p>Spring Boot Gradle插件也包含一个<code>bootRun</code>任务，它可以以exploded方式运行你的应用。当你导入<code>spring-boot-gradle-plugin</code>时，可以添加<code>bootRun</code>任务：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ gradle bootRun</div></pre></td></tr></table></figure>
<p>你也可以使用有用的操作系统环境变量：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ export JAVA_OPTS=-Xmx1024m -XX:MaxPermSize=128M</div></pre></td></tr></table></figure>
<h3 id="19-5-热交换"><a href="#19-5-热交换" class="headerlink" title="19.5 热交换"></a>19.5 热交换</h3><p>由于Spring Boot应用只是普通的Java应用，JVM热交换应该是开箱即用的。JVM热交换可以替换的字节码有限制，一个更全面的解决方案是JRebel或Spring Loaded工程。<code>spring-boot-devtools</code>模块也支持快速的应用重启。</p>
<p>更多细节请看20章，下面的开发者工具部分和怎样热交换部分。</p>
<h2 id="20-开发者工具"><a href="#20-开发者工具" class="headerlink" title="20. 开发者工具"></a>20. 开发者工具</h2><p>Spring Boot包含额外的工具集合，可以使应用开发的过程更方便一点。<code>spring-boot-devtools</code>模块可以包含进任何工程，用来提供额外的程序调试特性。为了添加工具支持，简单的添加模块依赖到你的构建系统中：</p>
<p><strong>Maven.</strong> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;dependencies&gt;</div><div class="line">    &lt;dependency&gt;</div><div class="line">        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</div><div class="line">        &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;</div><div class="line">        &lt;optional&gt;true&lt;/optional&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line">&lt;/dependencies&gt;</div></pre></td></tr></table></figure>
<p><strong>Gradle.</strong> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">dependencies &#123;</div><div class="line">    compile(&quot;org.springframework.boot:spring-boot-devtools&quot;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>当运行一个完整的打包应用时，开发者工具会自动失效。如果你的应用是通过<code>java -jar</code>启动的，或者是通过一个特定的类加载器启动的，那它会被当做一个『产品级应用』。将依赖标记为<code>optional</code>是阻止开发工具间接应用到使用你应用的其它模块的最佳实践。Gradle不支持<code>optional</code>依赖开箱即用，同时你可能想看看<a href="https://github.com/spring-projects/gradle-plugins/tree/master/propdeps-plugin" target="_blank" rel="external">propdeps-plugin</a>。</p>
<p>再打包文件默认不包含开发者工具。如果你想使用某些远程开发者工具特性，你需要让<code>excludeDevtools</code>构建属性包含它。Maven和Gradle插件都支持这个属性。</p>
</blockquote>
<h3 id="20-2-自动重启"><a href="#20-2-自动重启" class="headerlink" title="20.2 自动重启"></a>20.2 自动重启</h3><p>当<code>classpath</code>中的文件修改时，使用<code>spring-boot-devtools</code>的应用会自动重启。当使用IDE开发时，这是一个很有用的功能，因为代码改变时它能快速的进行反馈。默认情况下，会监控<code>classpath</code>指向的文件夹中任何条目的变化。注意某些资源例如静态资源和视图模板不需要重启应用。</p>
<blockquote>
<p><strong>触发重启</strong></p>
<p>作为<code>DevTools</code>监视器<code>classpath</code>中的资源，触发重启的唯一方式是更新<code>classpath</code>。引起<code>classpath</code>更新的方式取决于你使用的IDE。在Eclipse中，保存一个修改的文件将引起<code>classpath</code>更新并触发重启事件。在IntelliJ IDEA中，构建工程(<code>Build → Make Project</code>)将会有同样的效果。</p>
</blockquote>
<p>&nbsp;</p>
<blockquote>
<p>只要启用了分支，你也可以通过支持的构建系统启动你的应用（例如，Maven和Gradle），因为<code>DevTools</code>需要一个独立的应用类加载器来进行正确操作。当Gradle和Maven在<code>classpath</code>中检测到<code>DevTools</code>时，它们默认的进行了那个工作。</p>
</blockquote>
<p>&nbsp;</p>
<blockquote>
<p>当使用<code>LiveReload</code>，自动重启能很好的工作。更多细节请看下面。如果你使用<code>JRebel</code>进行自动重启，将不支持动态的类重加载。其它的开发者工具功能（例如<code>LiveReload</code>和属性覆写）仍能继续使用。</p>
</blockquote>
<p>&nbsp;</p>
<blockquote>
<p><code>DevTools</code>依赖应用上下文关闭钩子来进行重启期间的关闭。如果你禁用了关闭钩子它将不能正确工作（<code>SpringApplication.setRegisterShutdownHook(false)</code>）。</p>
</blockquote>
<p>&nbsp;</p>
<blockquote>
<p>当决定<code>classpath</code>中输入引起的改变是否应该触发重启时，<code>DevTools</code>会自动忽略命名为<code>spring-boot</code>，<code>spring-boot-devtools</code>，<code>spring-boot-autoconfigure</code>，<code>spring-boot-actuator</code>和<code>spring-boot-starter</code>的工程。</p>
</blockquote>
<p>&nbsp;</p>
<blockquote>
<p><strong>重启与重载（重新加载）</strong></p>
<p>Spring Boot提供的重启技术是通过两个类加载器进行工作的。加载进基类加载器的类不能改变（例如，那些第三方jar包）。那些你正在开发的类加载进重启类加载器中。当应用重启时，丢弃旧的重启类加载器并创建一个新的。这种方法意味着应用重启时比『冷启动』更快，因为基类加载器已经存在并可用。</p>
<p>如果你发现你的应用重启不够快，或者你碰到了类加载问题，你可以考虑重载技术例如ZeroTurnaround的JRebel。这些工作通过加载时类的重写使它们更适合重载。Spring加载提供了另一种选择，但许多框架都不支持，也不支持商业化。</p>
</blockquote>
<h4 id="20-2-1-例外资源"><a href="#20-2-1-例外资源" class="headerlink" title="20.2.1 例外资源"></a>20.2.1 例外资源</h4><p>某些资源当它们改变时不一定需要触发重启。例如，Thymeleaf模板可以就地编辑。默认情况下，<code>/META-INF/maven</code>，<code>/META-INF/resources</code>，<code>/resources</code>，<code>/static</code>，<code>/public</code>或<code>/templates</code>中资源的改变不会触发重启，但会触发实时重载。如果你想定制这些例外项，你可以使用<code>spring.devtools.restart.exclude</code>属性。例如，仅排除<code>/static</code>和<code>/public</code>，设置如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">spring.devtools.restart.exclude=static/**,public/**</div></pre></td></tr></table></figure>
<blockquote>
<p>如果你想保持这些默认，添加额外的例外项，可以使用<code>spring.devtools.restart.additional-exclude</code>属性。</p>
</blockquote>
<h4 id="20-2-2-监控其它路径"><a href="#20-2-2-监控其它路径" class="headerlink" title="20.2.2 监控其它路径"></a>20.2.2 监控其它路径</h4><p>当你修改不在<code>classpath</code>中的文件时，你可能也想重启或重载你的应用。为了这样做，可以使用<code>spring.devtools.restart.additional-paths</code>属性来监控其它路径上的变化。你可以使用前面描述的<code>spring.devtools.restart.exclude</code>属性来控制其它路径上的变化是否会触发重启或仅触发实时重载。</p>
<h4 id="20-2-3-禁用重启"><a href="#20-2-3-禁用重启" class="headerlink" title="20.2.3 禁用重启"></a>20.2.3 禁用重启</h4><p>如果你想使用重启功能你可以通过<code>spring.devtools.restart.enabled</code>属性禁用它。大多数情况下你可以在你的<code>application.properties</code>中设置它（这仍会初始化重启类加载器但它不会监控文件的变化）。</p>
<p>如果你需要完整的禁用重启支持，例如，因为它不能与一个特定的库一起工作，你需要在调用<code>SpringApplication.run(…​)</code>之前设置一个<code>System</code>属性。例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">    System.setProperty(<span class="string">"spring.devtools.restart.enabled"</span>, <span class="string">"false"</span>);</div><div class="line">    SpringApplication.run(MyApp.class, args);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="20-2-4-使用触发器文件"><a href="#20-2-4-使用触发器文件" class="headerlink" title="20.2.4 使用触发器文件"></a>20.2.4 使用触发器文件</h4><p>如果你的IDE可以持续编译变化的文件，你可以只在特定的时间触发重启。为了实现这个功能你可以使用『触发器文件』，当你需要真正触发重启检查时，它是一个你必须要修改文件。修改这个文件只触发重启检查，只有<code>Devtools</code>检测到它必须要做些事情时，重启才会发生。触发器文件应该进行手动更新，或通过IDE插件更新。</p>
<p>为了使用触发器文件需要使用<code>spring.devtools.restart.trigger-file</code>属性。</p>
<blockquote>
<p>为了使你所有的工程都表现一样，你需要将<code>spring.devtools.restart.trigger-file</code>设置为全局设置。</p>
</blockquote>
<h4 id="20-2-5-定制重启类加载器"><a href="#20-2-5-定制重启类加载器" class="headerlink" title="20.2.5 定制重启类加载器"></a>20.2.5 定制重启类加载器</h4><p>像前面的的<code>Restart vs Reload</code>部分所讲的那样，重启功能是通过两个类加载器实现的。对于大多数应用来说这个方法能很好的工作，但是有时候它也会引起一些类加载问题。</p>
<p>默认情况下，IDE中的任何开放的工程都会使用“restart”类加载器进行加载，任何规范的<code>.jar</code>文件都会使用“base”类加载器进行加载。如果你在一个多模块工程中工作，不是每一个模块都导入到你的IDE中，你可能需要定制一些东西。为了实现这个功能你可以创建一个<code>META-INF/spring-devtools.properties</code>文件。</p>
<p><code>spring-devtools.properties</code>可以包含<code>restart.exclude.</code>和<code>restart.include.</code>前缀属性。<code>include</code>元素应该拉进“restart”类加载器中，<code>exclude</code>元素应该推入到“base”类加载器中。属性值是应用到<code>classpath</code>中的一个正则表达式。</p>
<p>例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">restart.exclude.companycommonlibs=/mycorp-common-[\\w-]+\.jar</div><div class="line">restart.include.projectcommon=/mycorp-myproj-[\\w-]+\.jar</div></pre></td></tr></table></figure>
<blockquote>
<p>所有属性的键必须是唯一的。只要<code>restart.include.</code>或<code>restart.exclude</code>作为一个属性启动，它就被应用。</p>
</blockquote>
<p>&nbsp;</p>
<blockquote>
<p><code>classpath</code>中的所有<code>META-INF/spring-devtools.properties</code>都会被加载。你可以将文件打包进你的工程中，或这个工程使用的库中。</p>
</blockquote>
<h4 id="20-2-6-已知的限制"><a href="#20-2-6-已知的限制" class="headerlink" title="20.2.6 已知的限制"></a>20.2.6 已知的限制</h4><p>当存在使用标准<code>ObjectInputStream</code>进行反序列化的对象时，重启功能不能很好的工作。如果你需要反序列化数据，你可能需要使用Spring的<code>ConfigurableObjectInputStream</code>和<code>Thread.currentThread().getContextClassLoader()</code>。</p>
<p>遗憾的是，一些第三方库反序列化时没有考虑上下文类加载器。如果你发现了这样的问题，你需要请求原作者进行修正。</p>
<h3 id="20-3-实时重载"><a href="#20-3-实时重载" class="headerlink" title="20.3 实时重载"></a>20.3 实时重载</h3><p><code>spring-boot-devtools</code>模块包含一个内嵌的实时重载服务器，当资源改变时可以用来触发浏览器重新刷新。实时重载浏览器扩展对于<a href="http://livereload.com/extensions/" target="_blank" rel="external">livereload.com</a>中的Chrome，Firefox和Safari而言是可用的。</p>
<p>当你的应用运行时，如果你不想启动实时重载服务器，你可以将<code>spring.devtools.livereload.enabled</code>属性设为<code>false</code>。</p>
<blockquote>
<p>一次你只可以运行一个实时重载服务器。在启动你的应用之前，确保没有其它的实时重载服务器在运行。如果你从你的IDE中启动多个应用，只有第一个应用有实时重载服务器支持。</p>
</blockquote>
<h3 id="20-4-全局设置"><a href="#20-4-全局设置" class="headerlink" title="20.4 全局设置"></a>20.4 全局设置</h3><p>通过添加一个名为<code>.spring-boot-devtools.properties</code>的文件到你的<code>$HOME</code>文件夹中（注意文件名以<code>.</code>开头），你可以配置全局开发者工具设置。任何添加到这个文件的属性都将应用到你机器上所有使用开发者工具的Spring Boot应用中。例如，为了配置重启时总是使用一个触发器文件，你需要添加如下内容：</p>
<p><strong>~/.spring-boot-devtools.properties.</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">spring.devtools.reload.trigger-file=.reloadtrigger</div></pre></td></tr></table></figure>
<h3 id="20-5-远程应用"><a href="#20-5-远程应用" class="headerlink" title="20.5 远程应用"></a>20.5 远程应用</h3><p>Spring Boot开发者工具是不受本地环境限制的，在运行远程应用时你也可以使用一些功能。远程支持是选择性加入的，为了使它起作用你需要确保<code>devtools</code>包含在再打包的文件中：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">excludeDevtools</span>&gt;</span>false<span class="tag">&lt;/<span class="name">excludeDevtools</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></div></pre></td></tr></table></figure>
<p>然后你需要设置<code>spring.devtools.remote.secret</code>属性，例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">spring.devtools.remote.secret=mysecret</div></pre></td></tr></table></figure>
<blockquote>
<p>使<code>spring-boot-devtools</code>在远程应用上起作用是有安全风险的。在产品部署时，你不应该让它支持<code>spring-boot-devtools</code>。</p>
</blockquote>
<p>远程<code>devtools</code>需要两部分提供支持：一个接收连接的服务器端，一个运行在IDE中的客户端应用。当设置<code>spring.devtools.remote.secret</code>属性时，服务器组件会自动起作用。客户端组件必须手动启动。</p>
<h4 id="20-5-1-运行远程客户端应用"><a href="#20-5-1-运行远程客户端应用" class="headerlink" title="20.5.1 运行远程客户端应用"></a>20.5.1 运行远程客户端应用</h4><p>远程客户端应用设计要在你的IDE中运行。你需要运行<code>org.springframework.boot.devtools.RemoteSpringApplication</code>，与要连接的远程工程要使用同样的classpath。传给应用的非可选参数应该是你要连接的远程URL。</p>
<p>例如，如果你在使用Eclipse或STS，你有一个名为<code>my-app</code>的工程，它已经部署到了云计算中，你需要按照下面的步骤去做：</p>
<ul>
<li><p>从<code>Run</code>菜单中选择<code>Run Configurations…​</code>。</p>
</li>
<li><p>创建一个新的<code>Java Application</code> “launch configuration”。</p>
</li>
<li><p>浏览<code>my-app</code>工程。</p>
</li>
<li><p>使用<code>org.springframework.boot.devtools.RemoteSpringApplication</code>作为主类。</p>
</li>
<li><p>添加<code>https://myapp.cfapps.io</code>到<code>Program arguments</code>(或无论你的远程URL是什么)。</p>
</li>
</ul>
<blockquote>
<p>因为远程客户端与真实的应用使用的<code>classpath</code>相同，因此它可以直接读取应用属性。这就是<code>spring.devtools.remote.secret</code>属性是怎样读取并传递给服务器进行授权的。</p>
</blockquote>
<p>&nbsp;</p>
<blockquote>
<p>为了传输可以加密，密码不能被解析，建议总是使用<code>https://</code>作为连接协议。</p>
</blockquote>
<p>&nbsp;</p>
<blockquote>
<p>如果你需要使用代理访问远程应用，配置<code>spring.devtools.remote.proxy.host</code>和<code>spring.devtools.remote.proxy.port</code>属性。</p>
</blockquote>
<h4 id="20-5-2-远程更新"><a href="#20-5-2-远程更新" class="headerlink" title="20.5.2 远程更新"></a>20.5.2 远程更新</h4><p>远程客户端会像本地重启那样监控你应用的<code>classpath</code>的变化。任何资源的更新都会推送到远程应用并（如果需要的话）触发重启。如果你在迭代一个本地没有的使用云服务的功能，它是非常有帮助的。通常更新和重启比整个重新构建部署更快。</p>
<blockquote>
<p>当远程客户端运行时只监控文件。如果在启动远程客户端之前你修改了文件，它将不会推送到远程服务器。</p>
</blockquote>
<h4 id="20-5-3-远程调试通道"><a href="#20-5-3-远程调试通道" class="headerlink" title="20.5.3 远程调试通道"></a>20.5.3 远程调试通道</h4><p>当在远程应用上分析问题时，Java远程调试是非常有用的。遗憾的是，当你的应用部署离开你的数据中心时，远程调试并不总是能用的。如果你正在使用一个基于容器的技术例如Docker，要设置远程调试也是非常棘手的。</p>
<p>为了帮助解决这些限制，<code>devtools</code>支持在HTTP协议上的远程调试通道。远程客户端提供一个端口为<code>8000</code>的本地服务器，你可以在这上面添加一个远程调试器。一旦建立了连接，调试通道将会在HTTP上发送到远程应用上。如果你想使用一个不同的端口，你可以使用<code>spring.devtools.remote.debug.local-port</code>属性。</p>
<p>你需要确保你的远程应用启动了并且远程调试可用。这经常可以通过配置<code>JAVA_OPTS</code>来完成。例如，在云计算平台你可以添加下面的内容到你的<code>manifest.yml</code>中：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">---</div><div class="line">  env:</div><div class="line">    JAVA_OPTS: &quot;-Xdebug -Xrunjdwp:server=y,transport=dt_socket,suspend=n&quot;</div></pre></td></tr></table></figure>
<blockquote>
<p>注意你不必向<code>-Xrunjdwp</code>传递<code>address=NNNN</code>选择。如果被忽略Java将会简单的选择一个随机自由的端口。</p>
</blockquote>
<p>&nbsp;</p>
<blockquote>
<p>在网上调试一个远程服务可能是非常慢的，你可能需要在你的IDE中添加<code>timeouts</code>。例如，在Eclipse中你可以从<code>Preferences…​</code>选择<code>Java → Debug</code>，并将<code>Debugger timeout (ms)</code>改成更合适的值（<code>60000</code>在大多数情况下都能很好工作）。</p>
</blockquote>
<h2 id="21-将你的应用打包成产品"><a href="#21-将你的应用打包成产品" class="headerlink" title="21. 将你的应用打包成产品"></a>21. 将你的应用打包成产品</h2><p>可执行<code>jars</code>可以用来进行产品部署。当它们是自包含时，理想情况下它们也是适合云部署的。</p>
<p>对于其它的“production ready”功能，例如健康，审计和度量REST或JMX端点；考虑添加<code>spring-boot-actuator</code>。更多细节请看第五部分，“Spring Boot Actuator: Production-ready features”。</p>
<h2 id="22-接下来读什么"><a href="#22-接下来读什么" class="headerlink" title="22. 接下来读什么"></a>22. 接下来读什么</h2><p>现在你应该对怎么使用Spring Boot以及应该循序的一些最佳实践有了很好的理解。你可以继续学习关于Spring Boot的一些深度功能，或者你可以跳过前面，直接阅读Spring Boot “production ready”方面的内容。</p>
<h1 id="Part-IV-Spring-Boot特性"><a href="#Part-IV-Spring-Boot特性" class="headerlink" title="Part IV. Spring Boot特性"></a>Part IV. Spring Boot特性</h1><p>这一部分进入Spring Boot细节部分。在这部分你会了解到你想使用和定制的一些重要特性。如果你还没准备好，你可以阅读第二部分“Getting started”和第三部分“Using Spring Boot”，可以对基础知识有个较好的认识。</p>
<h2 id="23-SpringApplication"><a href="#23-SpringApplication" class="headerlink" title="23. SpringApplication"></a>23. SpringApplication</h2><p><code>SpringApplication</code>提供了一种很方便的方式来引导Spring应用，Spring应用可以从<code>main()</code>方法中启动。许多情况下你可以委托给静态方法<code>SpringApplication.run</code>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">    SpringApplication.run(MySpringConfiguration.class, args);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>当你的应用启动时你应该看到类似于下面的东西：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"> .   ____          _            __ _ _</div><div class="line"> /\\ / ___&apos;_ __ _ _(_)_ __  __ _ \ \ \ \</div><div class="line">( ( )\___ | &apos;_ | &apos;_| | &apos;_ \/ _` | \ \ \ \</div><div class="line"> \\/  ___)| |_)| | | | | || (_| |  ) ) ) )</div><div class="line">  &apos;  |____| .__|_| |_|_| |_\__, | / / / /</div><div class="line"> =========|_|==============|___/=/_/_/_/</div><div class="line"> :: Spring Boot ::   v1.4.2.RELEASE</div><div class="line"></div><div class="line">2013-07-31 00:08:16.117  INFO 56603 --- [           main] o.s.b.s.app.SampleApplication            : Starting SampleApplication v0.1.0 on mycomputer with PID 56603 (/apps/myapp.jar started by pwebb)</div><div class="line">2013-07-31 00:08:16.166  INFO 56603 --- [           main] ationConfigEmbeddedWebApplicationContext : Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@6e5a8246: startup date [Wed Jul 31 00:08:16 PDT 2013]; root of context hierarchy</div><div class="line">2014-03-04 13:09:54.912  INFO 41370 --- [           main] .t.TomcatEmbeddedServletContainerFactory : Server initialized with port: 8080</div><div class="line">2014-03-04 13:09:56.501  INFO 41370 --- [           main] o.s.b.s.app.SampleApplication            : Started SampleApplication in 2.992 seconds (JVM running for 3.658)</div></pre></td></tr></table></figure>
<p>默认情况下会输出<code>INFO</code>日志信息，包括一些相关的启动细节例如启动应用的用户。</p>
<h3 id="23-1-启动失败"><a href="#23-1-启动失败" class="headerlink" title="23.1 启动失败"></a>23.1 启动失败</h3><p>如果你的应用启动失败，注册<code>FailureAnalyzers</code>有可能会提供专门的错误信息和解决这个问题的具体行动。例如，如果你启动一个<code>8080</code>端口的web应用并且这个端口已经被占用，你应该会看到类似于下面的内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">***************************</div><div class="line">APPLICATION FAILED TO START</div><div class="line">***************************</div><div class="line"></div><div class="line">Description:</div><div class="line"></div><div class="line">Embedded servlet container failed to start. Port 8080 was already in use.</div><div class="line"></div><div class="line">Action:</div><div class="line"></div><div class="line">Identify and stop the process that&apos;s listening on port 8080 or configure this application to listen on another port.</div></pre></td></tr></table></figure>
<blockquote>
<p>Spring Boot提供了许多<code>FailureAnalyzer</code>实现，你可以很容易添加自己的<code>FailureAnalyzer</code>实现。</p>
</blockquote>
<p>如果没有失败分析器能处理这个异常，你仍可以显示完整的自动配置报告，从而更好的理解什么地方出问题了。为了实现这个你需要启用<code>debug</code>属性或启用<code>org.springframework.boot.autoconfigure.logging.AutoConfigurationReportLoggingInitializer</code>的<code>DEBUG</code>日志。</p>
<p>例如，如果你使用<code>java -jar</code>运行应用，你可以用下面的形式启用<code>debug</code>属性：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ java -jar myproject-0.0.1-SNAPSHOT.jar --debug</div></pre></td></tr></table></figure>
<h3 id="23-2-定制Banner"><a href="#23-2-定制Banner" class="headerlink" title="23.2 定制Banner"></a>23.2 定制Banner</h3><p>启动时打印的标语可以通过在classpath中添加一个<code>banner.txt</code>文件或者将<code>banner.location</code>设置为<code>banner.txt</code>文件的位置来修改。如果文件是一种不常见的编码方式，你可以设置<code>banner.charset</code>(默认是<code>UTF-8</code>)。除了文本文件之外，你也添加一个<code>banner.gif</code>，<code>banner.jpg</code>或<code>banner.png</code>图像文件到classpath中，或者设置一个<code>banner.image.location</code>属性。图像将被转换成ASCII艺术表示并打印在文本标语之上。</p>
<p>在<code>banner.txt</code>内部你可以使用下面的任何占位符：</p>
<p><strong>Table 23.1. Banner变量</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">Variable</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">${application.version}</td>
<td style="text-align:left">你的应用的版本号在<code>MANIFEST.MF</code>中声明。 例如<code>Implementation-Version: 1.0</code>打印成<code>1.0</code>.</td>
</tr>
<tr>
<td style="text-align:left">${application.formatted-version}</td>
<td style="text-align:left">在<code>MANIFEST.MF</code>中的声明的应用版本号进行格式化显示（加上前缀<code>v</code>并用括号包裹）。例如<code>(v1.0)</code>。</td>
</tr>
<tr>
<td style="text-align:left">${spring-boot.version}</td>
<td style="text-align:left">你使用的Spring Boot版本。例如<code>1.4.2.RELEASE</code>.</td>
</tr>
<tr>
<td style="text-align:left">${spring-boot.formatted-version}</td>
<td style="text-align:left">你使用的Spring Boot版本进行格式化显示加上前缀<code>v</code>并用括号包裹）。例如<code>(v1.4.2.RELEASE)</code>。</td>
</tr>
<tr>
<td style="text-align:left">${Ansi.NAME} (or ${AnsiColor.NAME}, ${AnsiBackground.NAME}, ${AnsiStyle.NAME})</td>
<td style="text-align:left"><code>NAME</code>是ANSI转义码的名字。更多细节请看<code>AnsiPropertySource</code>。</td>
</tr>
<tr>
<td style="text-align:left">${application.title}</td>
<td style="text-align:left">在<code>MANIFEST.MF</code>中声明的应用标题。例如<code>Implementation-Title: MyApp</code>打印成<code>MyApp</code>.</td>
</tr>
</tbody>
</table>
<blockquote>
<p>如果你想自动生成一个标语你可以使用<code>SpringApplication.setBanner(…​)</code>方法。使用<code>org.springframework.boot.Banner</code>接口并实现你自己的<code>printBanner()</code>方法。</p>
</blockquote>
<p>你也可以使用<code>spring.main.banner-mode</code>属性来决定标语是否必须在<code>System.out</code>（控制台）上输出，使用配置的日志（log）或一点也不用（off）。</p>
<blockquote>
<p>如果你想在你的应用中禁用banner，YAML会将<code>off</code>映射为<code>false</code>，因此要确保添加引用。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">spring:</div><div class="line">    main:</div><div class="line">        banner-mode: &quot;off&quot;</div></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="23-3-定制SpringApplication"><a href="#23-3-定制SpringApplication" class="headerlink" title="23.3 定制SpringApplication"></a>23.3 定制SpringApplication</h3><p>如果你不喜欢默认的<code>SpringApplication</code>，你可以创建一个本地实例并定制它。例如，关闭你写的banner：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">    SpringApplication app = <span class="keyword">new</span> SpringApplication(MySpringConfiguration.class);</div><div class="line">    app.setBannerMode(Banner.Mode.OFF);</div><div class="line">    app.run(args);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>&nbsp;</p>
<blockquote>
<p>传给<code>SpringApplication</code>的构造函数参数是Spring beans配置源。在大多数情况下将会引用<code>@Configuration</code>类，但它们也可以引用XML配置或应该扫描的包。</p>
</blockquote>
<p>也可以使用<code>application.properties</code>文件配置<code>SpringApplication</code>。更多细节请看24章，『外部配置』。</p>
<p>完整的配置选项列表，请看<code>SpringApplication</code>文档。</p>
<h3 id="23-4-流畅的构建器API"><a href="#23-4-流畅的构建器API" class="headerlink" title="23.4 流畅的构建器API"></a>23.4 流畅的构建器API</h3><p>如果你需要构建<code>ApplicationContext</code>分层（多个具有父/子关系的上下文），或者你更喜欢使用<code>fluent</code>的构建器API，你可以使用<code>SpringApplicationBuilder</code>。</p>
<p><code>SpringApplicationBuilder</code>允许你链接多个方法调用，包括允许你创建分层的<code>parent</code>和<code>child</code>方法。</p>
<p>例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">new</span> SpringApplicationBuilder()</div><div class="line">        .sources(Parent.class)</div><div class="line">        .child(Application.class)</div><div class="line">        .bannerMode(Banner.Mode.OFF)</div><div class="line">        .run(args);</div></pre></td></tr></table></figure>
<blockquote>
<p>当创建<code>ApplicationContext</code>分层时有一些限制，例如，子上下文必须包含web组件，父子上下文将使用同一个<code>Environment</code>。更完整的细节请看<code>SpringApplicationBuilder</code>文档。</p>
</blockquote>
<h3 id="23-5-应用事件和监听器"><a href="#23-5-应用事件和监听器" class="headerlink" title="23.5 应用事件和监听器"></a>23.5 应用事件和监听器</h3><p>除了平常的Spring框架事件之外，例如<code>ContextRefreshedEvent</code>，<code>SpringApplication</code>会发送一些其它的应用事件。</p>
<blockquote>
<p>在<code>ApplicationContext</code>创建之前实际上会触发一些事件，因此你不能使用<code>@Bean</code>来注册这些监听器。你可以通过<code>SpringApplication.addListeners(…​)</code>或<code>SpringApplicationBuilder.listeners(…​)</code>方法来注册这些监听器。</p>
<p>如果你想自动注册这些监听器，不管上下文的创建方式，你可以在你的工程中添加<code>META-INF/spring.factories</code>文件，并通过<code>org.springframework.context.ApplicationListener</code>作为key来引用你的监听器。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">org.springframework.context.ApplicationListener=com.example.project.MyListener</div></pre></td></tr></table></figure></p>
</blockquote>
<p>当你的应用运行时，应用事件以下面的顺序发送：</p>
<ol>
<li>在运行启动时发送<code>ApplicationStartedEvent</code>，除了监听器和初始化器注册之外，在进行任何处理之前发送。</li>
<li>当在上下文中使用的<code>Environment</code>已知时，发送<code>ApplicationEnvironmentPreparedEvent</code>，但发送是在上下文创建之前。</li>
<li>在再刷新启动之前，但在bean定义加载之后，发送<code>ApplicationPreparedEvent</code>。</li>
<li>在再刷新之后，发送<code>ApplicationReadyEvent</code>，任何相关的回调函数都处理完成之后，意味着应用已经准备处理服务请求了。</li>
<li>如果启动时出现异常，发送<code>ApplicationFailedEvent</code>.</li>
</ol>
<blockquote>
<p>经常你不需要使用应用事件，但知道它们的存在是便利的。Spring Boot内部使用事件来处理大量的任务。</p>
</blockquote>
<h3 id="23-6-Web环境"><a href="#23-6-Web环境" class="headerlink" title="23.6 Web环境"></a>23.6 Web环境</h3><p><code>SpringApplication</code>会尝试创建代表你的合适的<code>ApplicationContext</code>类型。默认情况下，会使用<code>AnnotationConfigApplicationContext</code>或<code>AnnotationConfigEmbeddedWebApplicationContext</code>，依赖于你是否在开发一个web应用。</p>
<p>使用的决定<code>web environment</code>的算法是相对简单的（基于现有的一些类）。如果你需要覆写默认值你可以使用<code>setWebEnvironment(boolean webEnvironment)</code>。</p>
<p>完全控制<code>ApplicationContext</code>类型也是可能的，通过调用<code>setApplicationContextClass(…​)</code>使用。</p>
<blockquote>
<p>当在JUnit测试时使用<code>SpringApplication</code>，经常需要调用<code>setWebEnvironment(false)</code>。</p>
</blockquote>
<h3 id="23-7-访问应用参数"><a href="#23-7-访问应用参数" class="headerlink" title="23.7 访问应用参数"></a>23.7 访问应用参数</h3><p>如果你需要访问传进<code>SpringApplication.run(…​)</code>中的应用参数，你可以注入<code>org.springframework.boot.ApplicationArguments</code> bean。<code>ApplicationArguments</code>接口提供了访问原始<code>String[]</code>和转换的<code>option</code>，<code>non-option</code>参数。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> org.springframework.boot.*</div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.*</div><div class="line"><span class="keyword">import</span> org.springframework.stereotype.*</div><div class="line"></div><div class="line"><span class="meta">@Component</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyBean</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@Autowired</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyBean</span><span class="params">(ApplicationArguments args)</span> </span>&#123;</div><div class="line">        <span class="keyword">boolean</span> debug = args.containsOption(<span class="string">"debug"</span>);</div><div class="line">        List&lt;String&gt; files = args.getNonOptionArgs();</div><div class="line">        <span class="comment">// if run with "--debug logfile.txt" debug=true, files=["logfile.txt"]</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>Spring Boot也在Spring <code>Environment</code>中注册<code>CommandLinePropertySource</code>。这也允许你使用<code>@Value</code>注解注入单个应对参数。</p>
</blockquote>
<h3 id="23-8-使用ApplicationRunner或CommandLineRunner"><a href="#23-8-使用ApplicationRunner或CommandLineRunner" class="headerlink" title="23.8 使用ApplicationRunner或CommandLineRunner"></a>23.8 使用ApplicationRunner或CommandLineRunner</h3><p>如果你需要在<code>SpringApplication</code>启动时运行一些特定的代码，你可以实现<code>ApplicationRunner</code>或<code>CommandLineRunner</code>接口。这两个接口以同样方式工作，并有一个单独的<code>run</code>方法，在<code>SpringApplication.run(…​)</code>之前会调用这个<code>run</code>方法。</p>
<p><code>CommandLineRunner</code>接口提供了对应用参数的访问，应用参数作为一个简单的字符串数组，而<code>ApplicationRunner</code>使用前面描述的<code>ApplicationArguments</code>接口。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> org.springframework.boot.*</div><div class="line"><span class="keyword">import</span> org.springframework.stereotype.*</div><div class="line"></div><div class="line"><span class="meta">@Component</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyBean</span> <span class="keyword">implements</span> <span class="title">CommandLineRunner</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(String... args)</span> </span>&#123;</div><div class="line">        <span class="comment">// Do something...</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>另外，如果定义的<code>CommandLineRunner</code>或<code>ApplicationRunner</code> beans必须以指定顺序调用，你可以实现<code>org.springframework.core.Ordered</code>接口或<code>org.springframework.core.annotation.Order</code> 注解。</p>
<h3 id="23-9-应用退出"><a href="#23-9-应用退出" class="headerlink" title="23.9 应用退出"></a>23.9 应用退出</h3><p>为了确保<code>ApplicationContext</code>在关闭时安全退出， 每个<code>SpringApplication</code>都会在JVM中注册一个关闭钩子。所有的标准Spring生命周期回调函数（例如<code>DisposableBean</code>接口，或<code>@PreDestroy</code>注解）都会被使用。</p>
<p>另外，当应用退出时，如果它们想返回一个特定的退出码，beans可以实现<code>org.springframework.boot.ExitCodeGenerator</code>接口。</p>
<h3 id="23-10-Admin功能"><a href="#23-10-Admin功能" class="headerlink" title="23.10 Admin功能"></a>23.10 Admin功能</h3><p>如果应用想启用admin相关的功能，可以指定<code>spring.application.admin.enabled</code>属性。这会在平台<code>MBeanServer</code>上暴露<code>SpringApplicationAdminMXBean</code>。你可以使用这个功能远程的管理你的Spring Boot应用。对于任何服务包裹的实现这是很有用的。</p>
<blockquote>
<p>如果你想知道应用运行的HTTP接口，通过关键字<code>local.server.port</code>可以得到这个属性。</p>
</blockquote>
<p>&nbsp;</p>
<blockquote>
<p>当启用这个功能时要非常小心，因为MBean会暴露一个关闭应用的方法。</p>
</blockquote>
<h2 id="24-外部配置"><a href="#24-外部配置" class="headerlink" title="24. 外部配置"></a>24. 外部配置</h2><p>Spring Boot允许你进行外部化配置，因此可以将同样的应用代码在不同的环境中运行。你可以使用属性文件，YAML文件，环境变量和命令行参数来进行外部化配置。属性值可以使用<code>@Value</code>注解直接注入到你的beans中，通过Spring的<code>Environment</code>抽象或通过<code>@ConfigurationProperties</code>绑定到结构化对象上来访问。</p>
<p>Spring Boot使用非常特别的<code>PropertySource</code>顺序，这个顺序的设计是为了允许值的合理重写。属性被认为是按照以下顺序：</p>
<ol>
<li>根目录下的开发工具全局设置属性(当开发工具激活时为<code>~/.spring-boot-devtools.properties</code>)。</li>
<li>测试中的<code>@TestPropertySource</code>注解。</li>
<li>测试中的<code>@SpringBootTest#properties</code>注解特性。</li>
<li>命令行参数。</li>
<li><code>SPRING_APPLICATION_JSON</code>中的属性(环境变量或系统属性中的内联JSON嵌入)。</li>
<li><code>ServletConfig</code>初始化参数。</li>
<li><code>ServletContext</code>初始化参数。</li>
<li><code>java:comp/env</code>的JNDI特性。</li>
<li>Java系统属性 (<code>System.getProperties()</code>)。</li>
<li>操作系统环境变量。</li>
<li><code>RandomValuePropertySource</code>只在<code>random.*</code>中有属性。</li>
<li>jar包之外的指定配置文件的应用属性(<code>application-{profile}.properties</code>和YAML变量)。</li>
<li>jar包之内的指定配置文件的应用属性(<code>application-{profile}.properties</code>和YAML变量)。</li>
<li>jar包之外的应用属性 (<code>application.properties</code>和YAML变量)。</li>
<li>jar包之内的应用属性 (<code>application.properties</code>和YAML变量)。</li>
<li><code>@Configuration</code>类中的<code>@PropertySource</code>注解 。</li>
<li>默认属性(通过<code>SpringApplication.setDefaultProperties</code>指定).</li>
</ol>
<p>为了提供一个具体的例子，假设你开发了一个使用名字属性的<code>@Component</code>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> org.springframework.stereotype.*</div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.*</div><div class="line"></div><div class="line"><span class="meta">@Component</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyBean</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;name&#125;"</span>)</div><div class="line">    <span class="keyword">private</span> String name;</div><div class="line"></div><div class="line">    <span class="comment">// ...</span></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在你的应用路径中（例如在你的jar内部），你可以使用<code>application.properties</code>为<code>name</code>提供一个合理的默认属性值。当在新环境运行时，<code>application.properties</code>可以在jar外部提供来重写<code>name</code>；对于一次性测试，你可以通过指定的命令行切换来启动（例如<code>java -jar app.jar --name=&quot;Spring&quot;</code>）。</p>
<blockquote>
<p><code>SPRING_APPLICATION_JSON</code>可以在命令行中通过环境变量提供。例如在UNIX shell中：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ SPRING_APPLICATION_JSON=&apos;&#123;&quot;foo&quot;:&#123;&quot;bar&quot;:&quot;spam&quot;&#125;&#125;&apos; java -jar myapp.jar</div></pre></td></tr></table></figure></p>
<p>在这个例子中，Spring的<code>Environment</code>中会有<code>foo.bar=spam</code>。你也可以在系统变量中提供JSON作为<code>spring.application.json</code>。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ java -Dspring.application.json=&apos;&#123;&quot;foo&quot;:&quot;bar&quot;&#125;&apos; -jar myapp.jar</div></pre></td></tr></table></figure></p>
<p>或命令行参数：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ java -jar myapp.jar --spring.application.json=&apos;&#123;&quot;foo&quot;:&quot;bar&quot;&#125;&apos;</div></pre></td></tr></table></figure></p>
<p>或JNDI变量<code>java:comp/env/spring.application.json</code></p>
</blockquote>
<h3 id="24-1-配置随机值"><a href="#24-1-配置随机值" class="headerlink" title="24.1 配置随机值"></a>24.1 配置随机值</h3><p>当注入随机值时，<code>RandomValuePropertySource</code>是很有用的（例如，注入秘密或测试用例）。它可以产生<code>integers</code>，<code>longs</code>，<code>uuids</code>或<code>strings</code>，例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">my.secret=$&#123;random.value&#125;</div><div class="line">my.number=$&#123;random.int&#125;</div><div class="line">my.bignumber=$&#123;random.long&#125;</div><div class="line">my.uuid=$&#123;random.uuid&#125;</div><div class="line">my.number.less.than.ten=$&#123;random.int(10)&#125;</div><div class="line">my.number.in.range=$&#123;random.int[1024,65536]&#125;</div></pre></td></tr></table></figure>
<p><code>random.int*</code>语法<code>OPEN value (,max) CLOSE</code>，<code>OPEN,CLOSE</code>可以是任何字符，<code>value,max</code>是整数。如果提供了<code>max</code>，则<code>value</code>是最小值，<code>max</code>是最大值（不包含）。</p>
<h3 id="24-2-访问命令行属性"><a href="#24-2-访问命令行属性" class="headerlink" title="24.2 访问命令行属性"></a>24.2 访问命令行属性</h3><p>默认情况下，<code>SpringApplication</code>会将任何命令行参数（以<code>--</code>开头，例如<code>--server.port=9000</code>）转换成<code>property</code>并将其添加到Spring的<code>Environment</code>中。正如前面提到的那样，命令行属性总是优先于其它的配置源。</p>
<p>如果你想命令行属性添加到<code>Environment</code>中，你可以使用<code>SpringApplication.setAddCommandLineProperties(false)</code>禁用它。</p>
<h3 id="24-3-应用属性文件"><a href="#24-3-应用属性文件" class="headerlink" title="24.3 应用属性文件"></a>24.3 应用属性文件</h3><p><code>SpringApplication</code>会从以下位置的<code>application.properties</code>文件中加载属性并将它们添加到Spring的<code>Environment</code>中：</p>
<ol>
<li><p>当前目录的子目录<code>/config</code></p>
</li>
<li><p>当前目录</p>
</li>
<li><p>classpath中的<code>/config</code>包</p>
</li>
<li><p>classpath的根目录</p>
</li>
</ol>
<p>这个列表是按优先级排序的（在更高位置的属性会重写定义在更低位置的属性）。</p>
<blockquote>
<p>你也可以使用YAML(<code>.yml</code>)文件来代替<code>.properties</code>文件。</p>
</blockquote>
<p>如果你不喜欢用<code>application.properties</code>作为配置文件的名字，你可以通过指定<code>spring.config.name</code>环境属性来来改变配置文件的名字。你也可以使用<code>spring.config.location</code>环境属性来引用一个显式的位置（目录位置或文件路径以逗号分隔）。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ java -jar myproject.jar --spring.config.name=myproject</div></pre></td></tr></table></figure>
<p>或</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ java -jar myproject.jar --spring.config.location=classpath:/default.properties,classpath:/override.properties</div></pre></td></tr></table></figure>
<blockquote>
<p><code>spring.config.name</code>和<code>spring.config.location</code>可以在早期用来决定加载哪一个文件，因此必须被定义为环境属性（通常是操作系统环境，系统属性或命令行参数）。</p>
</blockquote>
<p>如果<code>spring.config.location</code>包含目录（相对于文件而言），它们应该以<code>/</code>结尾（在加载之前，在后面添加上从<code>spring.config.name</code>中产生的名字，包括指定配置文件的名字）。在<code>spring.config.location</code>中指定的文件按原样使用，不支持指定配置文件变量，将会被任何指定配置文件的属性覆盖。</p>
<p>默认搜索路径一直用<code>classpath:,classpath:/config,file:,file:config/</code>，不管<code>spring.config.location</code>中的值。搜索路径按从低到高排序（<code>file:config/</code>最高）。如果你指定了自己的位置，它们优先于所有的默认位置并使用同样的从低到高的顺序。这样你可以在<code>application.properties</code>中为你的应用设置默认值（或你可以选择<code>spring.config.name</code>的其它生成文件基本名），在运行时用其它的文件覆盖它，同时保留默认值。</p>
<blockquote>
<p>如果你使用环境变量而不是系统属性，大多数操作系统不允许句号分隔的关键字，但你可以用下划线代替（例如，<code>SPRING_CONFIG_NAME</code>代替<code>spring.config.name</code>）。</p>
<p>如果你在容器中运行，那么JNDI属性（在<code>java:comp/env</code>中）或servlet上下文初始化参数也可以用来代替环境变量或系统属性。</p>
</blockquote>
<h3 id="24-4-特定的profile属性"><a href="#24-4-特定的profile属性" class="headerlink" title="24.4 特定的profile属性"></a>24.4 特定的profile属性</h3><p>除了<code>application.properties</code>文件之外，特定的profile属性也可以使用命名规范<code>application-{profile}.properties</code>来定义。<code>Environment</code>有一系列默认配置文件（默认为<code>[default]</code>），如果没有设置激活的配置文件，会使用默认的配置文件（例如，如果没有激活显式的配置文件，则会加载<code>application-default.properties</code>中的属性）。</p>
<p>特定的profile属性会从相同位置加载<code>application.properties</code>，特定的profile文件总是覆盖非特定的配置文件，无论特定profile文件在你打包的jar内部还是外部。</p>
<p>如果指定了几个配置文件，将会应用最后一个。例如，<code>spring.profiles.active</code>属性指定的配置文件在那些配置的文件之后通过<code>SpringApplication</code> API添加，因此优先级更高。</p>
<blockquote>
<p>如果你在<code>spring.config.location</code>中指定了任何文件，那些文件的特定profile版本将不会被考虑。如果你也想使用特定的profile属性，在<code>spring.config.location</code>中使用目录。</p>
</blockquote>
<h3 id="24-5-属性中的占位符"><a href="#24-5-属性中的占位符" class="headerlink" title="24.5 属性中的占位符"></a>24.5 属性中的占位符</h3><p>当使用<code>application.properties</code>中的值时，会通过现有的<code>Environment</code>进行过滤，因此你可以参考前面定义的值（例如从系统属性中）。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">app.name=MyApp</div><div class="line">app.description=$&#123;app.name&#125; is a Spring Boot application</div></pre></td></tr></table></figure>
<blockquote>
<p>你也可以使用这个技术来创建现有的Spring Boot属性的<code>short</code>版本。怎样使用的更多细节请看70.4小节，“Use ‘short’ command line arguments”。</p>
</blockquote>
<h3 id="24-6-使用YAML代替Properties"><a href="#24-6-使用YAML代替Properties" class="headerlink" title="24.6 使用YAML代替Properties"></a>24.6 使用YAML代替Properties</h3><p>YAML是JSON的超集，它可以用一种非常方便的形式来指定分层配置数据。当你的类路径有SnakeYAML库时，<code>SpringApplication</code>类自动支持YAML作为properties的一个替代品。</p>
<blockquote>
<p>如果你使用‘Starters’，SnakeYAML将由<code>spring-boot-starter</code>自动提供。</p>
</blockquote>
<h4 id="24-6-1-加载YAML"><a href="#24-6-1-加载YAML" class="headerlink" title="24.6.1 加载YAML"></a>24.6.1 加载YAML</h4><p>Spring框架提供了两个类用来方便的加载YAML文档。<code>YamlPropertiesFactoryBean</code>将加载YAML作为<code>Properties</code>，<code>YamlMapFactoryBean</code>将加载YAML作为<code>Map</code>。</p>
<p>例如，下面的YAML文档：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">environments:</div><div class="line">    dev:</div><div class="line">        url: http://dev.bar.com</div><div class="line">        name: Developer Setup</div><div class="line">    prod:</div><div class="line">        url: http://foo.bar.com</div><div class="line">        name: My Cool App</div></pre></td></tr></table></figure>
<p>将被转换成这些属性：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">environments.dev.url=http://dev.bar.com</div><div class="line">environments.dev.name=Developer Setup</div><div class="line">environments.prod.url=http://foo.bar.com</div><div class="line">environments.prod.name=My Cool App</div></pre></td></tr></table></figure>
<p>YAML列表通过<code>[index]</code>解引用表示为属性的key，例如这个YAML：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">my:</div><div class="line">   servers:</div><div class="line">       - dev.bar.com</div><div class="line">       - foo.bar.com</div></pre></td></tr></table></figure>
<p>将被转换成这些属性：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">my.servers[0]=dev.bar.com</div><div class="line">my.servers[1]=foo.bar.com</div></pre></td></tr></table></figure>
<p>为了像使用Spring的<code>DataBinder</code>一样（<code>@ConfigurationProperties</code>的功能）绑定这些属性，你需要在类型为<code>java.util.List</code>（或<code>Set</code>）的目标bean中有属性，你需要提供一个<code>setter</code>或用一个可变的值来对它初始化，例如，绑定上面的属性值：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">@ConfigurationProperties(prefix=&quot;my&quot;)</div><div class="line">public class Config &#123;</div><div class="line"></div><div class="line">    private List&lt;String&gt; servers = new ArrayList&lt;String&gt;();</div><div class="line"></div><div class="line">    public List&lt;String&gt; getServers() &#123;</div><div class="line">        return this.servers;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="24-6-2-在Spring-Environment中公开YAML为属性"><a href="#24-6-2-在Spring-Environment中公开YAML为属性" class="headerlink" title="24.6.2 在Spring Environment中公开YAML为属性"></a>24.6.2 在Spring Environment中公开YAML为属性</h3><p><code>YamlPropertySourceLoader</code>类可以在Spring的<code>Environment</code>中将YAML作为<code>PropertySource</code>。这允许你使用熟悉的<code>@Value</code>注解和占位符语法来访问YAML属性。</p>
<h3 id="24-6-3-多profile的YAML文档"><a href="#24-6-3-多profile的YAML文档" class="headerlink" title="24.6.3 多profile的YAML文档"></a>24.6.3 多profile的YAML文档</h3><p>你可以在单个文件中指定多个特定profile的YAML文档，当应用文档时，通过<code>spring.profiles</code>关键字来表明使用哪个文档。例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">server:</div><div class="line">    address: 192.168.1.100</div><div class="line">---</div><div class="line">spring:</div><div class="line">    profiles: development</div><div class="line">server:</div><div class="line">    address: 127.0.0.1</div><div class="line">---</div><div class="line">spring:</div><div class="line">    profiles: production</div><div class="line">server:</div><div class="line">    address: 192.168.1.120</div></pre></td></tr></table></figure>
<p>在上面的例子中，如果<code>development</code> profile被激活，<code>server.address</code>的值为<code>127.0.0.1</code>。如果<code>development</code>和<code>production</code> profile不可用，<code>server.address</code>的值为<code>192.168.1.100</code>。</p>
<p>当应用上下文启动时，如果没有显式的激活profile，则激活默认的profile。因此在这个YAML文件中我们仅在”default” profile中设置了<code>security.user.password</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">server:</div><div class="line">  port: 8000</div><div class="line">---</div><div class="line">spring:</div><div class="line">  profiles: default</div><div class="line">security:</div><div class="line">  user:</div><div class="line">    password: weak</div></pre></td></tr></table></figure>
<p>在这个例子中，密码总是设置的，因为它没有添加到如何profile中，必要时我们必须在其它的profile中显式的对它重新设置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">server:</div><div class="line">  port: 8000</div><div class="line">security:</div><div class="line">  user:</div><div class="line">    password: weak</div></pre></td></tr></table></figure>
<p>Spring profiles被设计为使用”spring.profiles”元素可以选择性的用<code>!</code>字符进行否定。如果否定的和非否定的profile指向一个单独的文档，必须至少匹配一个非否定的profile，可能没有否定的profile进行匹配。</p>
<h4 id="24-6-4-YAML缺点"><a href="#24-6-4-YAML缺点" class="headerlink" title="24.6.4 YAML缺点"></a>24.6.4 YAML缺点</h4><p>YAML文件不能通过<code>@PropertySource</code>注解进行加载。因此在这种情况下如果你需要加载值，你需要使用属性文件。</p>
<h4 id="24-6-5-合并YAML列表"><a href="#24-6-5-合并YAML列表" class="headerlink" title="24.6.5 合并YAML列表"></a>24.6.5 合并YAML列表</h4><p>正如我们上面看到的，任何YAML内容最终都要转换成属性。当通过profile重写“list“属性时，这个过程可能有违直觉。</p>
<p>例如，假设<code>MyPojo</code>对象的<code>name</code>和<code>description</code>属性默认情况下为空。从<code>FooProperties</code>使用一个<code>MyPojo</code>列表：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@ConfigurationProperties</span>(<span class="string">"foo"</span>)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FooProperties</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> List&lt;MyPojo&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> List&lt;MyPojo&gt; <span class="title">getList</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.list;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>考虑下面的配置：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">foo:</div><div class="line">  list:</div><div class="line">    - name: my name</div><div class="line">      description: my description</div><div class="line">---</div><div class="line">spring:</div><div class="line">  profiles: dev</div><div class="line">foo:</div><div class="line">  list:</div><div class="line">    - name: my another name</div></pre></td></tr></table></figure>
<p>如果<code>dev</code> profile没有激活，<code>FooProperties.list</code>将包含一个上面定义的<code>MyPojo</code>输入。然而如果<code>dev</code> profile可用，<code>lists</code>仍只包含一个输入（name为“my another name”，description为空）。这个配置将不能添加第二个<code>MyPojo</code>到<code>list</code>中，并且它将不能合并这些项。</p>
<p>当在多个profiles中指定一个集合时，将会使用最高优先级的那个集合（唯一的哪个）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">foo:</div><div class="line">  list:</div><div class="line">    - name: my name</div><div class="line">      description: my description</div><div class="line">    - name: another name</div><div class="line">      description: another description</div><div class="line">---</div><div class="line">spring:</div><div class="line">  profiles: dev</div><div class="line">foo:</div><div class="line">  list:</div><div class="line">     - name: my another name</div></pre></td></tr></table></figure>
<p>在上面的例子中，假设<code>dev</code> profile被激活，<code>FooProperties.list</code>将包含一个<code>MyPojo</code>输入（name为“my another name”，description为空）。</p>
<h3 id="24-7-类型安全的配置属性"><a href="#24-7-类型安全的配置属性" class="headerlink" title="24.7 类型安全的配置属性"></a>24.7 类型安全的配置属性</h3><p>Boot提供了一种处理属性的可替代方法，允许强类型的beans管理和验证你的应用的配置。例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@ConfigurationProperties</span>(prefix=<span class="string">"connection"</span>)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConnectionProperties</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> String username;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> InetAddress remoteAddress;</div><div class="line"></div><div class="line">    <span class="comment">// ... getters and setters</span></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>建议添加getters和setters，绑定是通过标准的Java Beans属性描述符，像在Spring MVC中一样。对于不可变类型或那些从<code>String</code>中可直接强制转换的类型，它们是强制性的。只要它们被初始化，maps，集合或数组需要getter方法，但不需要setter方法因为通过绑定起它们可以直接变化。如果有setter，可以创建Maps，集合和数组。Maps和集合可以通过getter扩展，数组扩展需要setter。如果它们有默认的构造函数，或构造函数接收可以从<code>String</code>类型强制转换的值，嵌入的POJO属性也可以创建（因此setter不是强制性的）。一些人使用Lombok项目来自动添加getter和setter。</p>
</blockquote>
<p>&nbsp;</p>
<blockquote>
<p>请看<code>@Value</code>和<code>@ConfigurationProperties</code>之间的不同。</p>
</blockquote>
<p>你也需要在<code>@EnableConfigurationProperties</code>注解中列出要注册的属性类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Configuration</span></div><div class="line"><span class="meta">@EnableConfigurationProperties</span>(ConnectionProperties.class)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConfiguration</span> </span>&#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>当<code>@ConfigurationProperties</code>以那种方式注册时，这个bean将有一个常规的名字：<code>&lt;prefix&gt;-&lt;fqn&gt;</code>，<code>&lt;prefix&gt;</code>是在<code>@ConfigurationProperties</code>注解中指定的环境关键字的前缀，<code>&lt;fqn&gt;</code>是bean的完整合格的名字。如果注解没有提供任何前缀，则只用bean的完整合格的名字。</p>
<p>在上面的例子中bean名字是<code>connection-com.example.ConnectionProperties</code>，假设<code>ConnectionProperties</code>在<code>com.example</code>包中。</p>
</blockquote>
<p>即使上面的配置会为<code>ConnectionProperties</code>创建一个正规的bean，我们建议<code>@ConfigurationProperties</code>只处理环境，特别是不从上下文中注入其它的beans。已经说过，为了任何带有<code>@ConfigurationProperties</code>注解的bean可以根据<code>Environment</code>属性进行配置，<code>@EnableConfigurationProperties</code>注解也自动应用到你的工程中。确保<code>ConnectionProperties</code>已经是一个bean，你可以简写上面的<code>MyConfiguration</code>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Component</span></div><div class="line"><span class="meta">@ConfigurationProperties</span>(prefix=<span class="string">"connection"</span>)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConnectionProperties</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">// ... getters and setters</span></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这种风格的配置在<code>SpringApplication</code>的外部化YAML配置中工作的尤其好：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"># application.yml</div><div class="line"></div><div class="line">connection:</div><div class="line">    username: admin</div><div class="line">    remoteAddress: 192.168.1.1</div><div class="line"></div><div class="line"># additional configuration as required</div></pre></td></tr></table></figure>
<p>为了同<code>@ConfigurationProperties</code> beans一起工作，你可以像任何其它bean一样以相同的方式注入它们：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">@Service</div><div class="line">public class MyService &#123;</div><div class="line"></div><div class="line">    private final ConnectionProperties connection;</div><div class="line"></div><div class="line">    @Autowired</div><div class="line">    public MyService(ConnectionProperties connection) &#123;</div><div class="line">        this.connection = connection;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">     //...</div><div class="line"></div><div class="line">    @PostConstruct</div><div class="line">    public void openConnection() &#123;</div><div class="line">        Server server = new Server();</div><div class="line">        this.connection.configure(server);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>使用<code>@ConfigurationProperties</code>也允许你生成IDEs可以使用的元数据文件。更多细节请看附录B，配置元数据附录。</p>
</blockquote>
<h4 id="24-7-1-第三方配置"><a href="#24-7-1-第三方配置" class="headerlink" title="24.7.1 第三方配置"></a>24.7.1 第三方配置</h4><p>也可以使用<code>@ConfigurationProperties</code>来注解一个类，你也可以在公有的<code>@Bean</code>方法上使用它。当你想绑定属性到你控制之外的第三方组件上时尤其有用。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">@ConfigurationProperties(prefix = &quot;foo&quot;)</div><div class="line">@Bean</div><div class="line">public FooComponent fooComponent() &#123;</div><div class="line">    ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>任何定义的带有<code>foo</code>前缀的属性都将以类似于上面的<code>ConnectionProperties</code>例子中的方式映射到<code>FooComponent</code> bean中。</p>
<h4 id="24-7-2-松散绑定"><a href="#24-7-2-松散绑定" class="headerlink" title="24.7.2 松散绑定"></a>24.7.2 松散绑定</h4><p>Spring Boot使用一些松散的规则将<code>Environment</code>属性绑定到<code>@ConfigurationProperties</code> beans上，因此不需要在<code>Environment</code>属性名和bean属性名之间进行确切的匹配。常见的有用例子包括破折号分隔（例如，context-path绑定到contextPath），大小写（例如<code>PORT</code>绑定到<code>port</code>，）环境属性。</p>
<p>例如，给定下面的<code>@ConfigurationProperties</code>类：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">@ConfigurationProperties(prefix=&quot;person&quot;)</div><div class="line">public class OwnerProperties &#123;</div><div class="line"></div><div class="line">    private String firstName;</div><div class="line"></div><div class="line">    public String getFirstName() &#123;</div><div class="line">        return this.firstName;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void setFirstName(String firstName) &#123;</div><div class="line">        this.firstName = firstName;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>下面的属性名都可以使用：</p>
<p><strong>表24.1. 松散绑定</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">Property</th>
<th style="text-align:left">Note</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">person.firstName</td>
<td style="text-align:left">标准的驼峰写法</td>
</tr>
<tr>
<td style="text-align:left">person.first-name</td>
<td style="text-align:left">破折号注解，建议在<code>.properties</code>和<code>.yml</code>文件中使用</td>
</tr>
<tr>
<td style="text-align:left">person.first_name</td>
<td style="text-align:left">下划线注解，<code>.properties</code>和<code>.yml</code>文件中的可替代写法</td>
</tr>
<tr>
<td style="text-align:left">PERSON_FIRST_NAME</td>
<td style="text-align:left">大写形式。当使用系统变量时推荐</td>
</tr>
</tbody>
</table>
<h4 id="24-7-3-属性转换"><a href="#24-7-3-属性转换" class="headerlink" title="24.7.3 属性转换"></a>24.7.3 属性转换</h4><p>当Spring绑定属性到<code>@ConfigurationProperties</code> beans时，它将试图将外部的应用属性强制转换成正确的类型。如果你需要定制类型转换你可以提供一个<code>ConversionService</code> bean（bean id为<code>conversionService</code>），或定制属性编辑器（通过<code>CustomEditorConfigurer</code> bean），或定制<code>Converters</code>（带有<code>@ConfigurationPropertiesBinding</code>注解的bean定义）。</p>
<blockquote>
<p>bean要求在应用生命周期中的早期，要确保限制<code>ConversionService</code>使用的依赖。通常，任何你要求的依赖可能在创建时不是完整初始化的。如果你定制的<code>ConversionService</code>不要求配置关键字强制转换，你可能想重新命名你定制的<code>ConversionService</code>，并且只依赖满足<code>@ConfigurationPropertiesBindings</code>的定制转换器。</p>
</blockquote>
<h4 id="24-7-4-ConfigurationProperties验证"><a href="#24-7-4-ConfigurationProperties验证" class="headerlink" title="24.7.4 @ConfigurationProperties验证"></a>24.7.4 @ConfigurationProperties验证</h4><p>Spring Boot会试图验证外部化配置，默认使用JSR-303（如果它在classpath中）。你可以简单的添加JSR-303 <code>javax.validation</code>约束注解到你的<code>@ConfigurationProperties</code>类中：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">@ConfigurationProperties(prefix=&quot;connection&quot;)</div><div class="line">public class ConnectionProperties &#123;</div><div class="line"></div><div class="line">    @NotNull</div><div class="line">    private InetAddress remoteAddress;</div><div class="line"></div><div class="line">    // ... getters and setters</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>为了验证嵌入的属性值，你必须注解相关的字段作为<code>@Valid</code>来触发它的校验。例如，在上面的<code>ConnectionProperties</code>例子上构建：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">@ConfigurationProperties(prefix=&quot;connection&quot;)</div><div class="line">public class ConnectionProperties &#123;</div><div class="line"></div><div class="line">    @NotNull</div><div class="line">    @Valid</div><div class="line">    private RemoteAddress remoteAddress;</div><div class="line"></div><div class="line">    // ... getters and setters</div><div class="line"></div><div class="line">    public static class RemoteAddress &#123;</div><div class="line"></div><div class="line">        @NotEmpty</div><div class="line">        public String hostname;</div><div class="line"></div><div class="line">        // ... getters and setters</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>通过创建一个称为<code>configurationPropertiesValidator</code>的bean定义，你也可以添加定制的Spring <code>Validator</code>。<code>@Bean</code>方法应该声明静态的。配置属性验证器在应用生命周期的早期创建，声明<code>@Bean</code>方法为静态方法，允许不必实例化<code>@Configuration</code>类就创建bean。这避免了任何早期实例化可能引起的问题。这儿有一个属性验证的例子因此你可以看一下怎样设置它</p>
<blockquote>
<p><code>spring-boot-actuator</code>模块包含一个端点，这个端点将公开所有的<code>@ConfigurationProperties</code> beans。简单的将你的web浏览器指向<code>/configprops</code>或用等价的JMX端点。更多细节请看产品级功能</p>
</blockquote>
<h4 id="24-7-5-ConfigurationProperties和-Value"><a href="#24-7-5-ConfigurationProperties和-Value" class="headerlink" title="24.7.5 @ConfigurationProperties和@Value"></a>24.7.5 @ConfigurationProperties和@Value</h4><p><code>@Value</code>是一种核心的容器功能，它不能作为类型安全配置属性提供同样的功能。下面的表中总结了<code>@ConfigurationProperties</code>和<code>@Value</code>支持的功能：</p>
<table>
<thead>
<tr>
<th style="text-align:left">功能</th>
<th style="text-align:left"><code>@ConfigurationProperties</code></th>
<th style="text-align:left"><code>@Value</code></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">松散绑定</td>
<td style="text-align:left">Yes</td>
<td style="text-align:left">No</td>
</tr>
<tr>
<td style="text-align:left">元数据支持</td>
<td style="text-align:left">Yes</td>
<td style="text-align:left">No</td>
</tr>
<tr>
<td style="text-align:left">SpEL评估</td>
<td style="text-align:left">No</td>
<td style="text-align:left">Yes</td>
</tr>
</tbody>
</table>
<p>如果你为自己的组件定义了一些配置关键字，我们建议你将它们分组到带有<code>@ConfigurationProperties</code>注解的POJO中。也请注意<code>@Value</code>不支持松散绑定，如果你需要用环境变量提供值，它不是一个好的选择。</p>
<p>最后，虽然你可以在<code>@Value</code>中写表达式，但这种表达式不能从应用属性文件中处理。</p>
<h2 id="25-Profiles"><a href="#25-Profiles" class="headerlink" title="25. Profiles"></a>25. Profiles</h2><p>Spring Profiles提供了一种隔离部分应用配置的方式，并让这些配置只在特定的环境生效。任何带有<code>@Profile</code>标记的<code>@Component</code>或<code>@Configuration</code>在加载时都会受限制：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">@Configuration</div><div class="line">@Profile(&quot;production&quot;)</div><div class="line">public class ProductionConfiguration &#123;</div><div class="line"></div><div class="line">    // ...</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>以正常的Spring方式，你可以使用<code>spring.profiles.active</code> <code>Environment</code>属性来指定激活哪一个profiles。你可以在任何常见的方式指定这个属性，例如你可以在你的<code>application.properties</code>中包含它：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">spring.profiles.active=dev,hsqldb</div></pre></td></tr></table></figure>
<p>或在命令行用<code>--spring.profiles.active=dev,hsqldb</code>指定。</p>
<h3 id="25-1-添加激活的profiles"><a href="#25-1-添加激活的profiles" class="headerlink" title="25.1 添加激活的profiles"></a>25.1 添加激活的profiles</h3><p><code>spring.profiles.active</code>属性与其它的属性一样遵循同样的排序规则，最高的<code>PropertySource</code>优先。这意味着你可以在<code>application.properties</code>指定激活的profiles，然后用命令行转换替代它们。</p>
<p>例如，当一个应用具有以下属性且运行时使用<code>--spring.profiles.active=prod</code>转换，<code>proddb</code>和<code>prodmq</code> profiles也将被激活：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">---</div><div class="line">my.property: fromyamlfile</div><div class="line">---</div><div class="line">spring.profiles: prod</div><div class="line">spring.profiles.include:</div><div class="line">  - proddb</div><div class="line">  - prodmq</div></pre></td></tr></table></figure>
<blockquote>
<p>记住可以在YAML文档中定义<code>spring.profiles</code>来决定在配置中包含特定的文档。更多细节请看70.7小节，“根据环境更改配置”。</p>
</blockquote>
<h3 id="25-2-以编程方式设置profiles"><a href="#25-2-以编程方式设置profiles" class="headerlink" title="25.2 以编程方式设置profiles"></a>25.2 以编程方式设置profiles</h3><p>你可以在你的应用运行之前以编程的方式调用<code>SpringApplication.setAdditionalProfiles(…​)</code>来设置激活的profiles。也可以使用Spring的<code>ConfigurableEnvironment</code>接口来激活profiles。</p>
<h3 id="25-3-指定profile的配置文件"><a href="#25-3-指定profile的配置文件" class="headerlink" title="25.3 指定profile的配置文件"></a>25.3 指定profile的配置文件</h3><p><code>application.properties</code>(或<code>application.yml</code>)和通过<code>@ConfigurationProperties</code>引用的文件的特定profiles变种都被当做文件进行加载。更多细节请看24.4小节，“Profile-specific properties”。</p>
<h2 id="26-Logging"><a href="#26-Logging" class="headerlink" title="26. Logging"></a>26. Logging</h2><p>Spring Boot所有的内部日志都采用Commons Logging，但开放了底层的日志实现。提供了对Java Util Logging，Log4J2和Logback的默认实现。在每个logger中都预先配置使用控制台作为输出，同时也可用可选的文件输出。</p>
<p>默认情况下，如果使用<code>Starters</code>，Logback将作为日志。也要包含恰当的Logback规则来保证依赖库使用Java Util Logging，Commons Logging，Log4J或SLF4J都能正确工作。</p>
<blockquote>
<p>在Java中有许多日志框架可用。不必担心上面的列表看起来有点混乱。通常情况下你不需要改变你的日志依赖，Spring Boot默认情况下能很好的工作。</p>
</blockquote>
<h3 id="26-1-Log格式"><a href="#26-1-Log格式" class="headerlink" title="26.1 Log格式"></a>26.1 Log格式</h3><p>Spring Boot默认的日志输出看起来如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">2014-03-05 10:57:51.112  INFO 45469 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet Engine: Apache Tomcat/7.0.52</div><div class="line">2014-03-05 10:57:51.253  INFO 45469 --- [ost-startStop-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext</div><div class="line">2014-03-05 10:57:51.253  INFO 45469 --- [ost-startStop-1] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 1358 ms</div><div class="line">2014-03-05 10:57:51.698  INFO 45469 --- [ost-startStop-1] o.s.b.c.e.ServletRegistrationBean        : Mapping servlet: &apos;dispatcherServlet&apos; to [/]</div><div class="line">2014-03-05 10:57:51.702  INFO 45469 --- [ost-startStop-1] o.s.b.c.embedded.FilterRegistrationBean  : Mapping filter: &apos;hiddenHttpMethodFilter&apos; to: [/*]</div></pre></td></tr></table></figure>
<p>下面的是输出项：</p>
<ul>
<li><p>Date and Time — 精确到毫秒且容易排序。</p>
</li>
<li><p>Log级别 — ERROR，WARN，INFO，DEBUG或TRACE。</p>
</li>
<li><p>进程ID。</p>
</li>
<li><p><code>---</code>分隔符来区分真正的日志信息的开始。</p>
</li>
<li><p>线程名称 — 用方括号包裹(在控制台输出中经常是缩减的)。</p>
</li>
<li><p>Logger名称 — 源类名(经常是简写)。</p>
</li>
<li><p>日志信息。</p>
</li>
</ul>
<blockquote>
<p>Logback没有FATAL级别（它映射到ERROR）。</p>
</blockquote>
<h3 id="26-2-控制台输出"><a href="#26-2-控制台输出" class="headerlink" title="26.2 控制台输出"></a>26.2 控制台输出</h3><p>默认的日志配置会将信息输出到控制台。默认情况下会输出<code>ERROR</code>，<code>WARN</code>和<code>INFO</code>级别的信息。你也可以通过<code>--debug</code>来启动你的应用，从而启用“debug”模式。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ java -jar myapp.jar --debug</div></pre></td></tr></table></figure>
<blockquote>
<p>你也可以在<code>application.properties</code>指定<code>debug=true</code>。</p>
</blockquote>
<p>当启用调试模式时，配置选择的核心logger（嵌入式容器，Hibernate和Spring Boot）来输出更多的信息。启动调试模式不会将你的应用配置成输出所有<code>DEBUG</code>级别的信息。</p>
<p>或者，你可以用<code>--trace</code>标记（或在<code>application.properties</code>中添加<code>trace=true</code>）启动你的应用，从而启用“trace”模式。这将在选择的核心logger中（嵌入式容器，Hibernate模式生成和整个Spring文件夹）启用trace日志。</p>
<h4 id="26-2-1-颜色编码输出"><a href="#26-2-1-颜色编码输出" class="headerlink" title="26.2.1 颜色编码输出"></a>26.2.1 颜色编码输出</h4><p>如果你的终端支持ANSI，颜色输出可以用来辅助阅读。你可以为<code>spring.output.ansi.enabled</code>设置一个支持值来覆盖自动检测。</p>
<p>颜色编码用<code>%clr</code>转换词来配置。最简单的形式是根据日志级别进行颜色输出，例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">%clr(%5p)</div></pre></td></tr></table></figure>
<p>日志级别与颜色的映射如下：</p>
<table>
<thead>
<tr>
<th style="text-align:left">Level</th>
<th style="text-align:left">Color</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">FATAL</td>
<td style="text-align:left">Red</td>
</tr>
<tr>
<td style="text-align:left">ERROR</td>
<td style="text-align:left">Red</td>
</tr>
<tr>
<td style="text-align:left">WARN</td>
<td style="text-align:left">Yellow</td>
</tr>
<tr>
<td style="text-align:left">INFO</td>
<td style="text-align:left">Green</td>
</tr>
<tr>
<td style="text-align:left">DEBUG</td>
<td style="text-align:left">Green</td>
</tr>
<tr>
<td style="text-align:left">TRACE</td>
<td style="text-align:left">Green</td>
</tr>
</tbody>
</table>
<p>或者，你可以通过在转换器中提供选项来指定应该试用的颜色或风格。例如，为了使文本显示黄色：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">%clr(%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125;)&#123;yellow&#125;</div></pre></td></tr></table></figure>
<p>支持下面的颜色和风格：</p>
<ul>
<li>blue</li>
<li>cyan</li>
<li>faint</li>
<li>green</li>
<li>magenta</li>
<li>red</li>
<li>yellow</li>
</ul>
<h3 id="26-3-文件输出"><a href="#26-3-文件输出" class="headerlink" title="26.3 文件输出"></a>26.3 文件输出</h3><p>默认情况下，Spring Boot只能输出日志到控制台，不会写入日志文件。如果你想除了控制台之外还想写日志文件，你需要设置<code>logging.file</code>或<code>logging.path</code>属性（例如，在你的<code>application.properties</code>）。</p>
<p>下表显示了<code>logging.*</code>属性怎样在一起使用：</p>
<p><strong>表 26.1. Logging属性</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">logging.file</th>
<th style="text-align:left">logging.path</th>
<th style="text-align:left">Example</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">(none</td>
<td style="text-align:left">(none)</td>
<td style="text-align:left"></td>
<td style="text-align:left">只输出到控制台</td>
</tr>
<tr>
<td style="text-align:left">指定文件</td>
<td style="text-align:left">(none)</td>
<td style="text-align:left">my.log</td>
<td style="text-align:left">写入指定的日志文件。名字可以是一个绝对位置或相对于当前目录。</td>
</tr>
<tr>
<td style="text-align:left">(none)</td>
<td style="text-align:left">Specific directory</td>
<td style="text-align:left">/var/log</td>
<td style="text-align:left">写<code>spring.log</code>到一个指定的目录。名字可以是一个绝对位置或相对于当前目录。</td>
</tr>
</tbody>
</table>
<p>当日志文件达到10M时日志文件将循环，至于控制台输出，默认情况下只输出<code>ERROR</code>，<code>WARN</code>和<code>INFO</code>级别的信息。</p>
<blockquote>
<p>日志系统在应用程序的生命周期早期进行初始化，同样地，通过<code>@PropertySource</code>注解加载的属性文件中将不会发现日志属性。</p>
</blockquote>
<p>&nbsp;</p>
<blockquote>
<p>日志属性独立于真正的日志基础架构之外。因此，Spring Boot不管理特定的配置主键（例如Logback的<code>logback.configurationFile</code>）。</p>
</blockquote>
<h3 id="26-4-日志级别"><a href="#26-4-日志级别" class="headerlink" title="26.4 日志级别"></a>26.4 日志级别</h3><p>Spring支持的所有日志系统都可以在Spring的<code>Environment</code>中设置日志级别（例如在<code>application.properties</code>设置），使用<code>logging.level.*=LEVEL</code>进行设置，<code>LEVEL</code>是TRACE，DEBUG，INFO，WARN，ERROR，FATAL，OFF中的一个。<code>root</code>日志器可以用<code>logging.level.root</code>来配置。例如在<code>application.properties</code>中：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">logging.level.root=WARN</div><div class="line">logging.level.org.springframework.web=DEBUG</div><div class="line">logging.level.org.hibernate=ERROR</div></pre></td></tr></table></figure>
<blockquote>
<p>默认情况下Spring Boot重新映射Thymeleaf的<code>INFO</code>信息，为了它们能在<code>DEBUG</code>级别进行输出。这能帮助减少标准日志输出中的噪声。关于怎样在你自己的配置中使用重新映射的更多细节请看<code>LevelRemappingAppender</code>。</p>
</blockquote>
<h3 id="26-5-定制日志配置"><a href="#26-5-定制日志配置" class="headerlink" title="26.5 定制日志配置"></a>26.5 定制日志配置</h3><p>在类路径中通过包含恰当的库可以激活各种日志系统，在类路径的根目录中提供一个合适的配置文件可以对日志系统进行更进一步的定制，或者将配置文件放在Spring <code>Environment</code>的<code>logging.config</code>属性中指定的位置。</p>
<p>你可以使用系统属性<code>org.springframework.boot.logging.LoggingSystem</code>来强制Spring Boot使用一个特定的日志系统。它的值应该是全限定类名的<code>LoggingSystem</code>实现。你也可以通过使用值<code>none</code>来完全禁用Spring Boot的日志配置。</p>
<blockquote>
<p>由于日志是在<code>ApplicationContext</code>创建之前初始化，因此不可能从Spring <code>@Configuration</code>文件中的<code>@PropertySources</code>来控制日志。系统属性和传统的Spring Boot外部配置文件可以工作的很好。</p>
</blockquote>
<p>根据你的日志系统，将会加载下面的文件：</p>
<table>
<thead>
<tr>
<th style="text-align:left">Logging System</th>
<th style="text-align:left">Customization</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Logback</td>
<td style="text-align:left">logback-spring.xml, logback-spring.groovy, logback.xml or logback.groovy</td>
</tr>
<tr>
<td style="text-align:left">Log4j2</td>
<td style="text-align:left">log4j2-spring.xml or log4j2.xml</td>
</tr>
<tr>
<td style="text-align:left">JDK (Java Util Logging)</td>
<td style="text-align:left">logging.properties</td>
</tr>
</tbody>
</table>
<blockquote>
<p>我们建议你尽可能的使用<code>-spring</code>变种来进行日志配置（例如，<code>logback-spring.xml</code>而不是<code>logback.xml</code>）。如果你在使用标准的配置路径，Spring不能完全控制日志的初始化。</p>
</blockquote>
<p>&nbsp;</p>
<blockquote>
<p>在Java Java Util Logging中存在类加载问题，当从<code>executable jar</code>运行时会引起问题。我们建议你尽可能的避免它。</p>
</blockquote>
<p>为了帮助定制一些其它属性，从Spring <code>Environment</code>中转移到系统属性中：</p>
<table>
<thead>
<tr>
<th style="text-align:left">Spring Environment</th>
<th style="text-align:left">System Property</th>
<th style="text-align:left">Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">logging.exception-conversion-word</td>
<td style="text-align:left">LOG_EXCEPTION_CONVERSION_WORD</td>
<td style="text-align:left">当日志出现异常时会用到这个转换词。</td>
</tr>
<tr>
<td style="text-align:left">logging.file</td>
<td style="text-align:left">LOG_FILE</td>
<td style="text-align:left">如果定义了，会在默认的日志配置中使用。</td>
</tr>
<tr>
<td style="text-align:left">logging.path</td>
<td style="text-align:left">LOG_PATH</td>
<td style="text-align:left">如果定义了，会在默认的日志配置中使用。</td>
</tr>
<tr>
<td style="text-align:left">logging.pattern.console</td>
<td style="text-align:left">CONSOLE_LOG_PATTERN</td>
<td style="text-align:left">用在控制台中的日志模式(stdout)。(只支持默认的Logback设置。)</td>
</tr>
<tr>
<td style="text-align:left">logging.pattern.file</td>
<td style="text-align:left">FILE_LOG_PATTERN</td>
<td style="text-align:left">用在文件中的日志模式 (如果启用<code>LOG_FILE</code>)。(只支持默认的Logback设置。)</td>
</tr>
<tr>
<td style="text-align:left">logging.pattern.level</td>
<td style="text-align:left">LOG_LEVEL_PATTERN</td>
<td style="text-align:left">这种模式用来实施日志级别(默认<code>%5p</code>)。 (只支持默认的Logback设置。)</td>
</tr>
<tr>
<td style="text-align:left">PID</td>
<td style="text-align:left">PID</td>
<td style="text-align:left">当前的进程ID</td>
</tr>
</tbody>
</table>
<p>当转换配置文件时，所有的日志系统都支持查询系统属性。例如<code>spring-boot.jar</code>的默认配置。</p>
<blockquote>
<p>如果你在日志属性中想使用占位符，你应该试用Spring Boot的语法而不是底层框架的语法。尤其是，如果你在使用Logback，你应该使用<code>:</code>作为属性名和默认值之间的分隔符，而不是<code>:-</code>。</p>
</blockquote>
<p>&nbsp;</p>
<blockquote>
<p>你可以通过重写<code>LOG_LEVEL_PATTERN</code>（或Logback中的<code>logging.pattern.level</code>）来添加MDC和其它的专门内容来日志行中。例如，你可以使用<code>logging.pattern.level=user:%X{user} %5p</code>，默认的日志形式将包含MDC输入，如果它存在的话，例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">2015-09-30 12:30:04.031 user:juergen INFO 22174 --- [  nio-8080-exec-0] demo.Controller</div><div class="line">Handling authenticated request</div></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="26-6-Logback扩展"><a href="#26-6-Logback扩展" class="headerlink" title="26.6 Logback扩展"></a>26.6 Logback扩展</h3><p>Spring Boot包含许多Logback的扩展，这有助于进行更高级的配置。你可以在你的<code>logback-spring.xml</code>配置文件中使用这些扩展。</p>
<blockquote>
<p>你不能在标准的<code>logback.xml</code>配置文件中使用扩展，因为它加载的太早了。你需要使用<code>logback-spring.xml</code>或定义<code>logging.config</code>属性。</p>
</blockquote>
<h4 id="26-6-1-特定profile的配置"><a href="#26-6-1-特定profile的配置" class="headerlink" title="26.6.1 特定profile的配置"></a>26.6.1 特定profile的配置</h4><p><code>&lt;springProfile&gt;</code>标签允许你自由的包含或排除基于激活的Spring profiles的配置的一部分。在<code>&lt;configuration&gt;</code>元素的任何地方都支持Profile部分。使用<code>name</code>属性来指定哪一个profile接受配置。多个profiles可以用一个逗号分隔的列表来指定。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&lt;springProfile name=&quot;staging&quot;&gt;</div><div class="line">    &lt;!-- configuration to be enabled when the &quot;staging&quot; profile is active --&gt;</div><div class="line">&lt;/springProfile&gt;</div><div class="line"></div><div class="line">&lt;springProfile name=&quot;dev, staging&quot;&gt;</div><div class="line">    &lt;!-- configuration to be enabled when the &quot;dev&quot; or &quot;staging&quot; profiles are active --&gt;</div><div class="line">&lt;/springProfile&gt;</div><div class="line"></div><div class="line">&lt;springProfile name=&quot;!production&quot;&gt;</div><div class="line">    &lt;!-- configuration to be enabled when the &quot;production&quot; profile is not active --&gt;</div><div class="line">&lt;/springProfile&gt;</div></pre></td></tr></table></figure>
<h4 id="26-6-2-Environment属性"><a href="#26-6-2-Environment属性" class="headerlink" title="26.6.2 Environment属性"></a>26.6.2 Environment属性</h4><p><code>&lt;springProperty&gt;</code>标签允许你在Logback使用从Spring <code>Environment</code>获得的属性。如果你想在你的Logback配置中访问<code>application.properties</code>文件中的属性，这是非常有用的。这个标签与Logback的标准<code>&lt;property&gt;</code>标签的作用方式类似，但不是为你指定的<code>source</code>属性（从<code>Environment</code>中）指定一个直接的<code>value</code>。如果你需要在某个地方而不是在<code>local</code>作用域中存储属性，你可以使用<code>scope</code>属性。如果你需要一个备用值以防属性没有在<code>Environment</code>中设置，你可以使用<code>defaultValue</code>属性。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;springProperty scope=&quot;context&quot; name=&quot;fluentHost&quot; source=&quot;myapp.fluentd.host&quot;</div><div class="line">        defaultValue=&quot;localhost&quot;/&gt;</div><div class="line">&lt;appender name=&quot;FLUENT&quot; class=&quot;ch.qos.logback.more.appenders.DataFluentAppender&quot;&gt;</div><div class="line">    &lt;remoteHost&gt;$&#123;fluentHost&#125;&lt;/remoteHost&gt;</div><div class="line">    ...</div><div class="line">&lt;/appender&gt;</div></pre></td></tr></table></figure>
<blockquote>
<p><code>RelaxedPropertyResolver</code>是用来访问<code>Environment</code>属性。如果在破折号符号中指定了<code>source</code>，则会尝试所有的不严格的变种（<code>myPropertyName</code>，<code>MY_PROPERTY_NAME</code>等）。</p>
</blockquote>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>


    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Spring-Boot/" rel="tag"># Spring Boot</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/10/08/2016-10-8-Spring Boot 2.0.0参考手册/" rel="next" title="Spring Boot 2.0.0参考手册_中英文对照_持续更新">
                <i class="fa fa-chevron-left"></i> Spring Boot 2.0.0参考手册_中英文对照_持续更新
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/10/08/2016-10-8-Spring Boot 2.0.0参考手册_中英文对照_Part I/" rel="prev" title="Spring Boot 2.0.0参考手册_中英文对照_Part I">
                Spring Boot 2.0.0参考手册_中英文对照_Part I <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
        <div class="ds-share flat" data-thread-key="2016/10/08/2016-10-8-Spring Boot 2.0.0参考手册_中文版/"
     data-title="Spring Boot 2.0.0参考手册_中文版_持续更新"
     data-content=""
     data-url="noahsnail.com/2016/10/08/2016-10-8-Spring Boot 2.0.0参考手册_中文版/">
  <div class="ds-share-inline">
    <ul  class="ds-share-icons-16">

      <li data-toggle="ds-share-icons-more"><a class="ds-more" href="javascript:void(0);">分享到：</a></li>
      <li><a class="ds-weibo" href="javascript:void(0);" data-service="weibo">微博</a></li>
      <li><a class="ds-qzone" href="javascript:void(0);" data-service="qzone">QQ空间</a></li>
      <li><a class="ds-qqt" href="javascript:void(0);" data-service="qqt">腾讯微博</a></li>
      <li><a class="ds-wechat" href="javascript:void(0);" data-service="wechat">微信</a></li>

    </ul>
    <div class="ds-share-icons-more">
    </div>
  </div>
</div>
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2016/10/08/2016-10-8-Spring Boot 2.0.0参考手册_中文版/"
           data-title="Spring Boot 2.0.0参考手册_中文版_持续更新" data-url="noahsnail.com/2016/10/08/2016-10-8-Spring Boot 2.0.0参考手册_中文版/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="Tyan" />
          <p class="site-author-name" itemprop="name">Tyan</p>
          <p class="site-description motion-element" itemprop="description">工作中的技术总结</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">210</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">20</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">32</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#第一部分：Spring-Boot文档"><span class="nav-number">1.</span> <span class="nav-text">第一部分：Spring Boot文档</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-关于文档"><span class="nav-number">1.1.</span> <span class="nav-text">1. 关于文档</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-获得帮助"><span class="nav-number">1.2.</span> <span class="nav-text">2. 获得帮助</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-第一步"><span class="nav-number">1.3.</span> <span class="nav-text">3. 第一步</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-使用Spring-Boot"><span class="nav-number">1.4.</span> <span class="nav-text">4. 使用Spring Boot</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-了解Spring-Boot特性"><span class="nav-number">1.5.</span> <span class="nav-text">5. 了解Spring Boot特性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-变为产品"><span class="nav-number">1.6.</span> <span class="nav-text">6. 变为产品</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-高级课题"><span class="nav-number">1.7.</span> <span class="nav-text">7. 高级课题</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Part-II-开始"><span class="nav-number">2.</span> <span class="nav-text">Part II 开始</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#8-Spring-Boot介绍"><span class="nav-number">2.1.</span> <span class="nav-text">8. Spring Boot介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-系统需求"><span class="nav-number">2.2.</span> <span class="nav-text">9. 系统需求</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#9-1-Servlet容器"><span class="nav-number">2.2.1.</span> <span class="nav-text">9.1 Servlet容器</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-安装Spring-Boot"><span class="nav-number">2.3.</span> <span class="nav-text">10. 安装Spring Boot</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#10-1-Java开发者的安装说明"><span class="nav-number">2.3.1.</span> <span class="nav-text">10.1 Java开发者的安装说明</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#10-1-1-Maven安装"><span class="nav-number">2.3.1.1.</span> <span class="nav-text">10.1.1 Maven安装</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#10-1-2-Gradle安装"><span class="nav-number">2.3.1.2.</span> <span class="nav-text">10.1.2 Gradle安装</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-2-安装Spring-Boot-CLI"><span class="nav-number">2.3.2.</span> <span class="nav-text">10.2 安装Spring Boot CLI</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#10-2-1-手动安装"><span class="nav-number">2.3.2.1.</span> <span class="nav-text">10.2.1 手动安装</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#10-2-2-使用SDKMAN-安装"><span class="nav-number">2.3.2.2.</span> <span class="nav-text">10.2.2 使用SDKMAN!安装</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#10-2-3-OSX-Homebrew安装"><span class="nav-number">2.3.2.3.</span> <span class="nav-text">10.2.3 OSX Homebrew安装</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#10-2-4-MacPorts安装"><span class="nav-number">2.3.2.4.</span> <span class="nav-text">10.2.4 MacPorts安装</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#10-2-5-命令行实现"><span class="nav-number">2.3.2.5.</span> <span class="nav-text">10.2.5 命令行实现</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#10-2-6-快速Spring-CLI例子"><span class="nav-number">2.3.2.6.</span> <span class="nav-text">10.2.6 快速Spring CLI例子</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-3-从早期的Spring-Boot升级"><span class="nav-number">2.3.3.</span> <span class="nav-text">10.3 从早期的Spring Boot升级</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11-开发你的第一个Spring-Boot应用"><span class="nav-number">2.4.</span> <span class="nav-text">11. 开发你的第一个Spring Boot应用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#11-1-创建POM文件"><span class="nav-number">2.4.1.</span> <span class="nav-text">11.1 创建POM文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11-2-添加classpath依赖"><span class="nav-number">2.4.2.</span> <span class="nav-text">11.2 添加classpath依赖</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11-3-写代码"><span class="nav-number">2.4.3.</span> <span class="nav-text">11.3 写代码</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#11-3-1-RestController和-RequestMapping注解"><span class="nav-number">2.4.3.1.</span> <span class="nav-text">11.3.1 @RestController和@RequestMapping注解</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#11-3-2-EnableAutoConfiguration注解"><span class="nav-number">2.4.3.2.</span> <span class="nav-text">11.3.2 @EnableAutoConfiguration注解</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#11-3-3-The-“main”-method"><span class="nav-number">2.4.3.3.</span> <span class="nav-text">11.3.3 The “main” method</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#11-4-运行这个例子"><span class="nav-number">2.4.3.4.</span> <span class="nav-text">11.4 运行这个例子</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11-5-创建一个可执行的jar"><span class="nav-number">2.4.4.</span> <span class="nav-text">11.5 创建一个可执行的jar</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12-接下来读什么"><span class="nav-number">2.5.</span> <span class="nav-text">12. 接下来读什么</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Part-III-使用Spring-Boot"><span class="nav-number">3.</span> <span class="nav-text">Part III. 使用Spring Boot</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#13-构建系统"><span class="nav-number">3.1.</span> <span class="nav-text">13. 构建系统</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#13-1-依赖管理"><span class="nav-number">3.1.1.</span> <span class="nav-text">13.1 依赖管理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13-2-Maven"><span class="nav-number">3.1.2.</span> <span class="nav-text">13.2 Maven</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#13-2-1-继承starter-parent"><span class="nav-number">3.1.2.1.</span> <span class="nav-text">13.2.1 继承starter parent</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#13-2-2-没有父POM的情况下使用Spring-Boot"><span class="nav-number">3.1.2.2.</span> <span class="nav-text">13.2.2 没有父POM的情况下使用Spring Boot</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#13-2-3-更改Java版本"><span class="nav-number">3.1.2.3.</span> <span class="nav-text">13.2.3 更改Java版本</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#13-2-4-使用Spring-Boot-Maven插件"><span class="nav-number">3.1.2.4.</span> <span class="nav-text">13.2.4 使用Spring Boot Maven插件</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13-3-Gradle"><span class="nav-number">3.1.3.</span> <span class="nav-text">13.3 Gradle</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13-4-Ant"><span class="nav-number">3.1.4.</span> <span class="nav-text">13.4 Ant</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13-5-Starters"><span class="nav-number">3.1.5.</span> <span class="nav-text">13.5 Starters</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#14-组织你的代码"><span class="nav-number">3.2.</span> <span class="nav-text">14. 组织你的代码</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#14-1-使用“default”包"><span class="nav-number">3.2.1.</span> <span class="nav-text">14.1 使用“default”包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#14-2-定义主应用类"><span class="nav-number">3.2.2.</span> <span class="nav-text">14.2 定义主应用类</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#15-配置类"><span class="nav-number">3.3.</span> <span class="nav-text">15. 配置类</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#15-1-导入额外的配置类"><span class="nav-number">3.3.1.</span> <span class="nav-text">15.1 导入额外的配置类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#15-2-导入XML配置"><span class="nav-number">3.3.2.</span> <span class="nav-text">15.2 导入XML配置</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#16-自动配置"><span class="nav-number">3.4.</span> <span class="nav-text">16. 自动配置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#16-1-逐渐替换自动配置"><span class="nav-number">3.4.1.</span> <span class="nav-text">16.1 逐渐替换自动配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#16-2-禁用特定的自动配置"><span class="nav-number">3.4.2.</span> <span class="nav-text">16.2 禁用特定的自动配置</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#17-Spring-Beans和依赖注入"><span class="nav-number">3.5.</span> <span class="nav-text">17. Spring Beans和依赖注入</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#18-使用-SpringBootApplication注解"><span class="nav-number">3.6.</span> <span class="nav-text">18. 使用@SpringBootApplication注解</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#19-运行你自己的应用"><span class="nav-number">3.7.</span> <span class="nav-text">19. 运行你自己的应用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#19-1-从IDE运行"><span class="nav-number">3.7.1.</span> <span class="nav-text">19.1 从IDE运行</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#19-2-运行一个打包的应用"><span class="nav-number">3.7.2.</span> <span class="nav-text">19.2 运行一个打包的应用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#19-3-使用Maven插件"><span class="nav-number">3.7.3.</span> <span class="nav-text">19.3 使用Maven插件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#19-4-使用Gradle插件"><span class="nav-number">3.7.4.</span> <span class="nav-text">19.4 使用Gradle插件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#19-5-热交换"><span class="nav-number">3.7.5.</span> <span class="nav-text">19.5 热交换</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#20-开发者工具"><span class="nav-number">3.8.</span> <span class="nav-text">20. 开发者工具</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#20-2-自动重启"><span class="nav-number">3.8.1.</span> <span class="nav-text">20.2 自动重启</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#20-2-1-例外资源"><span class="nav-number">3.8.1.1.</span> <span class="nav-text">20.2.1 例外资源</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#20-2-2-监控其它路径"><span class="nav-number">3.8.1.2.</span> <span class="nav-text">20.2.2 监控其它路径</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#20-2-3-禁用重启"><span class="nav-number">3.8.1.3.</span> <span class="nav-text">20.2.3 禁用重启</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#20-2-4-使用触发器文件"><span class="nav-number">3.8.1.4.</span> <span class="nav-text">20.2.4 使用触发器文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#20-2-5-定制重启类加载器"><span class="nav-number">3.8.1.5.</span> <span class="nav-text">20.2.5 定制重启类加载器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#20-2-6-已知的限制"><span class="nav-number">3.8.1.6.</span> <span class="nav-text">20.2.6 已知的限制</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#20-3-实时重载"><span class="nav-number">3.8.2.</span> <span class="nav-text">20.3 实时重载</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#20-4-全局设置"><span class="nav-number">3.8.3.</span> <span class="nav-text">20.4 全局设置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#20-5-远程应用"><span class="nav-number">3.8.4.</span> <span class="nav-text">20.5 远程应用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#20-5-1-运行远程客户端应用"><span class="nav-number">3.8.4.1.</span> <span class="nav-text">20.5.1 运行远程客户端应用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#20-5-2-远程更新"><span class="nav-number">3.8.4.2.</span> <span class="nav-text">20.5.2 远程更新</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#20-5-3-远程调试通道"><span class="nav-number">3.8.4.3.</span> <span class="nav-text">20.5.3 远程调试通道</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#21-将你的应用打包成产品"><span class="nav-number">3.9.</span> <span class="nav-text">21. 将你的应用打包成产品</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#22-接下来读什么"><span class="nav-number">3.10.</span> <span class="nav-text">22. 接下来读什么</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Part-IV-Spring-Boot特性"><span class="nav-number">4.</span> <span class="nav-text">Part IV. Spring Boot特性</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#23-SpringApplication"><span class="nav-number">4.1.</span> <span class="nav-text">23. SpringApplication</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#23-1-启动失败"><span class="nav-number">4.1.1.</span> <span class="nav-text">23.1 启动失败</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#23-2-定制Banner"><span class="nav-number">4.1.2.</span> <span class="nav-text">23.2 定制Banner</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#23-3-定制SpringApplication"><span class="nav-number">4.1.3.</span> <span class="nav-text">23.3 定制SpringApplication</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#23-4-流畅的构建器API"><span class="nav-number">4.1.4.</span> <span class="nav-text">23.4 流畅的构建器API</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#23-5-应用事件和监听器"><span class="nav-number">4.1.5.</span> <span class="nav-text">23.5 应用事件和监听器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#23-6-Web环境"><span class="nav-number">4.1.6.</span> <span class="nav-text">23.6 Web环境</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#23-7-访问应用参数"><span class="nav-number">4.1.7.</span> <span class="nav-text">23.7 访问应用参数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#23-8-使用ApplicationRunner或CommandLineRunner"><span class="nav-number">4.1.8.</span> <span class="nav-text">23.8 使用ApplicationRunner或CommandLineRunner</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#23-9-应用退出"><span class="nav-number">4.1.9.</span> <span class="nav-text">23.9 应用退出</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#23-10-Admin功能"><span class="nav-number">4.1.10.</span> <span class="nav-text">23.10 Admin功能</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#24-外部配置"><span class="nav-number">4.2.</span> <span class="nav-text">24. 外部配置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#24-1-配置随机值"><span class="nav-number">4.2.1.</span> <span class="nav-text">24.1 配置随机值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#24-2-访问命令行属性"><span class="nav-number">4.2.2.</span> <span class="nav-text">24.2 访问命令行属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#24-3-应用属性文件"><span class="nav-number">4.2.3.</span> <span class="nav-text">24.3 应用属性文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#24-4-特定的profile属性"><span class="nav-number">4.2.4.</span> <span class="nav-text">24.4 特定的profile属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#24-5-属性中的占位符"><span class="nav-number">4.2.5.</span> <span class="nav-text">24.5 属性中的占位符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#24-6-使用YAML代替Properties"><span class="nav-number">4.2.6.</span> <span class="nav-text">24.6 使用YAML代替Properties</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#24-6-1-加载YAML"><span class="nav-number">4.2.6.1.</span> <span class="nav-text">24.6.1 加载YAML</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#24-6-2-在Spring-Environment中公开YAML为属性"><span class="nav-number">4.2.7.</span> <span class="nav-text">24.6.2 在Spring Environment中公开YAML为属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#24-6-3-多profile的YAML文档"><span class="nav-number">4.2.8.</span> <span class="nav-text">24.6.3 多profile的YAML文档</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#24-6-4-YAML缺点"><span class="nav-number">4.2.8.1.</span> <span class="nav-text">24.6.4 YAML缺点</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#24-6-5-合并YAML列表"><span class="nav-number">4.2.8.2.</span> <span class="nav-text">24.6.5 合并YAML列表</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#24-7-类型安全的配置属性"><span class="nav-number">4.2.9.</span> <span class="nav-text">24.7 类型安全的配置属性</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#24-7-1-第三方配置"><span class="nav-number">4.2.9.1.</span> <span class="nav-text">24.7.1 第三方配置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#24-7-2-松散绑定"><span class="nav-number">4.2.9.2.</span> <span class="nav-text">24.7.2 松散绑定</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#24-7-3-属性转换"><span class="nav-number">4.2.9.3.</span> <span class="nav-text">24.7.3 属性转换</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#24-7-4-ConfigurationProperties验证"><span class="nav-number">4.2.9.4.</span> <span class="nav-text">24.7.4 @ConfigurationProperties验证</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#24-7-5-ConfigurationProperties和-Value"><span class="nav-number">4.2.9.5.</span> <span class="nav-text">24.7.5 @ConfigurationProperties和@Value</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#25-Profiles"><span class="nav-number">4.3.</span> <span class="nav-text">25. Profiles</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#25-1-添加激活的profiles"><span class="nav-number">4.3.1.</span> <span class="nav-text">25.1 添加激活的profiles</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#25-2-以编程方式设置profiles"><span class="nav-number">4.3.2.</span> <span class="nav-text">25.2 以编程方式设置profiles</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#25-3-指定profile的配置文件"><span class="nav-number">4.3.3.</span> <span class="nav-text">25.3 指定profile的配置文件</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#26-Logging"><span class="nav-number">4.4.</span> <span class="nav-text">26. Logging</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#26-1-Log格式"><span class="nav-number">4.4.1.</span> <span class="nav-text">26.1 Log格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#26-2-控制台输出"><span class="nav-number">4.4.2.</span> <span class="nav-text">26.2 控制台输出</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#26-2-1-颜色编码输出"><span class="nav-number">4.4.2.1.</span> <span class="nav-text">26.2.1 颜色编码输出</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#26-3-文件输出"><span class="nav-number">4.4.3.</span> <span class="nav-text">26.3 文件输出</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#26-4-日志级别"><span class="nav-number">4.4.4.</span> <span class="nav-text">26.4 日志级别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#26-5-定制日志配置"><span class="nav-number">4.4.5.</span> <span class="nav-text">26.5 定制日志配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#26-6-Logback扩展"><span class="nav-number">4.4.6.</span> <span class="nav-text">26.6 Logback扩展</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#26-6-1-特定profile的配置"><span class="nav-number">4.4.6.1.</span> <span class="nav-text">26.6.1 特定profile的配置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#26-6-2-Environment属性"><span class="nav-number">4.4.6.2.</span> <span class="nav-text">26.6.2 Environment属性</span></a></li></ol></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2016 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Tyan</span>
</div>



        

<div class="busuanzi-count">

  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv"><i class="fa fa-user"></i><span class="busuanzi-value" id="busuanzi_value_site_uv"></span></span>
  

  
    <span class="site-pv"><i class="fa fa-eye"></i><span class="busuanzi-value" id="busuanzi_value_site_pv"></span></span>
  
  
</div>



        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"noahsnail"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  








  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  
<script type="text/javascript" async src="//push.zhanzhang.baidu.com/push.js">
</script>

  


</body>
</html>
